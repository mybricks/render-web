!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports._mybricks_render_web=t(require("react"),require("react-dom")):e._mybricks_render_web=t(e.React,e.ReactDOM)}(this,((__WEBPACK_EXTERNAL_MODULE__359__,__WEBPACK_EXTERNAL_MODULE__318__)=>(()=>{var __webpack_modules__={680:function(module){var t;t=()=>(()=>{"use strict";var __webpack_modules__={356:(__unused_webpack_module,__nested_webpack_exports__,__nested_webpack_require_330__)=>{function __WEBPACK_DEFAULT_EXPORT__({data,outputs,inputs,onError}){inputs.from(((val,relOutpus)=>{var _a;const script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){let fn,returnVal,isOk;try{eval(`fn = ${script}`),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError(`数据转换错误:${e.message}`,e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__nested_webpack_require_330__.d(__nested_webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__})}},__webpack_module_cache__={};function __nested_webpack_require_835__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__nested_webpack_require_835__),n.exports}__nested_webpack_require_835__.d=(e,t)=>{for(var n in t)__nested_webpack_require_835__.o(t,n)&&!__nested_webpack_require_835__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_835__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__nested_webpack_require_835__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};return(()=>{__nested_webpack_require_835__.r(__nested_webpack_exports__),__nested_webpack_require_835__.d(__nested_webpack_exports__,{default:()=>u,getCom:()=>d});const e=JSON.parse('{"title":"Fn计算","namespace":"mybricks.core-comlib.fn","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"Fn计算","icon":"./icon.png","runtime":"./Fn.tsx","rtType":"js","visibility":false}'),t=JSON.parse('{"visibility":false,"title":"变量","namespace":"mybricks.core-comlib.var","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"变量","icon":"./icon.png","data":"./data.json","runtime":"./Var.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"get","title":"读取","schema":{"type":"any"},"rels":["return"]},{"id":"set","title":"赋值","schema":{"type":"follow"},"rels":["return"]},{"id":"reset","title":"重置","schema":{"type":"any"}}],"outputs":[{"id":"return","title":"完成","schema":{"type":"unknown"}},{"id":"changed","title":"当值发生变化","schema":{"type":"unknown"}}]}');function n(e){if(e&&"object"==typeof e)try{return JSON.parse(JSON.stringify(e))}catch(t){return e}return e}const o=JSON.parse('{"title":"类型转换","visibility":false,"namespace":"mybricks.core-comlib.type-change","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"类型转换","icon":"./icon.png","runtime":"./rt.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"from","title":"从","schema":{"type":"follow"},"rels":["to"]}],"outputs":[{"id":"to","title":"到","schema":{"type":"follow"},"conMax":1,"editable":true}]}');var r=__nested_webpack_require_835__(356);const s=JSON.parse('{"deprecated":true,"visibility":false,"title":"连接器","namespace":"mybricks.core-comlib.connector","author":"MyBricks","author_name":"MyBricks","version":"1.0.0","description":"连接器","runtime":"./runtime.ts","editors":"./editors.tsx","icon":"./icon.svg","rtType":"js-autorun","inputs":[{"id":"call","rels":["then","catch"],"title":"调用","schema":{"type":"object"}}],"outputs":[{"id":"then","title":"结果","schema":{"type":"unknown"}},{"id":"catch","title":"发生错误","schema":{"type":"string"}}]}');function i({env:e,data:t,outputs:n,onError:o},r={}){if(t.connector)try{e.callConnector(t.connector,r,t.connectorConfig).then((e=>{n.then(e)})).catch((e=>{n.catch(e)}))}catch(e){console.error(e),n.catch(`执行错误 ${e.message||e}`)}else n.catch("没有选择接口")}const a=JSON.parse('{"visibility":false,"title":"作用域输入","namespace":"mybricks.core-comlib.frame-input","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"作用域输入","rtType":"js","runtime":"./runtime.ts","editors":"./editor.tsx","inputs":[{"id":"getCurValue","title":"获取","schema":{"type":"any"},"rels":["return"]}],"outputs":[{"id":"return","title":"结果","schema":{"type":"follow"}}]}'),c=JSON.parse('{"visibility":false,"title":"打开对话框","namespace":"mybricks.core-comlib.scenes","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"切换场景","icon":"./icon.png","runtime":"./runtime.ts","data":"./data.json","rtType":"js","inputs":[{"id":"open","title":"打开","schema":{"type":"any"}}]}'),l={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[p({comDef:e,rt:function({inputs:e,outputs:t}){}}),p({comDef:t,rt:function({env:e,data:t,outputs:o,inputs:r,_notifyBindings:s}){r.get(((e,o)=>{const r=n(void 0!==t.val?t.val:t.initValue);o.return(r)})),r.set(((e,r)=>{t.val=e;const i=n(e);o.changed(i,!0),s(i),r.return(i)})),r.reset((()=>{const e=t.initValue;t.val=e;const r=n(e);o.changed(r,!0),s(r)}))}}),p({comDef:o,rt:r.Z}),p({comDef:s,rt:function({env:e,data:t,inputs:n,outputs:o,onError:r}){e.runtime&&(t.immediate?i({env:e,data:t,outputs:o}):n.call((n=>{i({env:e,data:t,outputs:o,onError:r},n)})))}}),p({comDef:a,rt:function({env:e,data:t,inputs:n,outputs:o}){e.runtime&&n.getCurValue(((e,t)=>{t.return(e)}))}}),p({comDef:c,rt:function({env:e,data:t,inputs:n,_inputs:o,_inputsCallable:r}){n.open((n=>{e.canvas.open(t._sceneId,n,"popup"===t._sceneShowType?null:t.openType),r._open(n)}))}})]},u=l;function d(e){return l.comAray.find((t=>t.namespace===e))}function p({comDef:e,rt:t,data:n}){return Object.assign(e,{runtime:t,data:n})}})(),__nested_webpack_exports__})(),module.exports=t()},428:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),s=n(645),i=n.n(s)()(r());i.push([e.id,".error-c0f46 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n  white-space: pre-wrap;\n}\n",""]),i.locals={error:"error-c0f46"};const a=i},818:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),s=n(645),i=n.n(s)()(r());i.push([e.id,"@keyframes slipInto-fb013 {\n  0% {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n.main-a6e42 {\n  animation: slipInto-fb013 0.1s ease-in-out 1;\n}\n",""]),i.locals={main:"main-a6e42",slipInto:"slipInto-fb013"};const a=i},749:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),s=n(645),i=n.n(s)()(r());i.push([e.id,".container-ff9f5 {\n  position: fixed;\n  right: 20px;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  z-index: 9999;\n}\n.container-ff9f5 .itemWrap-a3069 {\n  position: relative;\n}\n.container-ff9f5 .item-c8a43 {\n  padding: 16px;\n  background-color: #fff;\n  margin-bottom: 8px;\n  border-radius: 4px;\n  max-width: 50vw;\n  max-height: 50vh;\n  overflow: auto;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05);\n  font-size: 12px;\n}\n.container-ff9f5 .errorItem-e6fc8 {\n  color: #f5222d;\n}\n.container-ff9f5 .closeIcon-c5e91 {\n  position: absolute;\n  right: 16px;\n  top: 16px;\n  width: 24px;\n  height: 24px;\n  padding: 2px;\n  cursor: pointer;\n}\n.container-ff9f5 .closeIcon-c5e91:hover {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.12);\n}\n",""]),i.locals={container:"container-ff9f5",itemWrap:"itemWrap-a3069",item:"item-c8a43",errorItem:"errorItem-e6fc8",closeIcon:"closeIcon-c5e91"};const a=i},250:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),s=n(645),i=n.n(s)()(r());i.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.slot-ced90 {\n  width: 100%;\n  height: 100% !important;\n  position: relative;\n}\n.lyFlexColumn-f7fd6 {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-c8e04 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-b95f6 {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-e1ca1 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-ef832 {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-ad880 {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-a2f09 {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-a8880 {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-c6d62 {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-d7b4c {\n  align-items: flex-end;\n}\n.debugFocus-def53 {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-f9041 {\n  flex-shrink: 0;\n}\n.flex-ca980 {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-ca980 > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-ca980 > * {\n  height: 100%;\n}\n.error-d4d00 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-e9378 {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-e9378 .tt-d634d {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-e9378 .info-d57d6 {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),i.locals={slot:"slot-ced90",lyFlexColumn:"lyFlexColumn-f7fd6",lyFlexRow:"lyFlexRow-c8e04",justifyContentFlexStart:"justifyContentFlexStart-b95f6",justifyContentFlexCenter:"justifyContentFlexCenter-e1ca1",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-ef832",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-ad880",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-a2f09",alignItemsFlexStart:"alignItemsFlexStart-a8880",alignItemsFlexCenter:"alignItemsFlexCenter-c6d62",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-d7b4c",debugFocus:"debugFocus-def53",com:"com-f9041",flex:"flex-ca980",error:"error-d4d00",errorRT:"errorRT-e9378",tt:"tt-d634d",info:"info-d57d6"};const a=i},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);o&&i[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},543:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(379),r=n.n(o),s=n(795),i=n.n(s),a=n(565),c=n.n(a),l=n(216),u=n.n(l),d=n(589),p=n.n(d),f=n(428),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var _,g=0,y={};y.styleTagTransform=p(),y.setAttributes=c(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=i(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},g++||(_=r()(f.Z,y)),m},m.unuse=function(){g>0&&!--g&&(_(),_=null)};const v=m},822:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(379),r=n.n(o),s=n(795),i=n.n(s),a=n(565),c=n.n(a),l=n(216),u=n.n(l),d=n(589),p=n.n(d),f=n(818),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var _,g=0,y={};y.styleTagTransform=p(),y.setAttributes=c(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=i(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},g++||(_=r()(f.Z,y)),m},m.unuse=function(){g>0&&!--g&&(_(),_=null)};const v=m},514:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(379),r=n.n(o),s=n(795),i=n.n(s),a=n(565),c=n.n(a),l=n(216),u=n.n(l),d=n(589),p=n.n(d),f=n(749),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var _,g=0,y={};y.styleTagTransform=p(),y.setAttributes=c(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=i(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},g++||(_=r()(f.Z,y)),m},m.unuse=function(){g>0&&!--g&&(_(),_=null)};const v=m},397:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(379),r=n.n(o),s=n(795),i=n.n(s),a=n(565),c=n.n(a),l=n(216),u=n.n(l),d=n(589),p=n.n(d),f=n(250),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var _,g=0,y={};y.styleTagTransform=p(),y.setAttributes=c(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=i(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},g++||(_=r()(f.Z,y)),m},m.unuse=function(){g>0&&!--g&&(_(),_=null)};const v=m},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var s={},i=[],a=0;a<e.length;a++){var c=e[a],l=o.base?c[0]+o.base:c[0],u=s[l]||0,d="".concat(l," ").concat(u);s[l]=u+1;var p=n(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var m=r(f,o);o.byIndex=a,t.splice(a,0,{identifier:d,updater:m,references:1})}i.push(d)}return i}function r(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=o(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<s.length;i++){var a=n(s[i]);t[a].references--}for(var c=o(e,r),l=0;l<s.length;l++){var u=n(s[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=c}}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},783:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(359),r=n.n(o),s=n(724);const i=n(543).Z.locals;class a extends r().PureComponent{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){var t;return{hasError:!0,error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))}}componentDidCatch(e,t){var n,o;console.error(e,t),s.Z.error(e),this.setState({error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(n=null==e?void 0:e.toString)||void 0===n?void 0:n.call(e)),errorInfo:(null==t?void 0:t.stack)||(null==t?void 0:t.message)||(null===(o=null==t?void 0:t.toString)||void 0===o?void 0:o.call(t))})}render(){const{hasError:e,error:t,errorInfo:n}=this.state,{children:o,errorTip:s}=this.props;return e?r().createElement("div",{className:i.error},r().createElement("div",null,s||"渲染错误"),r().createElement("div",null,t||n)):o}}},294:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var o=n(359),r=n.n(o),s=n(680),i=n.n(s),a=n(218),c=n(72),l=n(679),u=n(477),d=n(724),p=n(783),f=n(443),m=n(397),_=n(822),g=n(543),y=n(514);const v=(e,t)=>{e.forEach((e=>{e.comAray?v(e.comAray,t):t[`${e.namespace}-${e.version}`]=e}))};let h=1;function b({json:e,opts:t,style:n={},className:s=""}){const b=(0,o.useMemo)((()=>{var e,n,o;if(1===h){h=2;const r=null===(e=t.env)||void 0===e?void 0:e.pxToRem,s=document.documentElement;if(r){const{enableAdaptive:i=!1,landscapeWidth:a=1440}=r;if(i){function c(){s.style.fontSize=s.clientWidth/(a/12)+"px"}c(),window.addEventListener("resize",c)}}else s.style.fontSize="12px"}return(null===(n=null==t?void 0:t.env)||void 0===n?void 0:n.silent)&&(0,u.JE)(),d.Z.init(null===(o=null==t?void 0:t.env)||void 0===o?void 0:o.showErrorNotification),Object.assign({runtime:{},i18n:e=>e,canvasElement:document.body,canvas:{type:window.document.body.clientWidth<=414?"mobile":"pc"}},t.env)}),[]),x=(0,o.useMemo)((()=>{t.observable||(0,f.O)({pxToRem:b.pxToRem});let e=null;t.comDefs&&(e={},Object.assign(e,t.comDefs));let n=[...window.__comlibs_edit_||[],...window.__comlibs_rt_||[]];if(!e){if(!n.length)throw new Error('组件库为空，请检查是否通过<script src="组件库地址"><\/script>加载或通过comDefs传入了组件库运行时.');e={}}return n.push(i()),n.forEach((t=>{const n=t.comAray;n&&Array.isArray(n)&&v(n,e)})),e}),[]),w=(0,o.useCallback)((e=>{const t=x[e.namespace+"-"+e.version];if(!t){const t=[];for(let n in x)n.startsWith(e.namespace+"-")&&t.push(x[n]);if(t&&t.length>0){t.sort(((e,t)=>(0,l.yC)(e.version,t.version)));const n=t[0];return console.warn(`【Mybricks】组件${e.namespace+"@"+e.version}未找到，使用${n.namespace}@${n.version}代替.`),n}throw console.log(x),new Error(`组件${e.namespace+"@"+e.version}未找到，请确定是否存在该组件以及对应的版本号.`)}return t}),[]),{slot:k}=e,I=(0,o.useMemo)((()=>e=>{console.error(e),d.Z.error(e)}),[]),E=(0,o.useMemo)((()=>Object.assign(Object.assign({},console),{error:e=>{console.error(e),d.Z.error(e)}})),[]),[j,C]=(0,o.useMemo)((()=>{var n;(0,l.nZ)(m.Z,b.shadowRoot),(0,l.nZ)(_.Z,b.shadowRoot),(0,l.nZ)(g.Z,b.shadowRoot),(0,l.nZ)(y.Z,b.shadowRoot);try{let n;return[(0,a.Z)({json:e,getComDef:w,events:t.events,env:b,ref(e){n=e,t.ref&&t.ref(e)},onError:I,debug:t.debug,debugLogger:t.debugLogger,logger:E,scenesOperate:t.scenesOperate},{observable:t.observable||f.L}),n]}catch(e){throw console.error(e),d.Z.error(`导出的JSON.script执行异常: ${(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(n=null==e?void 0:e.toString)||void 0===n?void 0:n.call(e))}`),new Error("导出的JSON.script执行异常.")}}),[]);return(0,o.useLayoutEffect)((()=>{t.disableAutoRun||C.run()}),[]),"js"===e.rtType?r().createElement(r().Fragment,null):r().createElement(p.Z,{errorTip:"页面渲染错误"},r().createElement(c.Z,{env:b,style:n,_env:t._env,slot:k,getComDef:w,getContext:j.get,className:s,__rxui_child__:!t.observable,onError:I,logger:E,root:!0}))}},925:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(359),r=n.n(o),s=n(294);const i=n(822).Z.locals;function a({json:e,opts:t}){const[n,a]=(0,o.useState)(0),{scenesMap:u}=(0,o.useMemo)((()=>{if(t.sceneId){const n=e.scenes.findIndex((e=>e.id===t.sceneId));if(-1!==n){const t=e.scenes.splice(n,1);e.scenes.unshift(...t)}}return{scenesMap:e.scenes.reduce(((e,t,n)=>{var o;return Object.assign(Object.assign({},e),{[t.id]:{show:0===n,todo:[],json:t,disableAutoRun:!!n,useEntryAnimation:!1,type:(null===(o=t.slot)||void 0===o?void 0:o.showType)||t.type}})}),{})}}),[]);(0,o.useMemo)((()=>{if(t.ref){const e=t.ref;t.ref=n=>o=>(n(o),e.call(t,o))}else t.ref=e=>t=>{e(t)}}),[]);const{fxFramesMap:d,fxFramesJsx:p}=(0,o.useMemo)((()=>{const n={},o=[],{global:i}=e;if(i){const{fxFrames:c}=i;Array.isArray(c)&&c.forEach((c=>{var d;const{id:p}=c,f={};n[p]=f;const m=Object.assign(Object.assign({},t),{env:Object.assign(Object.assign({},t.env),{canvas:Object.assign({id:p,type:window.document.body.clientWidth<=414?"mobile":"pc",open:(e,t,n)=>{const o=u[e];n?(Object.entries(u).forEach((([t,o])=>{t===e?(o.useEntryAnimation="blank"===n,o.show=!0):o.show=!1})),a((e=>e+1))):o.show||(o.useEntryAnimation="blank"===n,o.show=!0,a((e=>e+1)))}},null===(d=t.env)||void 0===d?void 0:d.canvas),openScene:(e,t,n)=>{const o=u[e];o.show||(o.show=!0,a((e=>e+1)))}}),disableAutoRun:!0,ref:t.ref((e=>{f._refs=e;const{inputs:t,outputs:n}=e;c.outputs.forEach((e=>{n(e.id,(t=>{var n;null===(n=f.parentScope)||void 0===n||n.outputs[e.id](t)}))}))})),_env:{loadCSSLazy(){},currentScenes:{close(){}}},scenesOperate:{open({todo:e,frameId:t,parentScope:o}){const r=n[t];(null==r?void 0:r._refs)&&(r.parentScope=o,r._refs.inputs[e.pinId](e.value,void 0,!1),r._refs.run())},inputs({frameId:e,parentScope:t,value:n,pinId:o}){const r=u[e];r.parentScope=t,r._refs?r._refs.inputs[o](n):r.todo=r.todo.concat({type:"inputs",todo:{pinId:o,value:n}})},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in u){const r=u[o];if(r.json.coms[t])if(r._refs)l(r._refs,t,n[t],e);else{const o=n[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps:t=>u[e.scenes[0].id]._refs.get(t)}});let _=i.comsReg,g=i.consReg,y=i.pinRels;Object.keys(_).forEach((e=>{_[e].global=!0})),Object.assign(c.coms,_),Object.assign(c.cons,g),Object.assign(c.pinRels,y),o.push(r().createElement(s.Z,{key:p,json:Object.assign(Object.assign({},c),{rtType:"js"}),opts:m}))}))}return{fxFramesMap:n,fxFramesJsx:o}}),[]),f=(0,o.useCallback)((n=>{var o;const r=u[n];return Object.assign(Object.assign({},t),{env:Object.assign(Object.assign({},t.env),{canvas:Object.assign({id:n,type:window.document.body.clientWidth<=414?"mobile":"pc",open:(e,t,n)=>{const o=u[e];n?(Object.entries(u).forEach((([t,o])=>{t===e?(o.useEntryAnimation="blank"===n,o.show=!0):o.show=!1})),a((e=>e+1))):o.show||(o.useEntryAnimation="blank"===n,o.show=!0,a((e=>e+1)))}},null===(o=t.env)||void 0===o?void 0:o.canvas),openScene:(e,t,n)=>{const o=u[e];o.show||(o.show=!0,a((e=>e+1)))}}),get disableAutoRun(){return r.disableAutoRun},ref:t.ref((e=>{r._refs=e;const t=r.todo,{inputs:o,outputs:s}=e,i=r.disableAutoRun;r.json.outputs.forEach((e=>{s(e.id,(t=>{var n;r.show=!1,r.todo=[],r._refs=null,null===(n=r.parentScope)||void 0===n||n.outputs[e.id](t),r.parentScope=null,a((e=>e+1))}))})),t.length?(t.forEach((({type:t,todo:r})=>{if("inputs"===t)Promise.resolve().then((()=>{o[r.pinId](r.value,n)}));else if("globalVar"===t){const{comId:t,value:n,bindings:o}=r;l(e,t,o,n)}})),r.todo=[]):i||(r.disableAutoRun=!0,Promise.resolve().then((()=>{var e,t;null===(t=null===(e=r.json.inputs)||void 0===e?void 0:e.forEach)||void 0===t||t.call(e,(({id:e})=>{o[e](void 0)}))}))),i&&Promise.resolve().then((()=>{e.run()}))})),_env:{loadCSSLazy(){},currentScenes:{close(){r.show=!1,r.todo=[],r._refs=null,a((e=>e+1))}}},scenesOperate:{open({todo:e,frameId:t,parentScope:n}){const o=u[t];if(o)o.show||(o.show=!0,o.todo=o.todo.concat({type:"inputs",todo:e}),o.parentScope=n,a((e=>e+1)));else{const o=d[t];(null==o?void 0:o._refs)&&(o.parentScope=n,o._refs.inputs[e.pinId](e.value,void 0,!1),o._refs.run())}},inputs({frameId:e,parentScope:t,value:n,pinId:o}){const r=u[e];r.parentScope=t,r._refs?r._refs.inputs[o](n):r.todo=r.todo.concat({type:"inputs",todo:{pinId:o,value:n}})},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in u){const r=u[o];if(r.json.coms[t])if(r._refs)l(r._refs,t,n[t],e);else{const o=n[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps:t=>u[e.scenes[0].id]._refs.get(t)}})}),[]),m=(0,o.useMemo)((()=>{const{global:t}=e;let n={},o={},s={};return t&&(n=t.comsReg,o=t.consReg,s=t.pinRels,Object.keys(n).forEach((e=>{n[e].global=!0}))),e.scenes.map(((e,t)=>{const{id:a}=e;Object.assign(e.coms,n),Object.assign(e.cons,o),Object.assign(e.pinRels,s);const l=u[a];return l.show&&r().createElement(c,{key:e.id,json:Object.assign(Object.assign({},e),{scenesMap:u}),opts:f(a),className:l.useEntryAnimation?i.main:"",style:"popup"===l.type?{position:"absolute",top:0,left:0,backgroundColor:"#ffffff00"}:{}})}))}),[n]);return r().createElement(r().Fragment,null,p,m)}function c({json:e,opts:t,style:n={},className:o=""}){return r().createElement(s.Z,{json:e,opts:t,style:n,className:o})}function l(e,t,n,o){const r=e.get(t);r&&Array.isArray(n)&&n.forEach((e=>{let t=r;const n=e.split(".");n.forEach(((e,r)=>{r!==n.length-1?t=t[e]:t[e]=o}))}))}},724:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var o=n(359),r=n.n(o),s=n(318),i=n.n(s);const a=n(514).Z.locals;let c=!1;var l;!function(e){e.Error="error"}(l||(l={}));const u="__fz-debug-info-container__";let d,p=document.getElementById(u),f=0;const m=({content:e,type:t})=>{const[n,s]=(0,o.useState)([]),i=e=>{const t=`__fz-notification-id-${++f}__`;e=Object.assign({_nid:t},e),s((t=>[...t,e]))},c=e=>{s((t=>t.filter((t=>t._nid!==e))))};return(0,o.useEffect)((()=>{d={add:i,remove:c},e&&d.add({content:e,type:t})}),[]),r().createElement("div",{className:a.container},n.map((e=>r().createElement("div",{key:e._nid,className:a.itemWrap},r().createElement("div",{className:`${a.item} ${a.errorItem}`},r().createElement("svg",{className:a.closeIcon,viewBox:"0 0 1045 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>d.remove(e._nid)},r().createElement("path",{d:"M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z",fill:"#555555"})),e.content)))))},_=["ResizeObserver loop limit exceeded"],g={init:e=>{c=!1!==e,c&&(window.onerror=function(e,t,n,o,r){if("string"!=typeof e||!_.includes(e))return!1})},error:e=>{var t;if(c){const n=(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))||e;if("string"==typeof n&&_.includes(n))return;((e,t)=>{let n={content:"",type:t};if("string"==typeof e)n.content=e;else try{n.content=JSON.stringify(e)}catch(t){console.error("showNotification JSON.stringify Error",t,{message:e})}n.content&&(p?null==d||d.add(n):(p=document.createElement("div"),p.setAttribute("id",u),document.body.appendChild(p),i().render(r().createElement(m,{content:n.content,type:n.type}),p)))})(n,l.Error)}}}},72:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var o=n(359),r=n.n(o),s=n(679),i=n(397),a=n(783),c=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const l=i.Z.locals;function u({scope:e,root:t,slot:n,style:o={},className:s,params:i,inputs:a,outputs:c,_inputs:u,_outputs:p,wrapper:_,template:g,env:y,_env:v,getComDef:h,getContext:b,__rxui_child__:x,onError:w,logger:k}){const{style:I,comAry:E}=n,j=[];if(E.forEach(((t,n)=>{const{id:o,def:s,name:i}=t;if(h(s)){const s=b(o,e,{inputs:a,outputs:c,_inputs:u,_outputs:p}),l=(e?e.id:"")+n;j.push({id:o,jsx:r().createElement(d,{key:l,com:t,getComDef:h,getContext:b,scope:e,props:s,env:y,_env:v,template:g,onError:w,logger:k,__rxui_child__:x}),name:i,inputs:s.inputsCallable,style:s.style})}else{const e=r().createElement("div",{className:l.error},"组件 (namespace = ",s.namespace,"）未找到.");j.push({id:o,jsx:e,name:i})}})),"function"==typeof _)return _(j);{const e=null==i?void 0:i.style,n=e||I;return r().createElement("div",{"data-isslot":"1",className:`${m(n)}${t&&s?` ${s}`:""}`,style:Object.assign(Object.assign({},f(n,!!e,t)),o)},j.map((e=>e.jsx)))}}function d({com:e,props:t,scope:n,template:i,env:c,_env:u,getComDef:d,getContext:f,__rxui_child__:m,onError:_,logger:g}){const{id:y,def:v,name:h,slots:b={}}=e,{data:x,title:w,style:k,inputs:I,outputs:E,_inputs:j,_outputs:C,_notifyBindings:O}=t;(0,o.useMemo)((()=>{var e;const{styleAry:t}=k,{pxToRem:n}=c;if(Array.isArray(t)){const o=(null==c?void 0:c.shadowRoot)||(null===(e=document.getElementById("_mybricks-geo-webview_"))||void 0===e?void 0:e.shadowRoot);if(!(o||document).querySelector(`style[id="${y}"]`)){const e=document.createElement("style");let r="";e.id=y,t.forEach((({css:e,selector:t})=>{":root"===t&&(t="> *:first-child"),r+=`\n            #${y} ${t} {\n              ${Object.keys(e).map((t=>{let o=e[t];return n&&"string"==typeof o&&-1!==o.indexOf("px")&&(o=(0,s.Q1)(o)),`${(0,s.Lc)(t)}: ${o};`})).join("\n")}\n            }\n          `})),e.innerHTML=r,o?o.appendChild(e):document.head.appendChild(e)}}Reflect.deleteProperty(k,"styleAry")}),[]);const S=d(v),P=new Proxy(b,{get(e,t){const o=f(y,t,n),s=`组件(namespace=${v.namespace}）的插槽(id=${t})`;if(!o)throw new Error(`${s} 获取context失败.`);return{render(e){const i=b[t];return i?r().createElement(p,{slotId:t,slot:i,props:o,params:e,style:k,onError:_,logger:g,env:c,_env:u,scope:n,getComDef:d,getContext:f,__rxui_child__:m}):r().createElement("div",{className:l.error},s," 未找到.")},get size(){var e,n;return!!(null===(n=null===(e=b[t])||void 0===e?void 0:e.comAry)||void 0===n?void 0:n.length)},_inputs:o._inputs,inputs:o.inputs,outputs:o.outputs}}}),R=(0,o.useMemo)((()=>{if(t.frameId&&t.parentComId){const e=f(t.parentComId,t.frameId,null==n?void 0:n.parent);if(e)return{get _inputs(){return new Proxy({},{get:(t,n)=>e._inputRegs[n]})}}}}),[]),T=function({style:e,id:t}){const n=[t,l.com];1===e.flex&&n.push(l.flex);return n.join(" ")}({style:k,id:y}),A=function({style:e}){const t={},{width:n,height:o}=e;n?(0,s.hj)(n)?t.width=n+"px":n&&(t.width=n):t.width="100%";(0,s.hj)(o)?t.height=o+"px":o&&(t.height=o);return t}({style:k}),F=function({style:e}){const t={},{width:n,marginTop:o,marginLeft:r,marginRight:i,marginBottom:a}=e;(0,s.hj)(o)&&(t.marginTop=o+"px");(0,s.hj)(r)&&("number"==typeof n||r<0?t.marginLeft=r+"px":t.paddingLeft=r+"px");(0,s.hj)(i)&&("number"==typeof n||i<0?t.marginRight=i+"px":t.paddingRight=i+"px");(0,s.hj)(a)&&(t.marginBottom=a+"px");return t}({style:k}),M={};["fixed","absolute"].includes(k.position)&&("fixed"===k.position&&"bottom"===k.fixedY?M.bottom=(0,s.hj)(k.bottom)?k.bottom+"px":k.bottom:k.top&&(M.top=(0,s.hj)(k.top)?k.top+"px":k.top),"fixed"===k.position&&"right"===k.fixedX?M.right=(0,s.hj)(k.right)?k.right+"px":k.right:k.left&&(M.left=(0,s.hj)(k.left)?k.left+"px":k.left),"fixed"===k.position&&(M.zIndex=1e3));let $=S.runtime({id:y,env:c,_env:u,data:x,name:h,title:w,style:k,inputs:I,outputs:E,_inputs:j,_outputs:C,_notifyBindings:O,slots:P,createPortal:e=>{},parentSlot:R,__rxui_child__:m,onError:_,logger:g});return"function"==typeof i&&($=i({id:y,jsx:$,name:h})),$=$?r().createElement("div",{id:y,key:y,style:Object.assign(Object.assign(Object.assign(Object.assign({display:k.display,position:k.position||"relative"},M),A),F),k.ext||{}),className:T},r().createElement(a.Z,{errorTip:`组件 (namespace = ${v.namespace}@${v.version}）渲染错误`},$)):null,$}const p=(0,o.memo)((({slotId:e,props:t,slot:n,params:i,scope:a,env:c,_env:l,style:d,getComDef:p,getContext:f,onError:m,logger:_,__rxui_child__:g})=>{let y,v;if("scope"===(null==n?void 0:n.type)){y={id:(0,s.Vj)(10,16),frameId:e},a&&(y.parent=a)}else y=a;if(i){const e=i.inputValues;if("object"==typeof e)for(let n in e)t.inputs[n](e[n],y);"function"==typeof i.wrap&&(v=i.wrap)}return t.run(y),(0,o.useEffect)((()=>()=>{t.destroy()}),[]),r().createElement(u,{scope:y,env:c,_env:l,slot:n,params:i,wrapper:v,template:null==i?void 0:i.itemWrap,getComDef:p,getContext:f,inputs:null==i?void 0:i.inputs,outputs:null==i?void 0:i.outputs,_inputs:null==i?void 0:i._inputs,_outputs:null==i?void 0:i._outputs,onError:m,logger:_,__rxui_child__:g})}),((e,t)=>{var n,o,r,s;const i=null===(n=e.params)||void 0===n?void 0:n.key,a=null===(o=null==t?void 0:t.params)||void 0===o?void 0:o.key;if(void 0===i&&void 0===a)return!0;if(i!==a)return!1;if(void 0!==i&&void 0!==a&&i===a)try{if(JSON.stringify(null===(r=e.params)||void 0===r?void 0:r.inputValues)!==JSON.stringify(null===(s=t.params)||void 0===s?void 0:s.inputValues))return!1}catch(e){}return!0}));function f(e,t,n){const{paddingLeft:o,paddingTop:r,paddingRight:s,paddingBottom:i,background:a,backgroundColor:l,backgroundImage:u,backgroundPosition:d,backgroundRepeat:p,backgroundSize:f}=e,m=c(e,["paddingLeft","paddingTop","paddingRight","paddingBottom","background","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize"]);let _={paddingLeft:o||0,paddingTop:r||0,paddingRight:s||0,paddingBottom:i||0,backgroundColor:l||(n?"#ffffff":void 0),backgroundImage:u,backgroundPosition:d,backgroundRepeat:p,backgroundSize:f};if(a){if("object"==typeof a){const{background:e,backgroundImage:t,backgroundColor:n,backgroundRepeat:o,backgroundSize:r}=a;_.backgroundRepeat=o,_.backgroundSize=r,e?_.background=e:(_.backgroundImage=t,_.backgroundColor=n)}else _.background=a}return t&&(_=Object.assign(_,m)),_}function m(e){var t,n;const o=[l.slot,"slot"],r=e;if(r){"flex-column"==(null===(t=r.layout)||void 0===t?void 0:t.toLowerCase())?o.push(l.lyFlexColumn):"flex-row"==(null===(n=r.layout)||void 0===n?void 0:n.toLowerCase())&&o.push(l.lyFlexRow);const e=r.justifyContent;e&&("FLEX-START"===e.toUpperCase()?o.push(l.justifyContentFlexStart):"CENTER"===e.toUpperCase()?o.push(l.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?o.push(l.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?o.push(l.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&o.push(l.justifyContentFlexSpaceBetween));const s=r.alignItems;s&&("FLEX-START"===s.toUpperCase()?o.push(l.alignItemsFlexStart):"CENTER"===s.toUpperCase()?o.push(l.alignItemsFlexCenter):"FLEX-END"===s.toUpperCase()&&o.push(l.alignItemsFlexFlexEnd))}return o.join(" ")}},218:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(477),r=n(679);const s="_rootFrame_";function i(e,{observable:t}){const{json:n,getComDef:i,env:a,ref:c,onError:l,logger:u,debug:d,debugLogger:p,scenesOperate:f}=e;console.log("executor opts: ",e);const{slot:m,coms:_={},comsAutoRun:g={},cons:y=[],pinRels:v={},pinProxies:h={},pinValueProxies:b={}}=n,x=a,w={},k={},I={},E={},j={};Object.keys(y).forEach((e=>{const t=y[e],{startPinParentKey:n}=t[0];n&&(j[n]=e)}));const C={},O={};function S(e,t){if("com"===e){const{com:e,pinHostId:n,val:r,fromCon:s,notifyAll:i,comDef:a}=t;p?p("com","output",{id:e.id,pinHostId:n,val:r,fromCon:s,notifyAll:i,comDef:a}):(0,o.J2)(e.title,a,n,r)}else if("frame"===e){const{comId:e,frameId:n,pinHostId:o,val:r,sceneId:s}=t;p&&p("frame","output",{comId:e,frameId:n,pinHostId:o,val:r,sceneId:s})}}function P(e){const{com:t,pinHostId:n,val:r,frameKey:s,finishPinParentKey:i,comDef:a}=e;p?p("com","input",{id:t.id,pinHostId:n,val:r,frameKey:s,finishPinParentKey:i,comDef:a}):(0,o.Wg)(t.title,a,n,r)}function R(e,t,n,o,i){function a(e,n){var s;const i=h[e.comId+"-"+e.pinId];if(i){if(O[`${i.frameId}-${i.pinId}`]=t,o&&o.finishPinParentKey!==e.startPinParentKey)return;if("frame"===i.type){const o=T(e.comId,n);let s;return s={id:(0,r.Vj)(10,16),frameId:i.frameId,parent:n,proxyComProps:o},D(i,t,s),void N({frameId:i.frameId})}}if("com"===e.type)o?o.finishPinParentKey===e.startPinParentKey&&F(e,t,n):F(e,t,n);else{if("frame"!==e.type)throw new Error("尚未实现");if(o&&o.finishPinParentKey!==e.startPinParentKey)return;if(e.comId){if("inner-input"===e.direction){const n=k[e.comId+"-"+e.frameId+"-"+e.pinId];n&&n(t)}else if("inner-output"===e.direction&&"joint"===e.pinType){const n=y[e.comId+"-"+e.frameId+"-"+e.pinId];n&&R(n,t)}}else{const o=null==n?void 0:n.proxyComProps;if(o){const r=o.outputs[e.pinId];if(r)return void r(t,n.parent)}null===(s=E[e.pinId])||void 0===s||s.call(E,t)}}}e.forEach((e=>{if(d&&e.isIgnored)return;let t=n;if(i){const n=e.frameKey;if(!n)throw new Error("数据异常，请检查toJSON结果.");if(n===s)a(e,{});else{const o=n.split("-");if(o.length>=2){const n=Z(o[0],o[1],null,i);n.curScope?(n.curScope!==t&&(t=n.curScope),a(e,t)):n.pushTodo((n=>{n!==t&&(t=n),a(e,t)}))}}}else{const n=e.frameKey.split("-");if(n.length>=2&&!t){const o=Z(n[0],n[1],null,!1);if("scope"===(null==o?void 0:o.type)&&!(null==o?void 0:o.curScope))return void o.pushTodo((n=>{n!==t&&(t=n),a(e,t)}))}a(e,t)}}))}function T(n,o){var r;const c=_[n];if(!c)return null;const d=n+(c.frameId||s);let p,m=w[d];m||(m=w[d]={});let g=o;for(!g&&c.parentComId&&c.frameId&&(g=null===(r=w[`${c.parentComId}-${c.frameId}`])||void 0===r?void 0:r.curScope);g;){const e=g.id+"-"+n;if(g.frameId===c.frameId){p=g.id;const t=m[e];if(t)return t;break}g=g.parent}const b=(p?p+"-":"")+n,x=m[b];if(x)return x;const k=c.def,I=c.model;let E=e?JSON.parse(JSON.stringify(I)):I;const j=t(E),C={},P={},A={},M={},$=function(e){return new Proxy({},{ownKeys:e=>c.inputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(t,n)=>function(t){const o=null==e?void 0:e.inputs;if(o){const e=o[n];"function"==typeof e&&e(t)}C[n]=t;const r=P[n];r&&(r.forEach((({val:e,fromCon:n,fromScope:o})=>{t(e,new Proxy({},{get:(e,t)=>function(e){const r=D()[t];if("function"!=typeof r)throw new Error(`outputs.${t} not found`);r(e,o||g,n)}}))})),P[n]=void 0)}})},Z=new Proxy({},{get:(e,t)=>function(e){const r=v[n+"-"+t];if(r){const s={},i={};return r.forEach((e=>{s[e]=t=>{i[e]=t}})),Promise.resolve().then((()=>{F({comId:n,def:k,pinId:t},e,o,i)})),s}F({comId:n,def:k,pinId:t},e,o)}}),N=new Proxy({},{get:(e,t)=>function(e){const o=h[n+"-"+t];o&&(null==f||f.inputs(Object.assign(Object.assign({},o),{value:e,parentScope:K})))}}),D=function(e){return new Proxy({},{ownKeys:e=>c.outputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(t,r,s){const l=function(t,s,l){const u="boolean"==typeof s&&s,d=arguments,p=null==e?void 0:e.outputs;if(p){const e=p[r];"function"==typeof e&&e(t)}let f;s&&"object"==typeof s&&(f=s);const m=i(k);S("com",{com:c,pinHostId:r,val:t,fromCon:l,notifyAll:u,comDef:m});const _=I.outputEvents;let g;if(_){const e=_[r];if(e&&Array.isArray(e)){const o=e.find((e=>e.active));if(o){const{type:e}=o;switch(e){case"none":g=[];break;case"fx":const s=h[n+"-"+r];if("frame"===(null==s?void 0:s.type)){const e=`${s.frameId}-${s.pinId}`;g=y[e]||[],O[e]=t}else g=[];break;case"defined":break;default:if(g=[],Array.isArray(null==a?void 0:a.events)){const t=a.events.find((t=>{if(t.type===e)return t}));t&&"function"==typeof t.exe&&t.exe({options:o.options})}}}}}g=g||y[n+"-"+r],(null==g?void 0:g.length)&&(d.length>=3?R(g,t,f,l):R(g,t,f||o,l,u))};return l.getConnections=()=>y[n+"-"+r]||[],l}})},L=new Proxy({},{get:(e,t,n)=>function(e){A[t]=e;const n=M[t];n&&(n.forEach((t=>{e(t)})),M[t]=void 0)}}),q=new Proxy({},{get:(e,t,r)=>function(e){const r=y[n+"-"+t];r&&(S("com",{com:c,pinHostId:t,val:e,comDef:k}),R(r,e,o))}});const K={id:c.id,title:c.title,frameId:c.frameId,parentComId:c.parentComId,data:j.data,style:j.style,_inputRegs:C,addInputTodo:(e,t,n,o)=>{let r=P[e];r||(P[e]=r=[]),r.push({val:t,fromCon:n,fromScope:o})},inputs:$(),inputsCallable:Z,_inputsCallable:N,outputs:D(),_inputs:L,_outputs:q,clone(e){const t={inputs:$(e),outputs:D(e)};return Object.setPrototypeOf(t,this),t},_notifyBindings:function(e){if(c.global)return void(null==f||f._notifyBindings(e,c));const{bindingsTo:t}=c.model;if(t)for(let n in t){const o=T(n);if(o){const r=t[n];Array.isArray(r)&&r.forEach((t=>{let n=o;const r=t.split(".");r.forEach(((t,o)=>{o!==r.length-1?n=n[t]:n[t]=e}))}))}}},logger:u,onError:l};return m[b]=K,K}function A(e,t){let n=O[`${e}${t?`-${t.id}-${t.frameId}`:""}`];return!n&&(null==t?void 0:t.parent)&&(n=A(e,t.parent)),n}function F(e,t,n,o){var r;const{comId:s,def:a,pinId:c,pinType:d,frameKey:p,finishPinParentKey:m}=e;if("ext"===d){const e=w[s]||T(s,n);if("show"===c)e.style.display="";else if("hide"===c)e.style.display="none";else if("showOrHide"===c){const t=e.style;"none"===t.display?t.display="":t.display="none"}}else if("config"===d){const o=T(s,n),r=i(a);P({com:o,pinHostId:c,val:t,frameKey:p,finishPinParentKey:m,comDef:r});const{extBinding:l}=e,u=l.split(".");let d=o;u.forEach(((e,n)=>{n!==u.length-1?d=d[e]:d[e]=t}))}else if(null===(r=a.rtType)||void 0===r?void 0:r.match(/^js/gi)){const o=_[s];if(o){const r=T(s,n),d=i(a);if(o.global){const e=null==f?void 0:f.getGlobalComProps(s);e&&(r.data=e.data)}const _=null==n?void 0:n.id,g=(_?_+"-":"")+s;P({com:o,val:t,pinHostId:c,frameKey:p,finishPinParentKey:m,comDef:d}),I[g]||(I[g]=!0,d.runtime({env:x,data:r.data,inputs:r.inputs,outputs:r.outputs,_notifyBindings:r._notifyBindings,_inputsCallable:r._inputsCallable,logger:u,onError:l}));const{realId:y,realVal:v,isReady:h,isMultipleInput:w}=M(e,t,r);(w&&h||!w)&&r._inputRegs[y](v,new Proxy({},{get:(t,o)=>function(t){if(b){const e=b[`${s}-${c}`];e&&void 0===(t=A(`${p}-${e.pinId}`,n))&&(t=A(`${p}-${e.pinId}`,null))}r.outputs[o](t,n,e)}}))}}else{const r=T(s,n),l=i(a);P({com:r,pinHostId:c,val:t,frameKey:p,finishPinParentKey:m,comDef:l});const{realId:u,realVal:d,isReady:f,isMultipleInput:_}=M(e,t,r),g=r._inputRegs[u];if(_&&f||!_)if("function"==typeof g){let t;t=o||new Proxy({},{get:(t,o)=>function(t){r.outputs[o](t,n,e)}}),g(d,t)}else r.addInputTodo(u,d,e,n)}if(m){const e=y[j[m]];e&&!v[`${s}-${c}`]&&R(e,void 0)}}function M(e,t,n){const{pinId:o,comId:r}=e,s=o.indexOf(".");if(-1!==s){let e=o.substring(0,s);const i=o.substring(s+1);let a=C[r];a||(a=C[r]={}),a[i]=t;const c=new RegExp(`${e}.`),l=Object.keys(n.inputs).filter((e=>!!e.match(c)));return Object.keys(a).length===l.length?(delete C[r],{isMultipleInput:!0,isReady:!0,realId:e,realVal:a}):{isMultipleInput:!0,isReady:!1}}return{isMultipleInput:!1,isReady:!0,realId:o,realVal:t}}function $(e,t){let n;return e.comAry&&e.comAry.find((e=>{if(e.id===t)return n=e,e;if(e.slots)for(let o in e.slots)if(n=$(e.slots[o],t),n)return n})),n}function Z(e,t,n,o){let r=e+"-"+t+(n?`-${n.id}`:""),s=w[r];if(o&&!s&&(s=w[Object.keys(w).find((e=>e.startsWith(r)))]),!s){const o=$(m,e),i=null==o?void 0:o.slots[t],a={};let c;if(n){const n=w[e+"-"+t];n&&(c=n.todo)}const l={scope:n,todo:c},u=new Proxy({},{get:(e,t)=>function(e){a[t]=e}}),d=new Proxy({},{get(n,o){const r=function(n,r){const s=e+"-"+t+"-"+o,i=y[s];O[`${s}${r?`-${r.id}-${r.frameId}`:""}`]=n,S("frame",{comId:e,frameId:t,pinHostId:o,val:n}),i&&R(i,n,r||l.scope)};return r.getConnections=()=>y[e+"-"+t+"-"+o]||[],r}}),p=new Proxy({},{get:(e,t,n)=>function(e){k[r+"-"+t]=e}});let f={};s=w[r]={type:null==i?void 0:i.type,run(n){l.scope=n;const o=(null==n?void 0:n.id)||"none";f[o]||(f[o]=!0,N({comId:e,frameId:t,scope:n})),Array.isArray(l.todo)&&(l.todo.forEach((e=>{Promise.resolve().then((()=>{e(n)}))})),l.todo=void 0)},destroy(){Reflect.deleteProperty(w,r)},_inputs:u,_inputRegs:a,inputs:d,outputs:p,get curScope(){return l.scope},get todo(){return l.todo},pushTodo(e){l.todo||(l.todo=[]),l.todo.push(e)}}}return s}function N(e){const{comId:t,frameId:n,scope:r}=e,s=g[t?`${t}-${n}`:`${n}`];s&&s.forEach((e=>{const{id:t,def:n}=e;if(_[t]){const e=T(t,r),s=i(n);(0,o.cM)(`${s.namespace} 开始执行`),s.runtime({env:x,data:e.data,inputs:e.inputs,outputs:e.outputs,_inputsCallable:e._inputsCallable,logger:u,onError:l})}}))}function D(e,t,n=void 0,o=!0){const{frameId:r,comId:i,pinId:a,sceneId:c}=e,l=y[(i?`${i}-${r}`:`${r}`)+"-"+a];O[`${r}-${a}`]=t,o&&S("frame",{comId:i,frameId:r,pinHostId:a,val:t,sceneId:c}),l?R(l,t,n):r!==s&&(null==f||f.open({frameId:r,todo:{pinId:a,value:t},parentScope:n.proxyComProps}))}const L={get(e,t,n,o){let r,s,i;for(let e=0;e<arguments.length;e++){const t=arguments[e];e>0&&"string"==typeof t&&(r=t),"object"==typeof t&&(t.inputs||t.outputs||t._inputs||t._outputs?i=t:(t.id||t.parent)&&(s=t))}if(r)return Z(e,r,s);{const t=T(e,s);return i?t.clone(i):t}}};return"function"==typeof c&&c({run(){N({frameId:s})},inputs:new Proxy({},{get:(e,t)=>function(e,n=void 0,o=!0){D({frameId:s,pinId:t,sceneId:n},e,void 0,o)}}),outputs(e,t){E[e]=t},get:L.get}),L}},477:(e,t,n)=>{"use strict";n.d(t,{J2:()=>l,JE:()=>r,Wg:()=>c,cM:()=>a});let o=!1;function r(){o=!0}const s="__IOEventList__",i={log:(...e)=>{window[s]||(window[s]=[]),window[s].push(e[0]),console.log(...e)}};function a(e){console.log(`%c[Mybricks]%c ${e}\n`,"color:#FFF;background:#fa6400","","")}function c(e,t,n,r){if(o)return;let s;try{s=JSON.stringify(r)}catch(e){s=r}i.log(`%c[Mybricks] 输入项 %c ${e||t.title||t.namespace} | ${n} -> ${s}`,"color:#FFF;background:#000","","")}function l(e,t,n,r){if(o)return;let s;try{s=JSON.stringify(r)}catch(e){s=r}i.log(`%c[Mybricks] 输出项 %c ${e||t.title||t.namespace} | ${n} -> ${s}`,"color:#FFF;background:#fa6400","","")}},131:(e,t,n)=>{"use strict";n.d(t,{ep:()=>o.e,in:()=>i,kU:()=>s,st:()=>r.s});var o=n(180),r=n(872);const s=new WeakMap,i=new WeakMap},872:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});var o=n(131);const r=new class{constructor(){this.reactionStack=[]}regist(e){let t=this.getCurrentReaction();t&&o.ep.registReaction(t,e)}autoRun(e,t){const{reactionStack:n}=this;if(-1===n.indexOf(e))try{return n.push(e),t()}finally{n.pop()}}getCurrentReaction(){const{reactionStack:e}=this;return e[e.length-1]}}},180:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});var o=n(679),r=n(131);function s(e){e()}const i=new class{constructor(){this.taskMap=new WeakMap,this.reactionToTaskMap=new WeakMap}addTask(e){this.taskMap.set(e,new Map)}deleteTask(e){if(!(0,o.Kn)(e))return;const t=r.kU.get(e);r.kU.delete(e),r.in.delete(t);this.taskMap.get(t);this.taskMap.delete(t)}deleteReaction(e){let t=this.reactionToTaskMap.get(e);t&&(this.reactionToTaskMap.delete(e),t.forEach((t=>{t.forEach((t=>{t.delete(e)}))})))}registReaction(e,{target:t,key:n}){const o=this.taskMap.get(t);if(o){let t=o.get(n);t||(t=new Set,o.set(n,t)),t.has(e)||t.add(e);let r=this.reactionToTaskMap.get(e);r||(r=new Set,this.reactionToTaskMap.set(e,r)),r.has(o)||r.add(o)}}getReactions({target:e,key:t}){const n=this.taskMap.get(e);if(!n)return[];return n.get(t)||[]}runTask(e){const t=this.getReactions(e);t.size&&t.forEach(s)}}},819:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(443),r=n(679),s=n(131);const i={get:function(e,t){const n=e[t];if(["$$typeof","constructor"].includes(t))return n;s.st.regist({target:e,key:t});const i=s.in.get(n);return(0,r.Kn)(n)?i||(0,o.L)(n):i||n},set:function(e,t,n){(0,r.Kn)(n)&&(n=s.kU.get(n)||n);const o=Object.hasOwnProperty.call(e,t),i=e[t];e[t]=n;let a=!1;switch(!0){case!o||Array.isArray(e)&&"length"===t:case n!==i:a=!0}return a&&(s.ep.runTask({target:e,key:t}),s.ep.deleteTask(s.in.get(i))),!0}}},443:(e,t,n)=>{"use strict";n.d(t,{L:()=>d,O:()=>u});var o=n(359),r=n.n(o),s=n(131),i=n(679),a=n(819);const c="__render-web-createElement__";let l;function u(e){const{pxToRem:t}=e;r()[c]||(r()[c]=!0,l=r().createElement,r().createElement=function(...e){let[n,a,...c]=e;if(t&&(null==a?void 0:a.style)){const u=a.style;Object.keys(u).forEach((e=>{const t=u[e];"string"==typeof t&&-1!==t.indexOf("px")&&(u[e]=(0,i.Q1)(t))}))}if("function"!=typeof n||!n.prototype||n.prototype instanceof r().Component||n.prototype.isReactComponent||!a)return l(n,a,...c);{let d=a.__rxui_child__||n.__rxui__;if(d||(d=!!Object.keys(a).find((e=>{const t=a[e];return s.kU.has(t)}))),d){if(!n.__rxui__){function f(e){var t;const r=(0,o.useRef)(null),[,s]=(0,o.useState)([]),i=(0,o.useCallback)((()=>{s([])}),[]);let a;return(0,o.useMemo)((()=>{r.current||(r.current=new p(i))}),[]),(0,o.useEffect)((()=>()=>{var e;null===(e=r.current)||void 0===e||e.destroy(),r.current=null}),[]),null===(t=r.current)||void 0===t||t.track((()=>{a=n(e)})),a}n.__rxui__=(0,o.memo)(f)}return l(n.__rxui__,a,...c)}return l(n,a,...c)}})}function d(e){return(0,i.Kn)(e)?s.kU.has(e)?e:s.in.get(e)||function(e){const t=a.Z,n=new Proxy(e,t);return s.in.set(e,n),s.kU.set(n,e),s.ep.addTask(e),n}(e):{}}class p{constructor(e){this.update=e}track(e){s.st.autoRun(this.update,e)}destroy(){s.ep.deleteReaction(this.update)}}},679:(e,t,n)=>{"use strict";function o(e){return e&&"object"==typeof e}function r(e){return"number"==typeof e&&!isNaN(e)}function s(e,t){const n=e.split("."),o=t.split("."),r=n.length,s=o.length,i=Math.min(r,s);let a=0;for(;a<i;a++){let e=parseInt(n[a]),t=parseInt(o[a]);if(e>t)return 1;if(e<t)return-1}if(r>s){for(let e=a;e<r;e++)if(0!=parseInt(n[e]))return 1;return 0}if(r<s){for(let e=a;e<s;e++)if(0!=parseInt(o[e]))return-1;return 0}return 0}function i(e=5,t=8){const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(let r=0;r<e;r++)o[r]=n[0|Math.random()*t];else{let e;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(let t=0;t<36;t++)o[t]||(e=0|16*Math.random(),o[t]=n[19==t?3&e|8:e])}return o.join("")}function a(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}n.d(t,{Kn:()=>o,Lc:()=>a,Q1:()=>m,Vj:()=>i,hj:()=>r,nZ:()=>_,yC:()=>s});const c=(l=12,u=0,d=5,p="rem",function(e,t){var n,o,r,s,i=parseFloat(t);return!t||i<=u?e:"".concat((n=i/l,o=d,r=Math.pow(10,o+1),s=Math.floor(n*r),10*Math.round(s/10)/r)).concat(p)});var l,u,d,p;const f=/"[^"]+"|'[^']+'|url\([^)]+\)|(\d*\.?\d+)px/g,m=e=>e.replace(f,c),_=(e,t)=>{var n;const o=t||(null===(n=document.getElementById("_mybricks-geo-webview_"))||void 0===n?void 0:n.shadowRoot)||document.head;e.use({target:o})}},359:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__359__},318:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__318__},147:e=>{"use strict";e.exports=JSON.parse('{"u2":"@mybricks/render-web","i8":"1.1.75"}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{render:()=>s});var e=__webpack_require__(359),t=__webpack_require__.n(e),n=__webpack_require__(294),o=__webpack_require__(147),r=__webpack_require__(925);function s(e,o={}){return Array.isArray(e.scenes)?t().createElement(r.Z,{json:e,opts:o}):t().createElement(n.Z,{json:e,opts:o})}console.log(`%c ${o.u2} %c@${o.i8}`,"color:#FFF;background:#fa6400","","")})(),__webpack_exports__})()));