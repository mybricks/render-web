!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports._mybricks_render_web=t(require("react")):e._mybricks_render_web=t(e.React)}(this,(__WEBPACK_EXTERNAL_MODULE__359__=>(()=>{"use strict";var __webpack_modules__={297:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,".error-b274d {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n  white-space: pre-wrap;\n}\n",""]),s.locals={error:"error-b274d"};const a=s},496:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.slot-a8d25 {\n  width: 100%;\n  height: 100% !important;\n  position: relative !important;\n}\n.lyFlexColumn-d9936 {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-a9454 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-ea522 {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-e8a52 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-fce2e {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-d55ab {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-ef3f2 {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-c031a {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-d8d4a {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-a42bd {\n  align-items: flex-end;\n}\n.debugFocus-cb6bb {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-b7979 {\n  flex-shrink: 0;\n}\n.flex-f44ac {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-f44ac > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-f44ac > * {\n  height: 100%;\n}\n.error-d28ed {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-cde46 {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-cde46 .tt-f3bc4 {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-cde46 .info-f2201 {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),s.locals={slot:"slot-a8d25",lyFlexColumn:"lyFlexColumn-d9936",lyFlexRow:"lyFlexRow-a9454",justifyContentFlexStart:"justifyContentFlexStart-ea522",justifyContentFlexCenter:"justifyContentFlexCenter-e8a52",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-fce2e",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-d55ab",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-ef3f2",alignItemsFlexStart:"alignItemsFlexStart-c031a",alignItemsFlexCenter:"alignItemsFlexCenter-d8d4a",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-a42bd",debugFocus:"debugFocus-cb6bb",com:"com-b7979",flex:"flex-f44ac",error:"error-d28ed",errorRT:"errorRT-cde46",tt:"tt-f3bc4",info:"info-f2201"};const a=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);o&&s[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},81:e=>{e.exports=function(e){return e[1]}},358:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(379),r=n.n(o),i=n(795),s=n.n(i),a=n(569),c=n.n(a),u=n(565),l=n.n(u),p=n(216),d=n.n(p),f=n(589),m=n.n(f),_=n(297),y={};y.styleTagTransform=m(),y.setAttributes=l(),y.insert=c().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=d();r()(_.Z,y);const g=_.Z&&_.Z.locals?_.Z.locals:void 0},65:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(379),r=n.n(o),i=n(795),s=n.n(i),a=n(569),c=n.n(a),u=n(565),l=n.n(u),p=n(216),d=n.n(p),f=n(589),m=n.n(f),_=n(496),y={};y.styleTagTransform=m(),y.setAttributes=l(),y.insert=c().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=d();r()(_.Z,y);const g=_.Z&&_.Z.locals?_.Z.locals:void 0},379:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},s=[],a=0;a<e.length;a++){var c=e[a],u=o.base?c[0]+o.base:c[0],l=i[u]||0,p="".concat(u," ").concat(l);i[u]=l+1;var d=n(p),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var m=r(f,o);o.byIndex=a,t.splice(a,0,{identifier:p,updater:m,references:1})}s.push(p)}return s}function r(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var c=o(e,r),u=0;u<i.length;u++){var l=n(i[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=c}}},569:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},859:(e,t,n)=>{function o({env:e,data:t,outputs:n,onError:o},r={}){if(t.connector)try{e.callConnector(t.connector,r,t.connectorConfig).then((e=>{n.then(e)})).catch((e=>{n.catch(e)}))}catch(e){console.error(e),n.catch(`执行错误 ${e.message||e}`)}else n.catch("没有选择接口")}function r({env:e,data:t,inputs:n,outputs:r,onError:i}){e.runtime&&(t.immediate?o({env:e,data:t,outputs:r}):n.call((n=>{o({env:e,data:t,outputs:r,onError:i},n)})))}n.d(t,{Z:()=>r})},304:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function __WEBPACK_DEFAULT_EXPORT__({data,outputs,inputs,onError}){inputs.from(((val,relOutpus)=>{var _a;const script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){let fn,returnVal,isOk;try{eval(`fn = ${script}`),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError(`数据转换错误:${e.message}`,e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__})},464:(e,t,n)=>{function o({env:e,data:t,outputs:n,inputs:o}){o.get(((e,n)=>{const o=r(t.val);n.return(o)})),o.set((e=>{t.val=e,n.changed(r(e),!0)}))}function r(e){if(e&&"object"==typeof e)try{return JSON.parse(JSON.stringify(e))}catch(t){return e}return e}n.d(t,{Z:()=>o})},150:(e,t,n)=>{function o({inputs:e,outputs:t}){}n.d(t,{Z:()=>o})},925:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(412),r=n(150),i=n(282),s=n(464),a=n(164),c=n(304),u=n(628),l=n(859);const p={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[f({comDef:o,rt:r.Z}),f({comDef:i,rt:s.Z}),f({comDef:a,rt:c.Z}),f({comDef:u,rt:l.Z})]},d=p;function f({comDef:e,rt:t,data:n}){return Object.assign(e,{runtime:t,data:n})}},783:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(359),r=n.n(o),i=n(358);class s extends r().PureComponent{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){var t;return{hasError:!0,error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))}}componentDidCatch(e,t){var n,o;console.error(e,t),this.setState({error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(n=null==e?void 0:e.toString)||void 0===n?void 0:n.call(e)),errorInfo:(null==t?void 0:t.stack)||(null==t?void 0:t.message)||(null===(o=null==t?void 0:t.toString)||void 0===o?void 0:o.call(t))})}render(){const{hasError:e,error:t,errorInfo:n}=this.state,{children:o,errorTip:s}=this.props;return e?r().createElement("div",{className:i.Z.error},r().createElement("div",null,s||"渲染错误"),r().createElement("div",null,t||n)):o}}},294:(e,t,n)=>{n.d(t,{Z:()=>f});var o=n(359),r=n.n(o),i=n(72),s=n(443),a=n(925),c=n(218),u=n(679),l=n(783),p=n(477);const d=(e,t)=>{e.forEach((e=>{e.comAray?d(e.comAray,t):t[`${e.namespace}-${e.version}`]=e}))};function f({json:e,opts:t}){const n=(0,o.useMemo)((()=>{if(t.observable||(0,s.O)(),t.comDefs)return d(a.Z.comAray,t.comDefs),t.comDefs;let e=window.__comlibs_rt_;if(e||(e=window.__comlibs_edit_),!e||!Array.isArray(e))throw new Error('组件库为空，请检查是否通过<script src="组件库地址"><\/script>加载了组件库运行时.');const n={};return e.push(a.Z),e.forEach((e=>{const t=e.comAray;t&&Array.isArray(t)&&d(t,n)})),n}),[]),f=(0,o.useCallback)((e=>{const t=n[e.namespace+"-"+e.version];if(!t){const t=[];for(let o in n)o.startsWith(e.namespace+"-")&&t.push(n[o]);if(t&&t.length>0){t.sort(((e,t)=>(0,u.yC)(e.version,t.version)));const n=t[0];return console.warn(`【Mybricks】组件${e.namespace+"@"+e.version}未找到，使用${n.namespace}@${n.version}代替.`),n}throw console.log(n),new Error(`组件${e.namespace+"@"+e.version}未找到，请确定是否存在该组件以及对应的版本号.`)}return t}),[]),m=(0,o.useMemo)((()=>{var e;return(null===(e=null==t?void 0:t.env)||void 0===e?void 0:e.silent)&&(0,p.JE)(),Object.assign({runtime:{},i18n:e=>e,canvasElement:document.body},t.env)}),[]),{slot:_}=e,y=(0,o.useMemo)((()=>e=>{console.error(e)}),[]),g=(0,o.useMemo)((()=>console),[]),[h,v]=(0,o.useMemo)((()=>{try{let n;return[(0,c.Z)({json:e,getComDef:f,events:t.events,env:m,ref(e){n=e,t.ref&&t.ref(e)},onError:y,logger:g},{observable:t.observable||s.L}),n]}catch(e){throw console.error(e),new Error("导出的JSON.script执行异常.")}}),[]);return(0,o.useLayoutEffect)((()=>{v.run()}),[]),r().createElement(l.Z,{errorTip:"页面渲染错误"},r().createElement(i.Z,{env:m,slot:_,getComDef:f,getContext:h.get,__rxui_child__:!t.observable,onError:y,logger:g}))}},72:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(359),r=n.n(o),i=n(679),s=n(65),a=n(783),c=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};function u({scope:e,slot:t,inputs:n,outputs:o,_inputs:i,_outputs:a,wrapper:c,template:u,env:p,getComDef:m,getContext:_,__rxui_child__:y,onError:g,logger:h}){const{style:v,comAry:b}=t,x=[];return b.forEach(((t,c)=>{const{id:d,def:f}=t;if(m(f)){const s=_(d,e,{inputs:n,outputs:o,_inputs:i,_outputs:a});x.push({id:d,jsx:r().createElement(l,{key:c,com:t,getComDef:m,getContext:_,scope:e,props:s,env:p,template:u,onError:g,logger:h,__rxui_child__:y}),inputs:s.inputsCallable,style:s.style})}else{const e=r().createElement("div",{className:s.Z.error},"组件 (namespace = ",f.namespace,"）未找到.");x.push({id:d,jsx:e})}})),"function"==typeof c?c(x):r().createElement("div",{className:f(v),style:d(v)},x.map((e=>e.jsx)))}function l({com:e,props:t,scope:n,template:c,env:u,getComDef:l,getContext:d,__rxui_child__:f,onError:m,logger:_}){const{id:y,def:g,slots:h={}}=e,{data:v,style:b,inputs:x,outputs:w,_inputs:k,_outputs:E}=t,C=l(g),j=new Proxy(h,{get(e,t){const o=d(y,t),i=`组件(namespace=${g.namespace}）的插槽(id=${t})`;if(!o)throw new Error(`${i} 获取context失败.`);return{render(e){const a=h[t];return a?r().createElement(p,{slotId:t,slot:a,props:o,params:e,style:(null==e?void 0:e.style)||a.style||b,onError:m,logger:_,env:u,scope:n,getComDef:l,getContext:d,__rxui_child__:f}):r().createElement("div",{className:s.Z.error},i," 未找到.")},_inputs:o._inputs,inputs:o.inputs,outputs:o.outputs}}}),I=(0,o.useMemo)((()=>{if(t.frameId&&t.parentComId){const e=d(t.parentComId,t.frameId,null==n?void 0:n.parent);if(e)return{get _inputs(){return new Proxy({},{get:(t,n)=>e._inputRegs[n]})}}}}),[]),F=function({style:e}){const t=[s.Z.com];1===e.flex&&t.push(s.Z.flex);return t.join(" ")}({style:b}),T=function({style:e}){const t={},{width:n,height:o}=e;n?(0,i.hj)(n)?t.width=n+"px":n&&(t.width=n):t.width="100%";(0,i.hj)(o)?t.height=o+"px":o&&(t.height=o);return t}({style:b}),S=function({style:e}){const t={},{width:n,marginTop:o,marginLeft:r,marginRight:s,marginBottom:a}=e;(0,i.hj)(o)&&(t.marginTop=o+"px");(0,i.hj)(r)&&("number"==typeof n||r<0?t.marginLeft=r+"px":t.paddingLeft=r+"px");(0,i.hj)(s)&&("number"==typeof n||s<0?t.marginRight=s+"px":t.paddingRight=s+"px");(0,i.hj)(a)&&(t.marginBottom=a+"px");return t}({style:b}),O={};["fixed","absolute"].includes(b.position)&&(b.top&&(O.top=b.top),b.left&&(O.left=b.left),O.zIndex=1e3);let M=r().createElement(C.runtime,{id:y,env:u,data:v,style:b,inputs:x,outputs:w,_inputs:k,_outputs:E,slots:j,createPortal:e=>{},parentSlot:I,__rxui_child__:f,onError:m,logger:_});return"function"==typeof c&&(M=c({id:y,jsx:M})),M=r().createElement("div",{key:y,style:Object.assign(Object.assign(Object.assign(Object.assign({display:b.display,position:b.position||"relative"},O),T),S),b.ext||{}),className:F},r().createElement(a.Z,{errorTip:`组件 (namespace = ${g.namespace}@${g.version}）渲染错误`},M)),M}const p=(0,o.memo)((({slotId:e,props:t,slot:n,params:o,scope:s,env:a,style:c,getComDef:l,getContext:p,onError:d,logger:f,__rxui_child__:m})=>{let _,y;if(o){_={id:(0,i.Vj)(),frameId:e},s&&(_.parent=s)}else _=s;if(t.run(_),o){const e=o.inputValues;if("object"==typeof e)for(let n in e)t.inputs[n](e[n],_);"function"==typeof o.wrap&&(y=o.wrap)}return r().createElement(u,{scope:_,env:a,slot:Object.assign(Object.assign({},n),{style:c}),wrapper:y,template:null==o?void 0:o.itemWrap,getComDef:l,getContext:p,inputs:null==o?void 0:o.inputs,outputs:null==o?void 0:o.outputs,_inputs:null==o?void 0:o._inputs,_outputs:null==o?void 0:o._outputs,onError:d,logger:f,__rxui_child__:m})}),((e,t)=>{var n,o;return(null===(n=e.params)||void 0===n?void 0:n.key)===(null===(o=null==t?void 0:t.params)||void 0===o?void 0:o.key)}));function d(e){const{paddingLeft:t,paddingTop:n,paddingRight:o,paddingBottom:r,background:i}=e,s=(c(e,["paddingLeft","paddingTop","paddingRight","paddingBottom","background"]),{paddingLeft:t||0,paddingTop:n||0,paddingRight:o||0,paddingBottom:r||0});if(i){const{background:e,backgroundImage:t,backgroundColor:n,backgroundRepeat:o,backgroundSize:r}=i;s.backgroundRepeat=o,s.backgroundSize=r,e?s.background=e:(s.backgroundImage=t,s.backgroundColor=n)}return s}function f(e){var t,n;const o=[s.Z.slot],r=e;if(r){"flex-column"==(null===(t=r.layout)||void 0===t?void 0:t.toLowerCase())?o.push(s.Z.lyFlexColumn):"flex-row"==(null===(n=r.layout)||void 0===n?void 0:n.toLowerCase())&&o.push(s.Z.lyFlexRow);const e=r.justifyContent;e&&("FLEX-START"===e.toUpperCase()?o.push(s.Z.justifyContentFlexStart):"CENTER"===e.toUpperCase()?o.push(s.Z.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?o.push(s.Z.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?o.push(s.Z.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&o.push(s.Z.justifyContentFlexSpaceBetween));const i=r.alignItems;i&&("FLEX-START"===i.toUpperCase()?o.push(s.Z.alignItemsFlexStart):"CENTER"===i.toUpperCase()?o.push(s.Z.alignItemsFlexCenter):"FLEX-END"===i.toUpperCase()&&o.push(s.Z.alignItemsFlexFlexEnd))}return o.join(" ")}},218:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(477);function r(e,{observable:t}){const{json:n,getComDef:r,env:i,ref:s,onError:a,logger:c}=e,{slot:u,coms:l,comsAutoRun:p,cons:d,pinRels:f,pinProxies:m}=n,_=i,y={},g={},h={},v={};function b(e,t,n,o,r){if(e){function i(e,n){var r;const i=m[e.comId+"-"+e.pinId];if(i&&"frame"===i.type){const o=x(e.comId,n);let r;return r={id:e.comId,frameId:i.frameId,parent:n,proxyComProps:o},void j(i,t,r)}if("com"===e.type)o?o.finishPinParentKey===e.startPinParentKey&&w(e,t,n):w(e,t,n);else{if("frame"!==e.type)throw new Error("尚未实现");if(o&&o.finishPinParentKey!==e.startPinParentKey)return;if(e.comId){if("inner-input"===e.direction){const n=g[e.comId+"-"+e.frameId+"-"+e.pinId];n&&n(t)}else if("inner-output"===e.direction&&"joint"===e.pinType){b(d[e.comId+"-"+e.frameId+"-"+e.pinId],t)}}else{const o=null==n?void 0:n.proxyComProps;if(o){const r=o.outputs[e.pinId];if(r)return void r(t,n.parent)}null===(r=v[e.pinId])||void 0===r||r.call(v,t)}}}e.forEach((e=>{let t=n;if(r){const n=e.frameKey;if(!n)throw new Error("数据异常，请检查toJSON结果.");const o=n.split("-");if(o.length>=2){const n=E(o[0],o[1]);n.curScope?(n.curScope!==t&&(t=n.curScope),i(e,t)):n.pushTodo((n=>{n!==t&&(t=n),i(e,t)}))}}else i(e,t)}))}}function x(n,s){const u=l[n],p=n+(u.frameId||"_rootFrame_");let m,_=y[p];_||(_=y[p]={});let g=s;for(;g;){const e=g.id+"-"+n;if(g.frameId===u.frameId){m=g.id;const t=_[e];if(t)return t;break}g=g.parent}const h=(m?m+"-":"")+n,v=_[h];if(v)return v;const x=u.def,k=u.model;let E=e?JSON.parse(JSON.stringify(k)):k;const C=t(E),j={},I={},F={},T={},S=function(e){return new Proxy({},{ownKeys:e=>u.inputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(t,n)=>function(t){const o=null==e?void 0:e.inputs;if(o){const e=o[n];"function"==typeof e&&e(t)}j[n]=t;const r=I[n];r&&(r.forEach((({val:e,fromCon:n,fromScope:o})=>{t(e,new Proxy({},{get:(e,t)=>function(e){const r=M()[t];if("function"!=typeof r)throw new Error(`outputs.${t} not found`);r(e,o||g,n)}}))})),I[n]=void 0)}})},O=new Proxy({},{get:(e,t)=>function(e){const o=f[n+"-"+t];if(o){const r={},i={};return o.forEach((e=>{r[e]=t=>{i[e]=t}})),Promise.resolve().then((()=>{w({comId:n,def:x,pinId:t},e,s,i)})),r}w({comId:n,def:x,pinId:t},e,s)}}),M=function(e){return new Proxy({},{ownKeys:e=>u.outputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(t,a,c)=>function(t,c,l){const p="boolean"==typeof c&&c,f=arguments,m=null==e?void 0:e.outputs;if(m){const e=m[a];"function"==typeof e&&e(t)}let _;c&&"object"==typeof c&&(_=c);const y=r(x);(0,o.J2)(u.title,y,a,t);const g=k.outputEvents;if(g){const e=g[a];if(e&&Array.isArray(e)){const t=e.find((e=>e.active));if(t){if("none"===t.type)return;if("defined"!==t.type){if(Array.isArray(null==i?void 0:i.events)){const e=i.events.find((e=>{if(e.type===t.type)return e}));e&&"function"==typeof e.exe&&e.exe({options:t.options})}return}}}}const h=d[n+"-"+a];f.length>=3?b(h,t,_,l):b(h,t,_||s,l,p)}})},P=new Proxy({},{get:(e,t,n)=>function(e){F[t]=e;const n=T[t];n&&(n.forEach((t=>{e(t)})),T[t]=void 0)}}),Z=new Proxy({},{get:(e,t,r)=>function(e){const r=d[n+"-"+t];r&&((0,o.J2)(u.title,x,t,e),r.forEach((t=>{if("com"!==t.type)throw new Error("尚未实现");w(t,e,s)})))}}),R={title:u.title,frameId:u.frameId,parentComId:u.parentComId,data:C.data,style:C.style,_inputRegs:j,addInputTodo:(e,t,n,o)=>{let r=I[e];r||(I[e]=r=[]),r.push({val:t,fromCon:n,fromScope:o})},inputs:S(),inputsCallable:O,outputs:M(),_inputs:P,_outputs:Z,clone(e){const t={inputs:S(e),outputs:M(e)};return Object.setPrototypeOf(t,this),t},logger:c,onError:a};return _[h]=R,R}function w(e,t,n,i){var s;const{comId:u,def:p,pinId:d,pinType:f}=e;if("ext"===f){const e=y[u]||x(u,n);if("show"===d)e.style.display="";else if("hide"===d)e.style.display="none";else if("showOrHide"===d){const t=e.style;"none"===t.display?t.display="":t.display="none"}}else if("config"===f){const i=x(u,n),s=r(p);(0,o.Wg)(i.title,s,d,t);const{extBinding:a}=e,c=a.split(".");let l=i;c.forEach(((e,n)=>{n!==c.length-1?l=l[e]:l[e]=t}))}else if(null===(s=p.rtType)||void 0===s?void 0:s.match(/^js/gi)){if(l[u]){const i=x(u,n),s=r(p);(0,o.Wg)(i.title,s,d,t);const l=(n?n.id+"-":"")+u;h[l]||(h[l]=!0,s.runtime({env:_,data:i.data,inputs:i.inputs,outputs:i.outputs,logger:c,onError:a})),i._inputRegs[d](t,new Proxy({},{get:(t,o)=>function(t){i.outputs[o](t,n,e)}}))}}else{const s=x(u,n),a=r(p);(0,o.Wg)(s.title,a,d,t);const c=s._inputRegs[d];if("function"==typeof c){let o;o=i||new Proxy({},{get:(t,o)=>function(t){s.outputs[o](t,n,e)}}),c(t,o)}else s.addInputTodo(d,t,e,n)}}function k(e,t){if(e.comAry)return e.comAry.find((e=>{if(e.id===t)return e;if(e.slots)for(let n in e.slots){const o=k(e.slots[n],t);if(o)return o}}))}function E(e,t,n){const o=e+"-"+t;let r=y[o];if(!r){const i=k(u,e).slots[t],s={},a={scope:n,todo:void 0},c=new Proxy({},{get:(e,t)=>function(e){s[t]=e}}),l=new Proxy({},{get:(n,o)=>function(n,r){const i=d[e+"-"+t+"-"+o];i&&i.forEach((e=>{"com"===e.type&&w(e,n,r||a.scope)}))}}),p=new Proxy({},{get:(e,t,n)=>function(e){g[o+"-"+t]=e}});let f;r=y[o]={type:null==i?void 0:i.type,run(n){a.scope=n,f||(f=!0,C({comId:e,frameId:t,scope:n})),Array.isArray(a.todo)&&(a.todo.forEach((e=>{e(n)})),a.todo=void 0)},_inputs:c,_inputRegs:s,inputs:l,outputs:p,get curScope(){return a.scope},pushTodo(e){a.todo||(a.todo=[]),a.todo.push(e)}}}return r}function C(e){const{comId:t,frameId:n,scope:i}=e,s=p[t?`${t}-${n}`:`${n}`];s&&s.forEach((e=>{const{id:t,def:n}=e;if(l[t]){const e=x(t,i),s=r(n);(0,o.cM)(`${s.namespace} 开始执行`),s.runtime({env:_,data:e.data,inputs:e.inputs,outputs:e.outputs,logger:c,onError:a})}}))}function j(e,t,n){const{frameId:o,comId:r,pinId:i}=e,s=d[(r?`${r}-${o}`:`${o}`)+"-"+i];s&&b(s,t,n)}return"function"==typeof s&&s({run(){C({frameId:"_rootFrame_"})},inputs:new Proxy({},{get:(e,t)=>function(e){j({frameId:"_rootFrame_",pinId:t},e)}}),outputs(e,t){v[e]=t}}),{get(e,t,n,o){let r,i,s;for(let e=0;e<arguments.length;e++){const t=arguments[e];e>0&&"string"==typeof t&&(r=t),"object"==typeof t&&(t.inputs||t.outputs||t._inputs||t._outputs?s=t:(t.id||t.parent)&&(i=t))}if(r)return E(e,r,i);{const t=x(e,i);return s?t.clone(s):t}}}}},477:(e,t,n)=>{n.d(t,{J2:()=>u,JE:()=>r,Wg:()=>c,cM:()=>a});let o=!1;function r(){o=!0}const i="__IOEventList__",s=(...e)=>{window[i]||(window[i]=[]),window[i].push(e[0]),console.log(...e)};function a(e){console.log(`%c[Mybricks]%c ${e}\n`,"color:#FFF;background:#fa6400","","")}function c(e,t,n,r){if(o)return;let i;try{i=JSON.stringify(r)}catch(e){i=r}s(`%c[Mybricks] 输入项 %c ${e||t.title||t.namespace} | ${n} -> ${i}`,"color:#FFF;background:#000","","")}function u(e,t,n,r){if(o)return;let i;try{i=JSON.stringify(r)}catch(e){i=r}s(`%c[Mybricks] 输出项 %c ${e||t.title||t.namespace} | ${n} -> ${i}`,"color:#FFF;background:#fa6400","","")}},131:(e,t,n)=>{n.d(t,{ep:()=>o.e,in:()=>s,kU:()=>i,st:()=>r.s});var o=n(180),r=n(872);const i=new WeakMap,s=new WeakMap},872:(e,t,n)=>{n.d(t,{s:()=>r});var o=n(131);const r=new class{constructor(){this.reactionStack=[]}regist(e){let t=this.getCurrentReaction();t&&o.ep.registReaction(t,e)}autoRun(e,t){const{reactionStack:n}=this;if(-1===n.indexOf(e))try{return n.push(e),t()}finally{n.pop()}}getCurrentReaction(){const{reactionStack:e}=this;return e[e.length-1]}}},180:(e,t,n)=>{n.d(t,{e:()=>s});var o=n(679),r=n(131);function i(e){e()}const s=new class{constructor(){this.taskMap=new WeakMap,this.reactionToTaskMap=new WeakMap}addTask(e){this.taskMap.set(e,new Map)}deleteTask(e){var t;if(!(0,o.Kn)(e))return;const n=r.kU.get(e);r.kU.delete(e),r.in.delete(n);const i=this.taskMap.get(n);this.taskMap.delete(n);for(let e of i.keys()){this.deleteTask(r.in.get(n[e]));const o=i.get(e);null===(t=null==o?void 0:o.forEach)||void 0===t||t.call(o,(e=>{this.deleteReaction(e)}))}}deleteReaction(e){let t=this.reactionToTaskMap.get(e);t&&(this.reactionToTaskMap.delete(e),t.forEach((t=>{t.forEach((t=>{t.delete(e)}))})))}registReaction(e,{target:t,key:n}){const o=this.taskMap.get(t);if(o){let t=o.get(n);t||(t=new Set,o.set(n,t)),t.has(e)||t.add(e);let r=this.reactionToTaskMap.get(e);r||(r=new Set,this.reactionToTaskMap.set(e,r)),r.has(o)||r.add(o)}}getReactions({target:e,key:t}){const n=this.taskMap.get(e);if(!n)return[];return n.get(t)||[]}runTask(e){const t=this.getReactions(e);t.size&&t.forEach(i)}}},819:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(443),r=n(679),i=n(131);const s={get:function(e,t){const n=e[t];if(["$$typeof","constructor"].includes(t))return n;i.st.regist({target:e,key:t});const s=i.in.get(n);return(0,r.Kn)(n)?s||(0,o.L)(n):s||n},set:function(e,t,n){(0,r.Kn)(n)&&(n=i.kU.get(n)||n);const o=Object.hasOwnProperty.call(e,t),s=e[t];e[t]=n;let a=!1;switch(!0){case!o||Array.isArray(e)&&"length"===t:case n!==s:a=!0}return a&&(i.ep.runTask({target:e,key:t}),i.ep.deleteTask(i.in.get(s))),!0}}},443:(e,t,n)=>{n.d(t,{L:()=>p,O:()=>l});var o=n(359),r=n.n(o),i=n(131),s=n(679),a=n(819);const c="__render-web-createElement__";let u;function l(){window[c]||(window[c]=!0,u=r().createElement,r().createElement=function(...e){let[t,n,...s]=e;if("function"!=typeof t||!t.prototype||t.prototype instanceof r().Component||t.prototype.isReactComponent||!n)return u(t,n,...s);{let a=n.__rxui_child__||t.__rxui__;if(a||(a=!!Object.keys(n).find((e=>{const t=n[e];return i.kU.has(t)}))),a){if(!t.__rxui__){function c(e){var n;const r=(0,o.useRef)(null),[,i]=(0,o.useState)([]),s=(0,o.useCallback)((()=>{i([])}),[]);let a;return(0,o.useMemo)((()=>{r.current||(r.current=new d(s))}),[]),(0,o.useEffect)((()=>()=>{var e;null===(e=r.current)||void 0===e||e.destroy(),r.current=null}),[]),null===(n=r.current)||void 0===n||n.track((()=>{a=t(e)})),a}t.__rxui__=c}return u(t.__rxui__,n,...s)}return u(t,n,...s)}})}function p(e){return(0,s.Kn)(e)?i.kU.has(e)?e:i.in.get(e)||function(e){const t=a.Z,n=new Proxy(e,t);return i.in.set(e,n),i.kU.set(n,e),i.ep.addTask(e),n}(e):{}}class d{constructor(e){this.update=e}track(e){i.st.autoRun(this.update,e)}destroy(){i.ep.deleteReaction(this.update)}}},679:(e,t,n)=>{function o(e){return e&&"object"==typeof e}function r(e){return"number"==typeof e&&!isNaN(e)}function i(e,t){const n=e.split("."),o=t.split("."),r=n.length,i=o.length,s=Math.min(r,i);let a=0;for(;a<s;a++){let e=parseInt(n[a]),t=parseInt(o[a]);if(e>t)return 1;if(e<t)return-1}if(r>i){for(let e=a;e<r;e++)if(0!=parseInt(n[e]))return 1;return 0}if(r<i){for(let e=a;e<i;e++)if(0!=parseInt(o[e]))return-1;return 0}return 0}function s(e=5,t=8){const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(let r=0;r<e;r++)o[r]=n[0|Math.random()*t];else{let e;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(let t=0;t<36;t++)o[t]||(e=0|16*Math.random(),o[t]=n[19==t?3&e|8:e])}return o.join("")}n.d(t,{Kn:()=>o,Vj:()=>s,hj:()=>r,yC:()=>i})},359:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__359__},628:e=>{e.exports=JSON.parse('{"title":"连接器","namespace":"mybricks.core-comlib.connector","author":"MyBricks","author_name":"MyBricks","version":"1.0.0","description":"连接器","runtime":"./runtime.ts","editors":"./editors.tsx","icon":"./icon.svg","rtType":"js-autorun","inputs":[{"id":"call","rels":["then","catch"],"title":"调用","schema":{"type":"object"}}],"outputs":[{"id":"then","title":"结果","schema":{"type":"unknown"}},{"id":"catch","title":"发生错误","schema":{"type":"string"}}]}')},164:e=>{e.exports=JSON.parse('{"title":"类型转换","namespace":"mybricks.core-comlib.type-change","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"类型转换","icon":"./icon.png","runtime":"./rt.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"from","title":"从","schema":{"type":"follow"},"rels":["to"]}],"outputs":[{"id":"to","title":"到","schema":{"type":"follow"},"conMax":1,"editable":true}]}')},282:e=>{e.exports=JSON.parse('{"visibility":false,"title":"变量","namespace":"mybricks.core-comlib.var","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"变量","icon":"./icon.png","runtime":"./Var.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"get","title":"读取","schema":{"type":"any"},"rels":["return"]},{"id":"set","title":"赋值","schema":{"type":"follow"}}],"outputs":[{"id":"return","title":"完成","schema":{"type":"unknown"}},{"id":"changed","title":"当值发生变化","schema":{"type":"unknown"}}]}')},412:e=>{e.exports=JSON.parse('{"title":"Fn计算","namespace":"mybricks.core-comlib.fn","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"Fn计算","icon":"./icon.png","runtime":"./Fn.tsx","rtType":"js","visibility":false}')},147:e=>{e.exports=JSON.parse('{"u2":"@mybricks/render-web","i8":"1.1.0"}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__={};return(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{render:()=>r});var e=__webpack_require__(359),t=__webpack_require__.n(e),n=__webpack_require__(294),o=__webpack_require__(147);function r(e,o={}){return t().createElement(n.Z,{json:e,opts:o})}console.log(`%c ${o.u2} %c@${o.i8}`,"color:#FFF;background:#fa6400","","")})(),__webpack_exports__})()));