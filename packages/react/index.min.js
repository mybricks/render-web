!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports._mybricks_render_web=t(require("react"),require("react-dom")):e._mybricks_render_web=t(e.React,e.ReactDOM)}(this,((__WEBPACK_EXTERNAL_MODULE__359__,__WEBPACK_EXTERNAL_MODULE__318__)=>(()=>{var __webpack_modules__={21:function(module,__unused_webpack_exports,__webpack_require__){var React=__webpack_require__(359),t;t=__WEBPACK_EXTERNAL_MODULE__359__=>(()=>{"use strict";var __webpack_modules__={356:(__unused_webpack_module,__nested_webpack_exports__,__nested_webpack_require_370__)=>{function __WEBPACK_DEFAULT_EXPORT__({data,outputs,inputs,onError}){inputs.from(((val,relOutpus)=>{var _a;const script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){let fn,returnVal,isOk;try{eval(`fn = ${script}`),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError(`数据转换错误:${e.message}`,e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__nested_webpack_require_370__.d(__nested_webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__})},359:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__359__}},__webpack_module_cache__={};function __nested_webpack_require_927__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__nested_webpack_require_927__),o.exports}__nested_webpack_require_927__.d=(e,t)=>{for(var o in t)__nested_webpack_require_927__.o(t,o)&&!__nested_webpack_require_927__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__nested_webpack_require_927__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__nested_webpack_require_927__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};return(()=>{__nested_webpack_require_927__.r(__nested_webpack_exports__),__nested_webpack_require_927__.d(__nested_webpack_exports__,{default:()=>f,getCom:()=>m});const e=JSON.parse('{"title":"Fn计算","namespace":"mybricks.core-comlib.fn","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"Fn计算","icon":"./icon.png","runtime":"./Fn.tsx","rtType":"js","visibility":false}'),t=JSON.parse('{"visibility":false,"title":"变量","namespace":"mybricks.core-comlib.var","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"变量","icon":"./icon.png","data":"./data.json","runtime":"./Var.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"get","title":"读取","schema":{"type":"any"},"rels":["return"]},{"id":"set","title":"赋值","schema":{"type":"follow"},"rels":["return"]},{"id":"reset","title":"重置","schema":{"type":"any"}}],"outputs":[{"id":"return","title":"完成","schema":{"type":"unknown"}},{"id":"changed","title":"当值发生变化","schema":{"type":"unknown"}}]}');function o(e){if(e&&"object"==typeof e)try{return e instanceof FormData?e:JSON.parse(JSON.stringify(e))}catch(t){return e}return e}const n=JSON.parse('{"title":"类型转换","visibility":false,"namespace":"mybricks.core-comlib.type-change","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"类型转换","icon":"./icon.png","runtime":"./rt.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"from","title":"从","schema":{"type":"follow"},"rels":["to"]}],"outputs":[{"id":"to","title":"到","schema":{"type":"follow"},"conMax":1,"editable":true}]}');var i=__nested_webpack_require_927__(356);const s=JSON.parse('{"deprecated":true,"visibility":false,"title":"连接器","namespace":"mybricks.core-comlib.connector","author":"MyBricks","author_name":"MyBricks","version":"1.0.0","description":"连接器","runtime":"./runtime.ts","editors":"./editors.tsx","icon":"./icon.svg","rtType":"js-autorun","inputs":[{"id":"call","rels":["then","catch"],"title":"调用","schema":{"type":"object"}}],"outputs":[{"id":"then","title":"结果","schema":{"type":"unknown"}},{"id":"catch","title":"发生错误","schema":{"type":"string"}}]}');function r({env:e,data:t,outputs:o,onError:n},i={}){if(t.connector)try{e.callConnector(t.connector,i,t.connectorConfig).then((e=>{o.then(e)})).catch((e=>{o.catch(e)}))}catch(e){console.error(e),o.catch(`执行错误 ${e.message||e}`)}else o.catch("没有选择接口")}const l=JSON.parse('{"visibility":false,"title":"作用域输入","namespace":"mybricks.core-comlib.frame-input","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"作用域输入","rtType":"js","runtime":"./runtime.ts","editors":"./editor.tsx","inputs":[{"id":"getCurValue","title":"获取","schema":{"type":"any"},"rels":["return"]}],"outputs":[{"id":"return","title":"结果","schema":{"type":"follow"}}]}'),c=JSON.parse('{"visibility":false,"title":"打开对话框","namespace":"mybricks.core-comlib.scenes","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"切换场景","icon":"./icon.png","runtime":"./runtime.ts","data":"./data.json","rtType":"js","inputs":[{"id":"open","title":"打开","schema":{"type":"any"}}]}'),a=JSON.parse('{"title":"模块","namespace":"mybricks.core-comlib.module","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"模块","icon":"./icon.png","data":"./data.json","runtime":"./runtime.tsx","editors":"./editors.ts"}');var d=__nested_webpack_require_927__(359);const p=JSON.parse('{"title":"组","namespace":"mybricks.core-comlib.group","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"组","runtime":"./runtime.tsx","editors":"./editors.ts","slots":[{"title":"内容","id":"content","layout":"smart"}]}'),u={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[g({comDef:e,rt:function({inputs:e,outputs:t}){}}),g({comDef:t,rt:function({env:e,data:t,outputs:n,inputs:i,_notifyBindings:s}){i.get(((e,n)=>{const i=o(void 0!==t.val?t.val:t.initValue);n.return(i)})),i.set(((e,i)=>{t.val=e;const r=o(e);n.changed(r,!0),s(r),i.return(r)})),i.reset((()=>{const e=t.initValue;t.val=e;const i=o(e);n.changed(i,!0),s(i)}))}}),g({comDef:n,rt:i.Z}),g({comDef:s,rt:function({env:e,data:t,inputs:o,outputs:n,onError:i}){e.runtime&&(t.immediate?r({env:e,data:t,outputs:n}):o.call((o=>{r({env:e,data:t,outputs:n,onError:i},o)})))}}),g({comDef:l,rt:function({env:e,inputs:t}){e.runtime&&t.getCurValue(((e,t)=>{t.return(e)}))}}),g({comDef:c,rt:function({env:e,data:t,inputs:o,_inputs:n,_inputsCallable:i}){o.open((o=>{e.canvas.open(t._sceneId,o,"popup"===t._sceneShowType?null:t.openType),i._open(o)}))}}),g({comDef:a,rt:function({env:e,data:t,inputs:o,outputs:n}){const[i,s]=(0,d.useState)(),r=(0,d.useMemo)((()=>{const i=e.getModuleJSON(t.definedId);return e.renderModule(i,{ref(r){if(s(r),e.runtime){const{inputs:e,outputs:s}=i,l=t.configs;for(let e in l)r.inputs[e](l[e]);e.forEach((({id:e})=>{o[e]((t=>{r.inputs[e](t)}))})),s.forEach((({id:e})=>{r.outputs(e,n[e])}))}r.run()},disableAutoRun:!0})}),[]);return(0,d.useMemo)((()=>{if(i&&e.edit){const e=t.configs;for(let t in e)i.inputs[t](e[t])}}),[t.configs,i]),r}}),g({comDef:p,rt:function({slots:e}){return React.createElement("div",{style:{width:"100%",height:"100%",overflow:"visible"}},e.content.render())}})]},f=u;function m(e){return u.comAray.find((t=>t.namespace===e))}function g({comDef:e,rt:t,data:o}){return Object.assign(e,{runtime:t,data:o})}})(),__nested_webpack_exports__})(),module.exports=t(__webpack_require__(359))},998:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var n=o(601),i=o.n(n),s=o(609),r=o.n(s)()(i());r.push([e.id,".error-c0f46 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n  white-space: pre-wrap;\n}\n",""]),r.locals={error:"error-c0f46"};const l=r},942:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var n=o(601),i=o.n(n),s=o(609),r=o.n(s)()(i());r.push([e.id,"@keyframes slipInto-fb013 {\n  0% {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n.main-a6e42 {\n  animation: slipInto-fb013 0.1s ease-in-out 1;\n}\n",""]),r.locals={main:"main-a6e42",slipInto:"slipInto-fb013"};const l=r},432:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var n=o(601),i=o.n(n),s=o(609),r=o.n(s)()(i());r.push([e.id,".container-ff9f5 {\n  position: fixed;\n  right: 20px;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  z-index: 9999;\n}\n.container-ff9f5 .itemWrap-a3069 {\n  position: relative;\n}\n.container-ff9f5 .item-c8a43 {\n  padding: 16px;\n  background-color: #fff;\n  margin-bottom: 8px;\n  border-radius: 4px;\n  max-width: 50vw;\n  max-height: 50vh;\n  overflow: auto;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05);\n  font-size: 12px;\n}\n.container-ff9f5 .errorItem-e6fc8 {\n  color: #f5222d;\n}\n.container-ff9f5 .closeIcon-c5e91 {\n  position: absolute;\n  right: 16px;\n  top: 16px;\n  width: 24px;\n  height: 24px;\n  padding: 2px;\n  cursor: pointer;\n}\n.container-ff9f5 .closeIcon-c5e91:hover {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.12);\n}\n",""]),r.locals={container:"container-ff9f5",itemWrap:"itemWrap-a3069",item:"item-c8a43",errorItem:"errorItem-e6fc8",closeIcon:"closeIcon-c5e91"};const l=r},644:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var n=o(601),i=o.n(n),s=o(609),r=o.n(s)()(i());r.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.slot-ced90 {\n  width: 100%;\n  height: 100% !important;\n  position: relative;\n}\n.lyFlexColumn-f7fd6 {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-c8e04 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-b95f6 {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-e1ca1 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-ef832 {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-ad880 {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-a2f09 {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-a8880 {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-c6d62 {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-d7b4c {\n  align-items: flex-end;\n}\n.debugFocus-def53 {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-f9041 {\n  flex-shrink: 0;\n}\n.flex-ca980 {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-ca980 > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-ca980 > * {\n  height: 100%;\n}\n.error-d4d00 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-e9378 {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-e9378 .tt-d634d {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-e9378 .info-d57d6 {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),r.locals={slot:"slot-ced90",lyFlexColumn:"lyFlexColumn-f7fd6",lyFlexRow:"lyFlexRow-c8e04",justifyContentFlexStart:"justifyContentFlexStart-b95f6",justifyContentFlexCenter:"justifyContentFlexCenter-e1ca1",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-ef832",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-ad880",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-a2f09",alignItemsFlexStart:"alignItemsFlexStart-a8880",alignItemsFlexCenter:"alignItemsFlexCenter-c6d62",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-d7b4c",debugFocus:"debugFocus-def53",com:"com-f9041",flex:"flex-ca980",error:"error-d4d00",errorRT:"errorRT-e9378",tt:"tt-d634d",info:"info-d57d6"};const l=r},621:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var n=o(601),i=o.n(n),s=o(609),r=o.n(s)()(i());r.push([e.id,".debugger-fed31 {\n  width: 100%;\n  height: 100%;\n  background-color: #1b1b1b73;\n}\n.debugger-fed31 .titlebar-f7fe6 {\n  font-size: 12px;\n  line-height: 23px;\n  position: absolute;\n  top: 10%;\n  height: 23px;\n  padding: 0px 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  align-items: center;\n  background-color: #faf8df;\n}\n.debugger-fed31 .titlebar-f7fe6 .resume-ebcb6 {\n  display: flex;\n  padding-left: 4px;\n  cursor: pointer;\n}\n.debugger-fed31 .titlebar-f7fe6 .resume-ebcb6 svg path {\n  fill: #FA6400;\n}\n",""]),r.locals={debugger:"debugger-fed31",titlebar:"titlebar-f7fe6",resume:"resume-ebcb6"};const l=r},609:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",n=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),n&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),n&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,n,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(n)for(var l=0;l<this.length;l++){var c=this[l][0];null!=c&&(r[c]=!0)}for(var a=0;a<e.length;a++){var d=[].concat(e[a]);n&&r[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),o&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=o):d[2]=o),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},490:(e,t,o)=>{"use strict";o.d(t,{Z:()=>v});var n=o(62),i=o.n(n),s=o(36),r=o.n(s),l=o(892),c=o.n(l),a=o(173),d=o.n(a),p=o(464),u=o.n(p),f=o(998),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var g,h=0,y={};y.styleTagTransform=u(),y.setAttributes=c(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=r(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},h++||(g=i()(f.Z,y)),m},m.unuse=function(){h>0&&! --h&&(g(),g=null)};const v=m},650:(e,t,o)=>{"use strict";o.d(t,{Z:()=>v});var n=o(62),i=o.n(n),s=o(36),r=o.n(s),l=o(892),c=o.n(l),a=o(173),d=o.n(a),p=o(464),u=o.n(p),f=o(942),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var g,h=0,y={};y.styleTagTransform=u(),y.setAttributes=c(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=r(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},h++||(g=i()(f.Z,y)),m},m.unuse=function(){h>0&&! --h&&(g(),g=null)};const v=m},759:(e,t,o)=>{"use strict";o.d(t,{Z:()=>v});var n=o(62),i=o.n(n),s=o(36),r=o.n(s),l=o(892),c=o.n(l),a=o(173),d=o.n(a),p=o(464),u=o.n(p),f=o(432),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var g,h=0,y={};y.styleTagTransform=u(),y.setAttributes=c(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=r(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},h++||(g=i()(f.Z,y)),m},m.unuse=function(){h>0&&! --h&&(g(),g=null)};const v=m},232:(e,t,o)=>{"use strict";o.d(t,{Z:()=>v});var n=o(62),i=o.n(n),s=o(36),r=o.n(s),l=o(892),c=o.n(l),a=o(173),d=o.n(a),p=o(464),u=o.n(p),f=o(644),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var g,h=0,y={};y.styleTagTransform=u(),y.setAttributes=c(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=r(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},h++||(g=i()(f.Z,y)),m},m.unuse=function(){h>0&&! --h&&(g(),g=null)};const v=m},423:(e,t,o)=>{"use strict";o.d(t,{Z:()=>v});var n=o(62),i=o.n(n),s=o(36),r=o.n(s),l=o(892),c=o.n(l),a=o(173),d=o.n(a),p=o(464),u=o.n(p),f=o(621),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var g,h=0,y={};y.styleTagTransform=u(),y.setAttributes=c(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=r(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},h++||(g=i()(f.Z,y)),m},m.unuse=function(){h>0&&! --h&&(g(),g=null)};const v=m},62:e=>{"use strict";var t=[];function o(e){for(var o=-1,n=0;n<t.length;n++)if(t[n].identifier===e){o=n;break}return o}function n(e,n){for(var s={},r=[],l=0;l<e.length;l++){var c=e[l],a=n.base?c[0]+n.base:c[0],d=s[a]||0,p="".concat(a," ").concat(d);s[a]=d+1;var u=o(p),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(f);else{var m=i(f,n);n.byIndex=l,t.splice(l,0,{identifier:p,updater:m,references:1})}r.push(p)}return r}function i(e,t){var o=t.domAPI(t);o.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,i){var s=n(e=e||[],i=i||{});return function(e){e=e||[];for(var r=0;r<s.length;r++){var l=o(s[r]);t[l].references--}for(var c=n(e,i),a=0;a<s.length;a++){var d=o(s[a]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=c}}},173:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},892:(e,t,o)=>{"use strict";e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},36:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var n="";o.supports&&(n+="@supports (".concat(o.supports,") {")),o.media&&(n+="@media ".concat(o.media," {"));var i=void 0!==o.layer;i&&(n+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),n+=o.css,i&&(n+="}"),o.media&&(n+="}"),o.supports&&(n+="}");var s=o.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},464:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},901:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var n=o(358),i=o(599),s=function(e,t,o,n){return new(o||(o=Promise))((function(i,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function l(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};const r="_rootFrame_";function l(e,{observable:t}){const{json:o,getComDef:l,env:c,ref:a,onError:d,logger:p,debug:u,debugLogger:f,_isNestedRender:m,_context:g}=e,h=e.scenesOperate||c.scenesOperate,{slot:y,coms:v={},comsAutoRun:b={},cons:x=[],pinRels:_={},pinProxies:I={},pinValueProxies:E={},type:w}=o,j=c,C={},S={},k={},O={},P={};Object.keys(x).forEach((e=>{const t=x[e],{startPinParentKey:o}=t[0];o&&(P[o]=e)}));const A={},T={},R={},$={},D={},M={};function L(e,t,s){if(!m)if("com"===e){const{com:e,pinHostId:r,val:l,fromCon:c,notifyAll:a,comDef:d,conId:p}=t;f?f("com","output",{id:e.id,pinHostId:r,val:(0,i.Am)(l),fromCon:c,notifyAll:a,comDef:d,sceneId:o.id,conId:p},s):(0,n.J2)(e.title,d,r,l)}else if("frame"===e){const{comId:e,frameId:n,pinHostId:r,val:l,sceneId:c,conId:a}=t;f&&f("frame","output",{comId:e,frameId:n,pinHostId:r,val:(0,i.Am)(l),sceneId:c||o.id,conId:a},s)}}function F(e,t){if(m)return;const{com:s,pinHostId:r,val:l,frameKey:c,finishPinParentKey:a,comDef:d,conId:p}=e;p&&(f?f("com","input",{id:s.id,pinHostId:r,val:(0,i.Am)(l),frameKey:c,finishPinParentKey:a,comDef:d,sceneId:o.id,conId:p},t):(0,n.Wg)(s.title,d,r,l))}function N(e,t,o,n){var s,r,l;const c=I[e.comId+"-"+e.pinId];let a=e;if(c){const r="mybricks.core-comlib.frame-output"===(null===(s=a.def)||void 0===s?void 0:s.namespace);if(r)a=Object.assign(Object.assign({},e),{type:c.type,frameId:c.frameId,pinId:c.pinId,direction:"inner-input",comId:(e.targetFrameKey||e.frameKey).split("-")[0]});else{if(R[`${c.frameId}-${c.pinId}`]=o,n&&n.finishPinParentKey!==a.startPinParentKey)return;if("frame"===c.type){const e=J(a.comId,t);let n;n={id:(0,i.Vj)(10,16),frameId:c.frameId,parent:t,proxyComProps:e};if("mybricks.core-comlib.fn"===a.def.namespace){const{configs:t}=e.data;t&&Object.entries(t).forEach((([e,t])=>{const{frameId:o,comId:i,pinId:s}=c,r=x[(i?`${i}-${o}`:`${o}`)+"-"+e];r&&Z({logProps:null,cons:r,val:t,curScope:n})}))}return z({options:c,value:o,scope:n,comProps:e}),void(r||H({frameId:c.frameId,scope:n}))}}}if("com"===a.type)n?n.finishPinParentKey===a.startPinParentKey&&q(a,o,t):q(a,o,t);else{if("frame"!==a.type)throw new Error("尚未实现");if(n&&n.finishPinParentKey!==a.startPinParentKey)return;if(a.comId){if("inner-input"===a.direction){const e=S[a.frameKey+"-"+a.pinId]||S[a.comId+"-"+a.frameId+"-"+((null===(r=null==t?void 0:t.parent)||void 0===r?void 0:r.id)?t.parent.id+"-":"")+a.pinId];e&&e(o)}else if("inner-output"===a.direction&&"joint"===a.pinType){const e=x[a.comId+"-"+a.frameId+"-"+a.pinId];e&&Z({logProps:null,cons:e,val:o})}}else{const e=null==t?void 0:t.proxyComProps;if(e){const n=e.outputs[a.pinId];if(n)return void n(o,t.parent)}null===(l=O[a.pinId])||void 0===l||l.call(O,o)}}}function Z({logProps:e,cons:t,val:o,curScope:n,fromCon:i,notifyAll:l,fromCom:c,isAutoRun:a}){u&&"module"!==w&&t.sort(((e,t)=>e.isBreakpoint&&!t.isBreakpoint?-1:!e.isBreakpoint&&t.isBreakpoint?1:0)),t.forEach((t=>s(this,void 0,void 0,(function*(){var s,d;const{comId:p,pinId:f,pinType:m,timerPinInputId:h,frameKey:y}=t,b=v[p];if(!(i&&i.finishPinParentKey!==t.startPinParentKey||u&&t.isIgnored)){if(u&&"module"!==w&&(null===(s=g.debuggerPanel)||void 0===s?void 0:s.hasBreakpoint(t))){let o=!0;yield null===(d=g.debuggerPanel)||void 0===d?void 0:d.wait(t,(()=>{o=!1,e&&(e[1].conId=t.id,e&&L(...e,!0))})),o&&e&&(e[1].conId=t.id,e&&L(...e))}else e&&L(...e);if("timer"===m)B({value:o,curScope:n,inReg:t,notifyAll:l,fromCon:i});else if(l){const e=t.frameKey;if(e===r||a)K({pinId:f,value:o,component:b,curScope:null,comId:p,val:o,timerPinInputId:h,frameKey:e,inReg:t,notifyAll:l,fromCon:i});else{const[s,r]=e.split("-");if($[e]){const o=$[e],n=o[c.id];n?n[t.id]=t:o[c.id]={[t.id]:t}}else{($[e]={})[c.id]={[t.id]:t}}if(c.parentComId)K({pinId:f,value:o,component:b,curScope:n,comId:s,val:o,timerPinInputId:h,frameKey:e,inReg:t,notifyAll:l,fromCon:i});else{const n=C[`${s}-${r}`];if(n){const r=Object.entries(n),c=r.length;r.forEach((([n,r])=>{c>1&&"slot"===n||("scope"===(null==r?void 0:r.type)?r.curScope?K({pinId:f,value:o,component:b,curScope:r.curScope,comId:s,val:o,timerPinInputId:h,frameKey:e,inReg:t,notifyAll:l,fromCon:i}):r.pushTodo((n=>{K({pinId:f,value:o,component:b,curScope:n,comId:s,val:o,timerPinInputId:h,frameKey:e,inReg:t,notifyAll:l,fromCon:i})})):K({pinId:f,value:o,component:b,curScope:r.curScope,comId:s,val:o,timerPinInputId:h,frameKey:e,inReg:t,notifyAll:l,fromCon:i}))}))}}}}else K({pinId:f,value:o,component:b,curScope:n,comId:p,val:o,timerPinInputId:h,frameKey:y,inReg:t,notifyAll:l,fromCon:i})}}))))}function B({pinId:e,value:t,curScope:o,inReg:n,notifyAll:i,fromCon:s}){let l=o;const c=e?Object.assign(Object.assign({},n),{pinId:e}):n;if(i){const e=c.frameKey;if(!e)throw new Error("数据异常，请检查toJSON结果.");N(c,e===r?{}:o,t,s)}else{const e=c.frameKey.split("-");if(e.length>=2&&!l){const o=U(e[0],e[1],null,!1);"scope"===(null==o?void 0:o.type)?o.curScope?N(c,o.curScope,t,s):o.pushTodo((e=>{N(c,e,t,s)})):N(c,l,t,s)}else N(c,l,t,s)}}function K({pinId:e,value:t,component:o,curScope:n,comId:i,val:s,timerPinInputId:r,frameKey:l,inReg:c,notifyAll:a,fromCon:d}){const{isReady:p,isMultipleInput:u,pinId:f,value:m,cb:g}=function({pinId:e,value:t,component:o,curScope:n,comId:i,val:s}){const r=e.indexOf("."),l={pinId:e,value:t,isReady:!0,isMultipleInput:!1,cb:null};if(o&&-1!==r){const t=o.id+""+((null==n?void 0:n.id)?`-${n.id}`:""),{inputs:i}=o,c=e.substring(0,r);l.pinId=c;const a=e.substring(r+1);let d=A[t];d||(d=A[t]={}),d[a]=s;const p=new RegExp(`${c}.`),u=i.filter((e=>!!e.match(p)));Object.keys(d).length===u.length?(l.value=d,l.isMultipleInput=!0,l.cb=()=>{Reflect.deleteProperty(A,t)}):l.isReady=!1}return l}({pinId:e,value:t,component:o,curScope:n,comId:i,val:s});if(p){const e={pinId:u?f:null,value:m,curScope:n,inReg:c,notifyAll:a,fromCon:d};if(r){const t=r+"-"+l+((null==n?void 0:n.id)?`-${n.id}`:""),o=T[t];if(o){const{ready:n,todo:i}=o;if(n){let o=!1;Object.entries(i).forEach((([t,n])=>{t===f?(B(e),o=!0):n()})),o||B(e),null==g||g(),Reflect.deleteProperty(T,t)}else i[f]=()=>{null==g||g(),B(e)}}else T[t]={ready:!1,todo:{[f]:()=>{null==g||g(),B(e)}}}}else null==g||g(),B(e)}}function J(e,o){var n,i,s;const a=v[e];if(!a)return null;const f=e+(a.frameId||r);let m,g=C[f];g||(g=C[f]={});let y=o;for(!y&&a.parentComId&&a.frameId&&(y=null===(i=null===(n=C[`${a.parentComId}-${a.frameId}`])||void 0===n?void 0:n.slot)||void 0===i?void 0:i.curScope);y;){const t=y.id+"-"+e;if(y.frameId===a.frameId){m=y.id;const e=g[t];if(e)return e;{const e=y.parentComId;if(!e)break;if(e===a.paramId||e===a.parentComId)break}}y=y.parent}const b=(m?m+"-":"")+e,E=g[b];if(E)return E;const w=a.def,j=a.model,S=JSON.parse(JSON.stringify(j.data)),k=JSON.parse(JSON.stringify(j.style));k.__model_style__=!0;const O={},P={},A={},T={},$=function(e){return new Proxy({},{ownKeys:e=>a.inputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(t,o)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const n=null==e?void 0:e.inputs;if(n){const e=n[o];"function"==typeof e&&e(t)}O[o]=t;const i=P[o];i&&(i.forEach((({val:e,fromCon:o,fromScope:n})=>{t(e,new Proxy({},{get:(e,t)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;const i=B()[t];if("function"!=typeof i)throw new Error(`outputs.${t} not found`);i(e,n||y,o)}}))})),P[o]=void 0)}})},F=new Proxy({},{get:(t,n)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const i=_[e+"-"+n];if(i){const s={},r={};return i.forEach((e=>{s[e]=t=>{r[e]=t}})),Promise.resolve().then((()=>{q({comId:e,def:w,pinId:n},t,o,r)})),s}q({comId:e,def:w,pinId:n},t,o)}}),N=new Proxy({},{get:(t,o)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const n=I[e+"-"+o];n&&(null==h||h.inputs(Object.assign(Object.assign({},n),{value:t,parentScope:U})))}}),B=function(t){return new Proxy({},{ownKeys:e=>a.outputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(n,i,s){const r=function(n,s,r,d){if("[object Symbol]"===Object.prototype.toString.call(i))return;const p="boolean"==typeof s&&s;if(p){if(a.parentComId){const t=`${a.parentComId}-${a.frameId}`;M[t]?M[t][e]=!0:M[t]={[e]:!0}}if(D[`${a.id}${(null==o?void 0:o.id)?`-${o.id}`:""}`]=n,a.global&&!d)return void(null==h||h.exeGlobalCom({com:a,value:n,pinId:i}))}const u=arguments,f=null==t?void 0:t.outputs;if(f){const e=f[i];"function"==typeof e&&e(n)}let m;s&&"object"==typeof s&&(m=s);const g=l(w);if(!g)return;const y=j.outputEvents;let v;if(y){const t=y[i];if(t&&Array.isArray(t)){const o=t.find((e=>e.active));if(o){const{type:t}=o;switch(t){case"none":v=[];break;case"fx":const s=I[e+"-"+i];if("frame"===(null==s?void 0:s.type)){const e=`${s.frameId}-${s.pinId}`;v=x[e]||[],R[e]=n}else v=[];break;case"defined":break;default:if(v=[],Array.isArray(null==c?void 0:c.events)){const e=c.events.find((e=>{if(e.type===t)return e}));e&&"function"==typeof e.exe&&e.exe({options:o.options})}}}}}v=v||x[e+"-"+i],(null==v?void 0:v.length)?Z(u.length>=3&&void 0===d?{logProps:["com",{com:a,pinHostId:i,val:n,fromCon:r,notifyAll:p,comDef:g}],cons:v,val:n,curScope:m,fromCon:r,fromCom:a}:{logProps:["com",{com:a,pinHostId:i,val:n,fromCon:r,notifyAll:p,comDef:g}],cons:v,val:n,curScope:m||o,fromCon:r,notifyAll:p,fromCom:a}):L("com",{com:a,pinHostId:i,val:n,fromCon:r,notifyAll:p,comDef:g})};return r.getConnections=()=>x[e+"-"+i]||[],r}})},K=new Proxy({},{get:(e,t,o)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;A[t]=e;const o=T[t];o&&(o.forEach((t=>{e(t)})),T[t]=void 0)}}),W=new Proxy({},{get:(t,n,i)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const i=x[e+"-"+n];i?Z({logProps:["com",{com:a,pinHostId:n,val:t,comDef:w}],cons:i,val:t,curScope:o}):L("com",{com:a,pinHostId:n,val:t,comDef:w})}});const V=null===(s=w.rtType)||void 0===s?void 0:s.match(/^js/gi),U={id:a.id,title:a.title,frameId:a.frameId,parentComId:a.parentComId,data:V?S:t(S),style:V?k:t(k),_inputRegs:O,addInputTodo:(e,t,o,n)=>{let i=P[e];i||(P[e]=i=[]),i.push({val:t,fromCon:o,fromScope:n})},inputs:$(),inputsCallable:F,_inputsCallable:N,outputs:B(),_inputs:K,_outputs:W,clone(e){const t={inputs:$(e),outputs:B(e)};return Object.setPrototypeOf(t,this),t},_notifyBindings:function(e){if(a.global)return void(null==h||h._notifyBindings(e,a));const{bindingsTo:t}=a.model;if(t)for(let o in t){const n=J(o);if(n){const i=t[o];Array.isArray(i)&&i.forEach((t=>{let o=n;const i=t.split(".");i.forEach(((t,n)=>{n!==i.length-1?o=o[t]:o[t]=e}))}))}}},logger:p,onError:u?t=>d({comId:e,error:t}):d};return g[b]=U,U}function W(e,t){let o=R[`${e}${t?`-${t.id}-${t.frameId}`:""}`];return void 0===o&&(null==t?void 0:t.parent)&&(o=W(e,t.parent)),(0,i.bV)(o)}function q(e,t,n,i){var s;const{comId:c,def:a,pinId:f,pinType:m,frameKey:g,finishPinParentKey:y,timerPinInputId:b,targetFrameKey:I}=e;if("ext"===m){const o=C[c]||J(c,n);if("show"===f)o.style.display="";else if("hide"===f)o.style.display="none";else if("showOrHide"===f){const e=o.style;void 0===t?"none"===e.display?e.display="":e.display="none":e.display=t?"":"none"}const i=l(a);if(!i)return;F({com:o,val:t,pinHostId:f,frameKey:g,finishPinParentKey:y,comDef:i,conId:e.id})}else if("config"===m){const o=J(c,n),i=l(a);if(!i)return;F({com:o,pinHostId:f,val:t,frameKey:g,finishPinParentKey:y,comDef:i,conId:e.id});const{extBinding:s}=e,r=s.split(".");let d=o;r.forEach(((e,o)=>{o!==r.length-1?d=d[e]:d[e]=t}))}else if("timer"===m){const o=J(c,n),i=l(a);if(!i)return;F({com:o,pinHostId:f,val:t,frameKey:g,finishPinParentKey:y,comDef:i,conId:e.id});const s=b+"-"+g+((null==n?void 0:n.id)?`-${n.id}`:""),r=T[s];if(r){const{todo:e}=r;Object.entries(e).forEach((([e,t])=>t())),Reflect.deleteProperty(T,s)}else T[s]={ready:!0,todo:{}}}else if(null===(s=a.rtType)||void 0===s?void 0:s.match(/^js/gi)){const i=v[c];if(i){const s=J(c,n),m=l(a);if(!m)return;if(i.global){const e=null==h?void 0:h.getGlobalComProps(c);e&&(s.data=e.data)}const v=null==n?void 0:n.id,b=(v?v+"-":"")+c;i.inputs.find((e=>e===f))?F({com:i,val:t,pinHostId:f,frameKey:g,finishPinParentKey:y,comDef:m,conId:e.id}):Object.entries(t).forEach((([t,o])=>{F({com:i,val:o,pinHostId:`${f}.${t}`,frameKey:g,finishPinParentKey:y,comDef:m,conId:e.id})})),k[b]||(k[b]=!0,m.runtime({env:j,data:s.data,inputs:s.inputs,outputs:s.outputs,_notifyBindings:s._notifyBindings,_inputsCallable:s._inputsCallable,logger:p,onError:u?e=>d({comId:c,error:e}):d}));const x=s._inputRegs[f];"function"==typeof x&&x(t,new Proxy({},{get:(t,i)=>function(t){if("[object Symbol]"!==Object.prototype.toString.call(i)){if(E){const e=E[`${c}-${f}`];if(e){const i=`${e.frameId===o.id?r:I||g}-${e.pinId}`;void 0===(t=W(i,n))&&(t=W(i,null))}}s.outputs[i](t,n,e)}}}))}}else{const o=J(c,n);if(!o)return;const s=l(a);if(!s)return;F({com:o,pinHostId:f,val:t,frameKey:g,finishPinParentKey:y,comDef:s,conId:e.id});const r=o._inputRegs[f];if("function"==typeof r){let s;s=i||new Proxy({},{get:(t,i)=>function(t){"[object Symbol]"!==Object.prototype.toString.call(i)&&o.outputs[i](t,n,e)}}),r(t,s)}else o.addInputTodo(f,t,e,n)}if(y){const e=x[P[y]];e&&!_[`${c}-${f}`]&&Z({logProps:null,cons:e,val:void 0})}}function V(e,t){let o;return(null==e?void 0:e.comAry)&&e.comAry.find((e=>{if(e.id===t)return o=e,e;if(e.slots)for(let n in e.slots)if(o=V(e.slots[n],t),o)return o})),o}function U(e,t,o,n){const i=`${e}-${t}`;let s=C[i];s||(s=C[i]={});let r=o?o.id:"slot",l=s[r];if(n&&!l&&console.log("不应该再走到这儿了: ",{comId:e,slotId:t,scope:o,notifyAll:n}),!l){const n=V(y,e);if(!(null==n?void 0:n.slots))return null;const c=null==n?void 0:n.slots[t],a={};let d;if(o){const o=C[e+"-"+t];o&&(d=o.todo)}const p={scope:o,todo:d},u=new Proxy({},{get:(e,t)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(a[t]=e)}}),f=new Proxy({},{get(o,n){const i=function(o,i){if("[object Symbol]"===Object.prototype.toString.call(n))return;const s=e+"-"+t+"-"+n,r=x[s];R[`${s}${i?`-${i.id}-${i.frameId}`:""}`]=o,r?Z({logProps:["frame",{comId:e,frameId:t,pinHostId:n,val:o}],cons:r,val:o,curScope:i||p.scope}):L("frame",{comId:e,frameId:t,pinHostId:n,val:o})};return i.getConnections=()=>x[e+"-"+t+"-"+n]||[],i}}),m=new Proxy({},{get:(e,t,o)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(S[r+"-"+t]=e,S[i+"-"+t]=e)}});let g={};l=s[r]={type:null==c?void 0:c.type,run(o){let n=p.scope;o&&n!==o&&(p.scope=o,n=o);const i=(null==n?void 0:n.id)||"none";if(g[i]||(g[i]=!0,H({comId:e,frameId:t,scope:n})),Array.isArray(p.todo)&&(p.todo.forEach((e=>{Promise.resolve().then((()=>{e(n)}))})),p.todo=void 0),n&&"slot"!==r){const o=$[`${e}-${t}`];Promise.resolve().then((()=>{o&&Object.entries(o).forEach((([e,t])=>{if(!v[e].parentComId){const o=Object.entries(t).map((([e,t])=>t));o.length&&Z({logProps:null,cons:o,val:D[e],curScope:n,notifyAll:!0,fromCom:v[e],isAutoRun:!0})}}))}))}},destroy(){if(o){const e=`${o.parentComId}-${o.frameId}`,t=M[e];t&&Object.keys(t).forEach((e=>{Reflect.deleteProperty(D,`${e}-${o.id}`)}))}Reflect.deleteProperty(s,r)},_inputs:u,_inputRegs:a,inputs:f,outputs:m,get curScope(){return p.scope},setCurScope(e){p.scope=e},get todo(){return p.todo},pushTodo(e){p.todo||(p.todo=[]),p.todo.push(e)}}}return l}function H(e){const{comId:t,frameId:o,scope:n}=e,i=b[t?`${t}-${o}`:`${o}`];i&&i.forEach((e=>{const{id:t,def:o}=e;if(v[t]){const e=J(t,n),i=l(o);if(!i)return;i.runtime({env:j,data:e.data,inputs:e.inputs,outputs:e.outputs,_inputsCallable:e._inputsCallable,logger:p,onError:u?e=>d({comId:t,error:e}):d})}}))}function z({options:e,value:t,scope:n,log:i=!0,comProps:s}){const{frameId:l,comId:c,pinId:a,sceneId:d}=e,p=x[(c?`${c}-${l}`:`${l}`)+"-"+a];R[`${l}-${a}`]=t,p?Z({logProps:["frame",{comId:c,frameId:l,pinHostId:a,val:t,sceneId:d}],cons:p,val:t,curScope:n}):(i&&L("frame",{comId:c,frameId:l,pinHostId:a,val:t,sceneId:d}),l!==r&&(o.id===l?O[a](t):null==h||h.open({frameId:l,todo:{pinId:a,value:t},comProps:s,parentScope:n.proxyComProps})))}const G={get({comId:e,slotId:t,scope:o,_ioProxy:n}){let i;if(n&&(n.inputs||n.outputs||n._inputs||n._outputs)&&(i=n),t)return U(e,t,o);{const t=J(e,o);return i?t.clone(i):t}},getComInfo:e=>v[e]};if("function"==typeof a){a({run(){H({frameId:r})},inputs:new Proxy({},{get:(e,t)=>function(e,o=void 0,n=!0){"[object Symbol]"!==Object.prototype.toString.call(t)&&z({options:{frameId:r,pinId:t,sceneId:o},value:e,scope:void 0,log:n})}}),outputs(e,t){O[e]=t},get:G.get,getComInfo:G.getComInfo})}return G}},358:(e,t,o)=>{"use strict";o.d(t,{J2:()=>r,JE:()=>i,Wg:()=>s});let n=!1;function i(){n=!0}function s(e,t,o,i){if(n)return;let s;try{s=JSON.stringify(i)}catch(e){s=i}console.log(`%c [MyBricks] 输入项 %c ${e||t.title||t.namespace} | ${o} -> ${s}`,"color:#FFF;background:#000","","")}function r(e,t,o,i){if(n)return;let s;try{s=JSON.stringify(i)}catch(e){s=i}console.log(`%c [MyBricks] 输出项 %c ${e||t.title||t.namespace} | ${o} -> ${s}`,"color:#FFF;background:#fa6400","","")}},599:(e,t,o)=>{"use strict";function n(e){return e&&"object"==typeof e}function i(e){return"number"==typeof e&&!isNaN(e)}function s(e,t){const o=e.split("."),n=t.split("."),i=o.length,s=n.length,r=Math.min(i,s);let l=0;for(;l<r;l++){let e=parseInt(o[l]),t=parseInt(n[l]);if(e>t)return 1;if(e<t)return-1}if(i>s){for(let e=l;e<i;e++)if(0!=parseInt(o[e]))return 1;return 0}if(i<s){for(let e=l;e<s;e++)if(0!=parseInt(n[e]))return-1;return 0}return 0}function r(e=5,t=8){const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];if(t=t||o.length,e)for(let i=0;i<e;i++)n[i]=o[0|Math.random()*t];else{let e;n[8]=n[13]=n[18]=n[23]="-",n[14]="4";for(let t=0;t<36;t++)n[t]||(e=0|16*Math.random(),n[t]=o[19==t?3&e|8:e])}return n.join("")}function l(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}o.d(t,{Am:()=>m,Kn:()=>n,Lc:()=>l,Ok:()=>f,Q1:()=>u,Vj:()=>r,bV:()=>y,hj:()=>i,o4:()=>h,p$:()=>v,yC:()=>s});const c=function(e,t,o,n){return function(i,s){var r,l,c,a,d=parseFloat(s);return!s||d<=t?i:"".concat((r=d/e,l=o,c=Math.pow(10,l+1),a=Math.floor(r*c),10*Math.round(a/10)/c)).concat(n)}},a=c(12,0,5,"rem"),d=c(3.75,0,5,"vw"),p=/"[^"]+"|'[^']+'|url\([^)]+\)|(\d*\.?\d+)px/g,u=e=>e.replace(p,a),f=e=>e.replace(p,d);function m(e){return e}let g;function h(){var e;return g||(g=(null===(e=document.getElementById("_mybricks-geo-webview_"))||void 0===e?void 0:e.shadowRoot)||document.head)}function y(e){if(e&&"object"==typeof e)try{return e instanceof FormData?e:JSON.parse(JSON.stringify(e))}catch(t){return e}return e}function v(e,t=[]){const o=Object.prototype.toString.call(e);if(null===e||"object"!=typeof e||o.startsWith("[object HTML"))return e;const n=t.filter((t=>t.original===e))[0];if(n)return n.copy;const i=Array.isArray(e)?[]:{};return t.push({original:e,copy:i}),Object.keys(e).forEach((o=>{const n=Object.getOwnPropertyDescriptor(e,o);n&&"function"==typeof n.get?Object.defineProperty(i,o,{get:n.get,enumerable:n.enumerable,configurable:n.configurable}):i[o]=v(e[o],t)})),i}},987:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var n=o(359),i=o.n(n),s=o(878);const r=o(490).Z.locals;class l extends i().PureComponent{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){var t;return{hasError:!0,error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))}}componentDidCatch(e,t){var o,n;console.error(e,t),s.Z.error(e),this.setState({error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(o=null==e?void 0:e.toString)||void 0===o?void 0:o.call(e)),errorInfo:(null==t?void 0:t.stack)||(null==t?void 0:t.message)||(null===(n=null==t?void 0:t.toString)||void 0===n?void 0:n.call(t))})}render(){const{hasError:e,error:t,errorInfo:o}=this.state,{children:n,errorTip:s}=this.props;return e?i().createElement("div",{className:r.error},i().createElement("div",null,s||"渲染错误"),i().createElement("div",null,t||o)):n}}},576:(e,t,o)=>{"use strict";o.d(t,{Z:()=>d});var n=o(359),i=o.n(n),s=o(130),r=o(901),l=o(606),c=o(878),a=o(987);function d({json:e,options:t,style:o={},className:d="",root:p=!0,from:u}){const f=(0,s.useMyBricksRenderContext)(),{env:m,onError:g,logger:h,slot:y,getComDef:v}=(0,n.useMemo)((()=>{const{env:n,debug:i}=t;return n.canvas.isValid||t._isNestedRender||!i||"scene"!==u||(o.minHeight=800),{env:n,onError:f.onError,logger:f.logger,getComDef:e=>f.getComDef(e),slot:e.slot,_context:f}}),[]),[b,x,_]=(0,n.useMemo)((()=>{var o;try{let o,n=!0;return[(0,r.Z)({json:e,getComDef:v,events:t.events,env:m,ref(e){o=e,"function"==typeof t.ref&&(t.ref(e),n=!1)},onError:g,debug:t.debug,debugLogger:t.debugLogger,logger:h,scenesOperate:t.scenesOperate,_isNestedRender:t._isNestedRender,_context:f},{observable:f.observable}),o,n]}catch(e){throw console.error(e),c.Z.error(`导出的JSON.script执行异常: ${(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(o=null==e?void 0:e.toString)||void 0===o?void 0:o.call(e))}`),new Error("导出的JSON.script执行异常.")}}),[]);return(0,n.useLayoutEffect)((()=>{if(!t.disableAutoRun){if(_){const{inputs:o}=x,n=e.inputs;o&&Array.isArray(n)&&n.forEach((e=>{const{id:n,mockData:i}=e;let s;if(t.debug&&void 0!==i)try{s=JSON.parse(decodeURIComponent(i))}catch(e){s=i}o[n](s)}))}x.run()}}),[]),i().createElement(a.Z,{errorTip:"页面渲染错误"},i().createElement(l.Z,{env:m,style:o,_env:t._env,slot:y,getComDef:v,context:b,className:d,createPortal:t.createPortal||(()=>{}),onError:g,logger:h,root:p}))}},704:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var n=o(359),i=o.n(n),s=o(576),r=o(130),l=o(901),c=o(650),a=function(e,t,o,n){return new(o||(o=Promise))((function(i,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function l(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};const d=c.Z.locals;function p({json:e,options:t}){const o=(0,r.useMyBricksRenderContext)(),[s,c]=(0,n.useState)(0),[p,m]=(0,n.useState)([]),[g,h]=(0,n.useState)([]),{scenesMap:y,scenesOperateInputsTodo:v,themes:b,permissions:x,globalVarMap:_}=(0,n.useMemo)((()=>{if(t.sceneId){const o=e.scenes.findIndex((e=>e.id===t.sceneId));if(-1!==o){const t=e.scenes.splice(o,1);e.scenes.unshift(...t),"popup"===t[0].type&&m([t[0].id])}}const o=[];e.scenes.forEach(((e,t)=>{"popup"===e.type?t||m([e.id]):o.push(e)})),h(o);const{modules:n,definedComs:i}=e;return t.env.getDefinedComJSON||(t.env.getDefinedComJSON=e=>i[e].json),t.env.getModuleJSON=e=>{var t;return null===(t=null==n?void 0:n[e])||void 0===t?void 0:t.json},{scenesMap:e.scenes.reduce(((e,o,n)=>{var i;return Object.assign(Object.assign({},e),{[o.id]:{show:0===n,todo:[],json:o,disableAutoRun:!(!t.disableAutoRun&&!n),useEntryAnimation:!1,type:(null===(i=o.slot)||void 0===i?void 0:i.showType)||o.type}})}),{}),scenesOperateInputsTodo:{},themes:e.themes,permissions:e.permissions||[],globalVarMap:{}}}),[]);(0,n.useMemo)((()=>{if(t.ref){const e=t.ref;t.ref=o=>n=>(o(n),e.call(t,n))}else t.ref=e=>t=>{e(t)}}),[]);const{fxToJsonMap:I,currentFxFrameIdsMap:E}=(0,n.useMemo)((()=>{const t={},{global:o}=e;if(o){const{fxFrames:e}=o;Array.isArray(e)&&e.forEach((e=>{t[e.id]=e}))}return{fxToJsonMap:t,currentFxFrameIdsMap:{}}}),[]),w=(0,n.useCallback)((n=>{const i=y[n],s=t.env.hasPermission,{env:r}=t;r.themes=b,r.permissions=x,"function"==typeof s&&Object.defineProperty(r,"hasPermission",{get:function(){return e=>{if("string"==typeof e){const t=x.find((t=>t.id===e));return s({permission:t})}return s(e)}}}),r.canvas.open=(e,o,n)=>a(this,void 0,void 0,(function*(){var o;let i=y[e];if(!i){if("function"!=typeof t.scenesLoader)return void console.error(`缺少场景信息: ${e}`);const n=yield t.scenesLoader({id:e});if(i={disableAutoRun:!1,json:n,show:!1,parentScope:null,todo:[],type:(null===(o=n.slot)||void 0===o?void 0:o.showType)||n.type,useEntryAnimation:!1},y[e]=i,"popup"===n.type||h((e=>[...e,n])),v[e]){const{parentScope:t,todo:o}=v[e];i.parentScope=t,o.forEach((({value:e,pinId:t,parentScope:o})=>{i.todo=i.todo.concat({type:"inputs",todo:{pinId:t,value:e}})}))}}n?Object.entries(y).forEach((([t,o])=>{t===e?(o.useEntryAnimation="blank"===n,o.show=!0,"popup"===o.type?m((t=>[...t,e])):c((e=>e+1))):(o.show=!1,o._refs=null,"popup"===o.type?m((e=>e.filter((e=>e!==o.json.id)))):c((e=>e+1)))})):i.show||(i.useEntryAnimation="blank"===n,i.show=!0,"popup"===i.type?m((t=>[...t,e])):c((e=>e+1)))}));const d={open({todo:n,frameId:i,parentScope:s,comProps:r}){var a;const d=y[i];if(d)d.show||(d.show=!0,d.todo=d.todo.concat({type:"inputs",todo:n}),d.parentScope=s,"popup"===d.type?m((e=>[...e,i])):c((e=>e+1)));else{const c=I[i];if(c)if(E[s.id]){const{_refs:e}=E[s.id];E[s.id].parentScope=s;const t=null===(a=null==r?void 0:r.data)||void 0===a?void 0:a.configs;t&&Object.entries(t).forEach((([t,o])=>{e.inputs[t](o,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()}else{E[s.id]={};const{id:i}=c,{env:a}=t,d={open({todo:n,frameId:i,parentScope:s,comProps:r}){var c;const a=I[i];if(a)if(E[s.id]){const{_refs:e}=E[s.id];E[s.id].parentScope=s;const t=null===(c=null==r?void 0:r.data)||void 0===c?void 0:c.configs;t&&Object.entries(t).forEach((([t,o])=>{e.inputs[t](o,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()}else{E[s.id]={};const{env:i}=t,c={open({todo:e,frameId:t,parentScope:o,comProps:n}){var i;const s=E[o.id];if(null==s?void 0:s._refs){E[o.id].parentScope=o;const t=null===(i=null==n?void 0:n.data)||void 0===i?void 0:i.configs;t&&Object.entries(t).forEach((([e,t])=>{s._refs.inputs[e](t,void 0,!1)})),s._refs.inputs[e.pinId](e.value,void 0,!1),s._refs.run()}},inputs({frameId:e,parentScope:t,value:o,pinId:n}){const i=y[e];i?(i.parentScope=t,i._refs?i._refs.inputs[n](o):i.todo=i.todo.concat({type:"inputs",todo:{pinId:n,value:o}})):v[e]?v[e].todo.push({frameId:e,parentScope:t,value:o,pinId:n}):v[e]={parentScope:t,todo:[{value:o,pinId:n}]}},_notifyBindings(e,t){const{bindingsTo:o}=t.model;if(o)for(let t in o)for(let n in y){const i=y[n];if(i.json.coms[t])if(i._refs)f(i._refs,t,o[t],e);else{const n=o[t];i.todo=i.todo.concat({type:"globalVar",todo:{comId:t,bindings:n,value:e}})}}},getGlobalComProps(t){var o;return null===(o=y[e.scenes[0].id]._refs)||void 0===o?void 0:o.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:o}){const n=e.id;_[n]=t,Object.keys(y).forEach((e=>{const i=y[e];if(i.show&&i._refs){const e=i._refs.get({comId:n});e&&e.outputs[o](t,!0,null,!0)}}))}};(0,l.Z)({json:a,getComDef:e=>o.getComDef(e),events:t.events,env:i,ref(e){var t;E[s.id]._refs=e,E[s.id].parentScope=s;const{inputs:o,outputs:i}=e;a.outputs.forEach((e=>{i(e.id,(t=>{var o;null===(o=E[s.id].parentScope)||void 0===o||o.outputs[e.id](t)}))}));const l=null===(t=null==r?void 0:r.data)||void 0===t?void 0:t.configs;l&&Object.entries(l).forEach((([t,o])=>{e.inputs[t](o,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()},onError:o.onError,debug:t.debug,debugLogger:t.debugLogger,logger:o.logger,scenesOperate:c,_context:o},{observable:o.observable})}},inputs({frameId:e,parentScope:t,value:o,pinId:n}){const i=y[e];i?(i.parentScope=t,i._refs?i._refs.inputs[n](o):i.todo=i.todo.concat({type:"inputs",todo:{pinId:n,value:o}})):v[e]?v[e].todo.push({frameId:e,parentScope:t,value:o,pinId:n}):v[e]={parentScope:t,todo:[{value:o,pinId:n}]}},_notifyBindings(e,t){const{bindingsTo:o}=t.model;if(o)for(let t in o)for(let n in y){const i=y[n];if(i.json.coms[t])if(i._refs)f(i._refs,t,o[t],e);else{const n=o[t];i.todo=i.todo.concat({type:"globalVar",todo:{comId:t,bindings:n,value:e}})}}},getGlobalComProps(t){var o;return null===(o=y[e.scenes[0].id]._refs)||void 0===o?void 0:o.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:o}){const n=e.id;_[n]=t,Object.keys(y).forEach((e=>{const i=y[e];if(i.show&&i._refs){const e=i._refs.get({comId:n});e&&e.outputs[o](t,!0,null,!0)}}))}};(0,l.Z)({json:c,getComDef:e=>o.getComDef(e),events:t.events,env:a,ref(e){var t;E[s.id]._refs=e,E[s.id].parentScope=s;const{inputs:o,outputs:i}=e;c.outputs.forEach((e=>{i(e.id,(t=>{var o;null===(o=E[s.id].parentScope)||void 0===o||o.outputs[e.id](t)}))}));const l=null===(t=null==r?void 0:r.data)||void 0===t?void 0:t.configs;l&&Object.entries(l).forEach((([t,o])=>{e.inputs[t](o,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()},onError:o.onError,debug:t.debug,debugLogger:t.debugLogger,logger:o.logger,scenesOperate:d,_context:o},{observable:o.observable})}}},inputs({frameId:e,parentScope:t,value:o,pinId:n}){const i=y[e];i?(i.parentScope=t,i._refs?i._refs.inputs[n](o):i.todo=i.todo.concat({type:"inputs",todo:{pinId:n,value:o}})):v[e]?v[e].todo.push({frameId:e,parentScope:t,value:o,pinId:n}):v[e]={parentScope:t,todo:[{value:o,pinId:n}]}},_notifyBindings(e,t){const{bindingsTo:o}=t.model;if(o)for(let t in o)for(let n in y){const i=y[n];if(i.json.coms[t])if(i._refs)f(i._refs,t,o[t],e);else{const n=o[t];i.todo=i.todo.concat({type:"globalVar",todo:{comId:t,bindings:n,value:e}})}}},getGlobalComProps(t){var o;return null===(o=y[e.scenes[0].id]._refs)||void 0===o?void 0:o.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:o}){const n=e.id;_[n]=t,Object.keys(y).forEach((e=>{const i=y[e];if(i.show&&i._refs){const e=i._refs.get({comId:n});e&&e.outputs[o](t,!0,null,!0)}}))}};return r.scenesOperate=d,Object.assign(Object.assign({},t),{env:r,get disableAutoRun(){return i.disableAutoRun},ref:t.ref((e=>{i._refs=e;const o=i.todo,{inputs:s,outputs:r}=e,l=i.disableAutoRun;i.json.outputs.forEach((e=>{r(e.id,(t=>{var o,n,s;"apply"===e.id?null===(o=i.parentScope)||void 0===o||o.outputs[e.id](t):"module"!==i.type?(i.show=!1,i.todo=[],i._refs=null,null===(n=i.parentScope)||void 0===n||n.outputs[e.id](t),i.parentScope=null,"popup"===i.type?m((e=>e.filter((e=>e!==i.json.id)))):c((e=>e+1))):null===(s=i.parentScope)||void 0===s||s.outputs[e.id](t)}))})),o.length?(o.forEach((({type:t,todo:o})=>{if("inputs"===t)Promise.resolve().then((()=>{s[o.pinId](o.value,n)}));else if("globalVar"===t){const{comId:t,value:n,bindings:i}=o;f(e,t,i,n)}})),i.todo=[]):l||(i.disableAutoRun=!0,Promise.resolve().then((()=>{var e,o;null===(o=null===(e=i.json.inputs)||void 0===e?void 0:e.forEach)||void 0===o||o.call(e,(e=>{const{id:o,mockData:n}=e;let i;if(t.debug&&void 0!==n)try{i=JSON.parse(decodeURIComponent(n))}catch(e){i=n}s[o](i)}))}))),l&&Promise.resolve().then((()=>{e.run()}))})),_env:{loadCSSLazy(){},currentScenes:{close(){i.show=!1,i.todo=[],i._refs=null,"popup"===i.type?m((e=>e.filter((e=>e!==i.json.id)))):c((e=>e+1))}}},scenesOperate:d})}),[]),j=(0,n.useMemo)((()=>g.length?g.map((e=>{const{id:t}=e,o=y[t];return o.show&&i().createElement(u,{key:t,json:Object.assign(Object.assign({},e),{scenesMap:y}),options:w(t),className:o.useEntryAnimation?d.main:"",style:"popup"===o.type?{position:"absolute",top:0,left:0,backgroundColor:"#ffffff00"}:{}})})):null),[s,g]),C=(0,n.useMemo)((()=>p.length?p.map((e=>{const t=y[e].json,{id:o}=t;return i().createElement(u,{key:t.id,json:Object.assign(Object.assign({},t),{scenesMap:y}),options:w(o),style:{position:"absolute",top:0,left:0,backgroundColor:"#ffffff00"}})})):null),[p]);return(0,n.useEffect)((()=>{o.setPerformanceRender("end",(new Date).getTime())}),[]),i().createElement(i().Fragment,null,j,C)}function u({json:e,options:t,style:o={},className:n=""}){return i().createElement(s.Z,{json:e,options:t,style:o,className:n,from:"scene"})}function f(e,t,o,n){const i=e.get({comId:t});i&&Array.isArray(o)&&o.forEach((e=>{let t=i;const o=e.split(".");o.forEach(((e,i)=>{i!==o.length-1?t=t[e]:t[e]=n}))}))}},878:(e,t,o)=>{"use strict";o.d(t,{Z:()=>h});var n=o(359),i=o.n(n),s=o(318),r=o.n(s);const l=o(759).Z.locals;let c=!1;var a;!function(e){e.Error="error"}(a||(a={}));const d="__fz-debug-info-container__";let p,u=document.getElementById(d),f=0;const m=({content:e,type:t})=>{const[o,s]=(0,n.useState)([]),r=e=>{const t=`__fz-notification-id-${++f}__`;e=Object.assign({_nid:t},e),s((t=>[...t,e]))},c=e=>{s((t=>t.filter((t=>t._nid!==e))))};return(0,n.useEffect)((()=>{p={add:r,remove:c},e&&p.add({content:e,type:t})}),[]),i().createElement("div",{className:l.container},o.map((e=>i().createElement("div",{key:e._nid,className:l.itemWrap},i().createElement("div",{className:`${l.item} ${l.errorItem}`},i().createElement("svg",{className:l.closeIcon,viewBox:"0 0 1045 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>p.remove(e._nid)},i().createElement("path",{d:"M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z",fill:"#555555"})),e.content)))))},g=["ResizeObserver loop limit exceeded"],h={init:e=>{c=!1!==e,c&&(window.onerror=function(e,t,o,n,i){if("string"!=typeof e||!g.includes(e))return!1})},error:e=>{var t;if(c){const o=(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))||e;if("string"==typeof o&&g.includes(o))return;((e,t)=>{let o={content:"",type:t};if("string"==typeof e)o.content=e;else try{o.content=JSON.stringify(e)}catch(t){console.error("showNotification JSON.stringify Error",t,{message:e})}o.content&&(u?null==p||p.add(o):(u=document.createElement("div"),u.setAttribute("id",d),document.body.appendChild(u),r().render(i().createElement(m,{content:o.content,type:o.type}),u)))})(o,a.Error)}}}},606:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var n=o(359),i=o.n(n),s=o(599),r=o(232),l=o(987),c=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]])}return o};const a=r.Z.locals;function d({com:e,index:t,env:o,getComDef:n,context:s,scope:r,inputs:l,outputs:c,_inputs:a,_outputs:p,_env:f,template:m,onError:g,logger:h,createPortal:y}){const{id:v,elements:b,style:x}=e;if(b)return i().createElement("div",{key:v,style:x},b.map((e=>d({com:e,index:t,env:o,getComDef:n,context:s,scope:r,inputs:l,outputs:c,_inputs:a,_outputs:p,_env:f,template:m,onError:g,logger:h,createPortal:y}))));{const i=u({com:e,env:o,getComDef:n,context:s,scope:r,inputs:l,outputs:c,_inputs:a,_outputs:p,index:t,_env:f,template:m,onError:g,logger:h,createPortal:y});return null==i?void 0:i.jsx}}function p({scope:e,root:t,slot:o,style:n={},createPortal:s,className:r,params:l,inputs:c,outputs:a,_inputs:p,_outputs:f,wrapper:m,template:y,env:v,_env:b,getComDef:x,context:_,onError:I,logger:E}){const{style:w,comAry:j,comAry2:C}=o;if("smart"===w.layout&&C){const o=null==l?void 0:l.style,u=o||w;return i().createElement("div",{"data-isslot":"1",className:`${h(u)}${t&&r?` ${r}`:""}`,style:Object.assign(Object.assign({},g(u,!!o,t)),n)},C.map(((t,o)=>d({com:t,index:o,env:v,getComDef:x,context:_,scope:e,inputs:c,outputs:a,_inputs:p,_outputs:f,_env:b,template:y,onError:I,logger:E,createPortal:s}))))}const S=[];if(j.forEach(((t,o)=>{const n=u({com:t,env:v,getComDef:x,context:_,scope:e,inputs:c,outputs:a,_inputs:p,_outputs:f,index:o,_env:b,template:y,onError:I,logger:E,createPortal:s});n&&S.push(n)})),"function"==typeof m)return m(S);{const e=null==l?void 0:l.style,o=e||w;return i().createElement("div",{"data-isslot":"1",className:`${h(o)}${t&&r?` ${r}`:""}`,style:Object.assign(Object.assign({},g(o,!!e,t)),n)},S.map((e=>e.jsx)))}}function u({com:e,env:t,getComDef:o,context:n,scope:s,inputs:r,outputs:l,_inputs:c,_outputs:d,index:p,_env:u,template:m,onError:g,logger:h,createPortal:y}){var v,b;const{id:x,def:_,name:I,children:E,brother:w}=e,j=n.getComInfo(x),{hasPermission:C,permissions:S}=t,k=null===(b=null===(v=null==j?void 0:j.model)||void 0===v?void 0:v.permissions)||void 0===b?void 0:b.id;if(k&&"function"==typeof C&&!C(k)){const e=S.find((e=>e.id===k));return"hintLink"===(null==e?void 0:e.register.noPrivilege)?{id:x,name:I,jsx:i().createElement("div",null,i().createElement("a",{href:e.hintLink,target:"_blank",style:{textDecoration:"underline"}},e.register.title)),style:{}}:void 0}if(o(_)){const v=n.get({comId:x,scope:s,_ioProxy:{inputs:r,outputs:l,_inputs:c,_outputs:d}});if(v){const r=x+(s?s.id:"")+p;let l=[],c=[];return{id:x,jsx:i().createElement(f,{key:r,com:e,getComDef:o,context:n,scope:s,props:v,env:t,_env:u,template:m,onError:g,logger:h,createPortal:y},l,c),name:I,inputs:v.inputsCallable,style:v.style}}return{id:x,jsx:i().createElement("div",{className:a.error},"未找到组件(",_.namespace,"@",_.version," - ",x,")定义."),name:I,style:{}}}return{id:x,jsx:i().createElement("div",{className:a.error},"未找到组件(",_.namespace,"@",_.version,")定义."),name:I,style:{}}}function f({com:e,props:t,scope:o,template:r,env:c,createPortal:d,_env:p,getComDef:u,context:f,onError:g,logger:h,children:v}){const{id:b,def:x,name:_,slots:I={}}=e,{data:E,title:w,style:j,inputs:C,outputs:S,_inputs:k,_outputs:O,_notifyBindings:P}=t;(0,n.useMemo)((()=>{const{pxToRem:e,pxToVw:t}=c,o=function({env:e,style:t,def:o}){var n;const i=null===(n=null==e?void 0:e.themes)||void 0===n?void 0:n.comThemes;if(!i)return t.styleAry;let s=t.styleAry;const{themesId:r}=t,{namespace:l}=o;if(r||s)if("_defined"===r);else{const e=i[l];if(Array.isArray(e)){const t=e.find((({id:e})=>e===r));t&&(s=t.styleAry)}}else{const e=i[l];if(Array.isArray(e)){const t=e.find((({isDefault:e})=>e));t&&(s=t.styleAry)}}return s}({env:c,def:x,style:j});if(Array.isArray(o)){const n=(0,s.o4)();if(!n.querySelector(`style[id="${b}"]`)){const i=document.createElement("style");let s="";i.id=b,o.forEach((({css:o,selector:n,global:i})=>{":root"===n&&(n="> *:first-child"),Array.isArray(n)?n.forEach((n=>{s+=y({id:b,css:o,selector:n,global:i,configPxToRem:e,configPxToVw:t})})):s+=y({id:b,css:o,selector:n,global:i,configPxToRem:e,configPxToVw:t})})),i.innerHTML=s,n?n.appendChild(i):document.head.appendChild(i)}}Reflect.deleteProperty(j,"styleAry"),Reflect.deleteProperty(j,"themesId")}),[]);const A=u(x),T=new Proxy(I,{get(e,t){let n;o&&(n={id:o.id+"-"+o.frameId,frameId:t,parentComId:b,parent:o});const s=f.get({comId:b,slotId:t,scope:n});return{render(e){const r=I[t],l=null==e?void 0:e.scope;return l&&(n={id:l.id+"-"+l.frameId,frameId:t,parentComId:b,parent:l}),r?i().createElement(m,{key:null==e?void 0:e.key,props:s,currentScope:n,slotId:t,slot:r,params:e,style:j,onError:g,createPortal:d,parentComId:b,logger:h,env:c,_env:p,scope:o,getComDef:u,context:f}):i().createElement("div",{className:a.error},`组件(namespace=${x.namespace}）的插槽(id=${t})`," 未找到.")},get size(){var e,o;return!!(null===(o=null===(e=I[t])||void 0===e?void 0:e.comAry)||void 0===o?void 0:o.length)},_inputs:s._inputs,inputs:s.inputs,outputs:s.outputs}}}),R=(0,n.useMemo)((()=>{if(t.frameId&&t.parentComId){let e=(null==o?void 0:o.parentScope)||o;const n=f.get({comId:t.parentComId,slotId:t.frameId,scope:(null==e?void 0:e.parent)?e:null});if(n)return{get _inputs(){return new Proxy({},{get:(e,t)=>n._inputRegs[t]})}}}}),[]),$=function({style:e,id:t}){const o=[t,a.com];1===e.flex&&o.push(a.flex);return o.join(" ")}({style:j,id:b}),D=function({style:e}){const t={},{width:o,height:n,maxWidth:i}=e;o?(0,s.hj)(o)?t.width=o+"px":o&&(t.width=o):t.width="100%";(0,s.hj)(n)?t.height=n+"px":n&&(t.height=n);i&&(t.maxWidth=i);return t}({style:j}),M=function({style:e}){const t={},{width:o,marginTop:n,marginLeft:i,marginRight:r,marginBottom:l}=e;(0,s.hj)(n)&&(t.marginTop=n+"px");(0,s.hj)(i)&&("number"==typeof o||i<0?t.marginLeft=i+"px":t.paddingLeft=i+"px");(0,s.hj)(r)&&("number"==typeof o||r<0?t.marginRight=r+"px":t.paddingRight=r+"px");(0,s.hj)(l)&&(t.marginBottom=l+"px");return t}({style:j}),L={};if(["fixed","absolute"].includes(j.position)){const{top:e,left:t,right:o,bottom:n}=j;(e||(0,s.hj)(e))&&(L.top=(0,s.hj)(e)?e+"px":e),(n||(0,s.hj)(n))&&(L.bottom=(0,s.hj)(n)?n+"px":n),(t||(0,s.hj)(t))&&(L.left=(0,s.hj)(t)?t+"px":t),(o||(0,s.hj)(o))&&(L.right=(0,s.hj)(o)?o+"px":o),"fixed"===j.position?L.zIndex=1e3:"absolute"===j.position&&(L.zIndex=1)}let F=A.runtime({id:b,env:c,_env:p,data:E,name:_,title:w,style:j,inputs:C,outputs:S,_inputs:k,_outputs:O,_notifyBindings:P,slots:T,createPortal:d,parentSlot:R,onError:g,logger:h});return"function"==typeof r&&(F=r({id:b,jsx:F,name:_,scope:o})),F=F?i().createElement("div",{id:b,key:b,style:Object.assign(Object.assign(Object.assign(Object.assign({display:j.display,position:j.position,flex:j.flex},L),D),M),j.ext||{}),className:$},i().createElement(l.Z,{errorTip:`组件 (namespace = ${x.namespace}@${x.version}）渲染错误`},F,v)):null,F}function m({slotId:e,parentComId:t,props:o,currentScope:r,slot:l,params:c,scope:a,env:d,createPortal:u,_env:f,style:m,getComDef:g,context:h,onError:y,logger:v}){const b=(0,n.useRef)(null),{curScope:x,curProps:_}=(0,n.useMemo)((()=>{let n=r,i=o,a=!1;if(n||"scope"===(null==l?void 0:l.type)&&(n={id:(0,s.Vj)(10,16),frameId:e,parentComId:t},a=!0),c){const o=c.inputValues;if("object"==typeof o){a||(n=Object.assign(Object.assign({},n),{id:n.id+"-"+(0,s.Vj)(10,16),parentScope:n})),i=h.get({comId:t,slotId:e,scope:n});for(let e in o)i.inputs[e](o[e],n)}}return i.run(n),{curScope:n,curProps:i}}),[]);(0,n.useEffect)((()=>{const e=null==c?void 0:c.inputValues;if(e)if(b.current){if("object"==typeof e&&JSON.stringify(b.current)!==JSON.stringify(e)){b.current=e;for(let t in e)_.inputs[t](e[t],x);_.run()}}else b.current=e}),[null==c?void 0:c.inputValues]),(0,n.useEffect)((()=>()=>{_.destroy()}),[]);return(0,n.useMemo)((()=>i().createElement(p,{scope:x,env:d,createPortal:u,_env:f,slot:l,params:c,wrapper:null==c?void 0:c.wrap,template:null==c?void 0:c.itemWrap,getComDef:g,context:h,inputs:null==c?void 0:c.inputs,outputs:null==c?void 0:c.outputs,_inputs:null==c?void 0:c._inputs,_outputs:null==c?void 0:c._outputs,onError:y,logger:v})),[])}function g(e,t,o){const{paddingLeft:n,paddingTop:i,paddingRight:s,paddingBottom:r,background:l,backgroundColor:a,backgroundImage:d,backgroundPosition:p,backgroundRepeat:u,backgroundSize:f,position:m}=e,g=c(e,["paddingLeft","paddingTop","paddingRight","paddingBottom","background","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","position"]);let h={paddingLeft:n||0,paddingTop:i||0,paddingRight:s||0,paddingBottom:r||0,backgroundColor:a||(o?"#ffffff":void 0),backgroundImage:d,backgroundPosition:p,backgroundRepeat:u,backgroundSize:f};if(l){if("object"==typeof l){const{background:e,backgroundImage:t,backgroundColor:o,backgroundRepeat:n,backgroundSize:i}=l;h.backgroundRepeat=n,h.backgroundSize=i,e?h.background=e:(h.backgroundImage=t,h.backgroundColor=o)}else h.background=l}return t&&(h=Object.assign(h,g)),h}function h(e){var t,o;const n=[a.slot,"slot"],i=e;if(i){"flex-column"==(null===(t=i.layout)||void 0===t?void 0:t.toLowerCase())?n.push(a.lyFlexColumn):"flex-row"==(null===(o=i.layout)||void 0===o?void 0:o.toLowerCase())&&n.push(a.lyFlexRow);const e=i.justifyContent;e&&("FLEX-START"===e.toUpperCase()?n.push(a.justifyContentFlexStart):"CENTER"===e.toUpperCase()?n.push(a.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?n.push(a.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?n.push(a.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&n.push(a.justifyContentFlexSpaceBetween));const s=i.alignItems;s&&("FLEX-START"===s.toUpperCase()?n.push(a.alignItemsFlexStart):"CENTER"===s.toUpperCase()?n.push(a.alignItemsFlexCenter):"FLEX-END"===s.toUpperCase()&&n.push(a.alignItemsFlexFlexEnd))}return n.join(" ")}function y({id:e,css:t,selector:o,global:n,configPxToRem:i,configPxToVw:r}){return`\n    ${n?"":`#${e} `}${o.replace(/\{id\}/g,`${e}`)} {\n      ${Object.keys(t).map((e=>{let o=t[e];return i&&"string"==typeof o&&-1!==o.indexOf("px")?o=(0,s.Q1)(o):r&&"string"==typeof o&&-1!==o.indexOf("px")&&(o=(0,s.Ok)(o)),`${(0,s.Lc)(e)}: ${o};`})).join("\n")}\n    }\n  `}},130:(e,t,o)=>{"use strict";o.r(t),o.d(t,{MyBricksRenderProvider:()=>w,hijackReactcreateElement:()=>a.O,observable:()=>a.L,render:()=>C,useMyBricksRenderContext:()=>j});var n=o(359),i=o.n(n),s=o(576),r=o(147),l=o(704),c=o(383),a=o(196),d=o(232),p=o(650),u=o(490),f=o(759),m=o(358),g=o(878),h=o(901),y=o(599),v=o(21),b=o.n(v),x=o(257);function _(e,t){e.use({target:t})}console.log(`%c ${r.u2} %c@${r.i8}`,"color:#FFF;background:#fa6400","","");class I{constructor(e){this.options=e,this.performance={render:{start:window.MYBRICKS_PC_FMP_START||(new Date).getTime(),end:null,time:null},callConnectorTimes:[]},this.onCompleteCallBacks=[],this.comDefs={},this.onError=e=>{console.error(e),g.Z.error(e)},this.observable=a.L;const{env:t,debug:o,observable:n,onError:i,plugins:s=[]}=e;this.mode=o?"development":"production",n?this.observable=n:(0,a.O)({pxToRem:t.pxToRem,pxToVw:t.pxToVw});const r=(0,y.o4)();_(d.Z,r),_(p.Z,r),_(u.Z,r),_(f.Z,r);const l=null==t?void 0:t.pxToRem;if(l){const{enableAdaptive:e=!1,landscapeWidth:t=1440}=l,o=document.documentElement;if(e){const e=()=>{o.style.fontSize=o.clientWidth/(t/12)+"px"};e(),window.addEventListener("resize",e)}else o.style.fontSize="12px"}const{onCompleteCallBacks:m}=this;if(t.runtime||(t.runtime={onComplete(e){m.push(e)}}),t.i18n||(t.i18n=e=>e),t.renderModule){const e=t.renderModule;t.renderModule=(o,n)=>e(o,Object.assign(Object.assign({},n),{env:t,_isNestedRender:!0}))}else t.renderModule=(e,o)=>C(e,Object.assign(Object.assign({},o),{env:t,_isNestedRender:!0}));if(t.renderCom){const e=t.renderCom;t.renderCom=(t,o)=>e(t,Object.assign(Object.assign({},o),{_isNestedRender:!0}))}else t.renderCom=(e,t)=>C(e,Object.assign(Object.assign({},t),{_isNestedRender:!0}));const h=document.body;t.canvas||(t.canvas={get type(){return h.clientWidth<=414?"mobile":"pc"}}),"canvasElement"in t||(t.canvasElement=h);window.RENDER_WEB_PERFORMANCE={getPerformance:this.getPerformance.bind(this)},this.initOther(),this.initComdefs();[new c.Z].concat(s).forEach((e=>{e.apply(this)}))}initOther(){const{env:e}=this.options;e.silent&&(0,m.JE)(),g.Z.init(e.showErrorNotification),this.logger={info:console.info,trace:console.trace,warn:console.warn,error:e=>{console.error(e),g.Z.error(e)}}}initComdefs(){const e=(t,o)=>{t.forEach((t=>{t.comAray?e(t.comAray,o):o[`${t.namespace}-${t.version}`]=t}))},{comDefs:t}=this.options,{comDefs:o}=this;t&&Object.assign(o,t);let n=[...window.__comlibs_edit_||[],...window.__comlibs_rt_||[]];n.push(b()),n.forEach((t=>{const n=t.comAray;n&&Array.isArray(n)&&e(n,o)}))}getComDef(e){const{comDefs:t}=this,o=t[e.namespace+"-"+e.version];if(!o){const o=[];for(let n in t)n.startsWith(e.namespace+"-")&&o.push(t[n]);if(o&&o.length>0){o.sort(((e,t)=>(0,y.yC)(e.version,t.version)));const t=o[0];return console.warn(`【Mybricks】组件${e.namespace+"@"+e.version}未找到，使用${t.namespace}@${t.version}代替.`),t}return console.error(`组件${e.namespace+"@"+e.version}未找到，请确定是否存在该组件以及对应的版本号.`),null}return o}getPerformance(){return this.performance}setPerformanceRender(e,t){const o=this.performance.render;o[e]=t,"end"===e&&(o.time=t-o.start)}setPerformanceCallConnectorTimes(e){this.performance.callConnectorTimes.push(e)}}const E=(0,n.createContext)({});function w({children:e,value:t}){return(0,n.useEffect)((()=>()=>{t.onCompleteCallBacks.forEach((e=>{e()}))}),[]),i().createElement(E.Provider,{value:t},e)}function j(){return(0,n.useContext)(E)}function C(e,t){if(e){let o=null;if("scenes"in e?((t._isNestedRender||t.debug)&&(t.env=(0,y.p$)(t.env)),(0,x.An)(e),o=i().createElement(l.Z,{json:e,options:t})):e.slot&&(o=i().createElement(s.Z,{json:e,options:t,root:"module"!==e.type})),!o){const o=new I(t);return(0,h.Z)({json:e,getComDef:e=>o.getComDef(e),events:t.events,env:t.env,ref(o){const{inputs:n}=o,i=e.inputs;n&&Array.isArray(i)&&i.forEach((e=>{const{id:o,mockData:i}=e;let s;if(t.debug&&void 0!==i)try{s=JSON.parse(decodeURIComponent(i))}catch(e){s=i}n[o](s)})),o.run()},onError:o.onError,debug:t.debug,debugLogger:t.debugLogger,logger:o.logger,scenesOperate:t.scenesOperate,_context:o},{observable:o.observable}),null}return t._isNestedRender?o:i().createElement(w,{value:new I(t)},o)}return null}},119:(e,t,o)=>{"use strict";o.d(t,{ep:()=>n.e,in:()=>r,kU:()=>s,st:()=>i.s});var n=o(965),i=o(60);const s=new WeakMap,r=new WeakMap},60:(e,t,o)=>{"use strict";o.d(t,{s:()=>i});var n=o(119);const i=new class{constructor(){this.reactionStack=[]}regist(e){let t=this.getCurrentReaction();t&&n.ep.registReaction(t,e)}autoRun(e,t){const{reactionStack:o}=this;if(-1===o.indexOf(e))try{return o.push(e),t()}finally{o.pop()}}getCurrentReaction(){const{reactionStack:e}=this;return e[e.length-1]}}},965:(e,t,o)=>{"use strict";o.d(t,{e:()=>r});var n=o(599),i=o(119);function s(e){e()}const r=new class{constructor(){this.taskMap=new WeakMap,this.reactionToTaskMap=new WeakMap}addTask(e){this.taskMap.set(e,new Map)}deleteTask(e){if(!(0,n.Kn)(e))return;const t=i.kU.get(e);i.kU.delete(e),i.in.delete(t);this.taskMap.get(t);this.taskMap.delete(t)}deleteReaction(e){let t=this.reactionToTaskMap.get(e);t&&(this.reactionToTaskMap.delete(e),t.forEach((t=>{t.forEach((t=>{t.delete(e)}))})))}registReaction(e,{target:t,key:o}){const n=this.taskMap.get(t);if(n){let t=n.get(o);t||(t=new Set,n.set(o,t)),t.has(e)||t.add(e);let i=this.reactionToTaskMap.get(e);i||(i=new Set,this.reactionToTaskMap.set(e,i)),i.has(n)||i.add(n)}}getReactions({target:e,key:t}){const o=this.taskMap.get(e);if(!o)return[];return o.get(t)||[]}runTask(e){const t=this.getReactions(e);t.size&&t.forEach(s)}}},787:(e,t,o)=>{"use strict";o.d(t,{Z:()=>r});var n=o(196),i=o(599),s=o(119);const r={get:function(e,t){const o=e[t];if(["$$typeof","constructor"].includes(t)||e.__model_style__&&"display"!==t)return o;if(s.st.regist({target:e,key:t}),o instanceof FormData)return o;const r=s.in.get(o);return(0,i.Kn)(o)?r||(0,n.L)(o):r||o},set:function(e,t,o){(0,i.Kn)(o)&&(o=s.kU.get(o)||o);const n=Object.hasOwnProperty.call(e,t),r=e[t];e[t]=o;let l=!1;switch(!0){case!n||Array.isArray(e)&&"length"===t:case o!==r:l=!0}return l&&(s.ep.runTask({target:e,key:t}),s.ep.deleteTask(s.in.get(r))),!0}}},196:(e,t,o)=>{"use strict";o.d(t,{L:()=>m,O:()=>d});var n=o(359),i=o.n(n),s=o(119),r=o(599),l=o(787);const c="__render-web-createElement__";let a;function d(e){const{pxToRem:t,pxToVw:o}=e;i()[c]||(i()[c]=!0,a=i().createElement,i().createElement=function(...e){let[n,s]=e;if(s){const l=s.style;if(t&&l?Object.keys(l).forEach((e=>{const t=l[e];"string"==typeof t&&-1!==t.indexOf("px")&&(l[e]=(0,r.Q1)(t))})):o&&l&&Object.keys(l).forEach((e=>{const t=l[e];"string"==typeof t&&-1!==t.indexOf("px")&&(l[e]=(0,r.Ok)(t))})),e.length>0&&"function"==typeof n){if(!n.prototype||!(n.prototype instanceof i().Component)&&void 0===n.prototype.isReactComponent){const t=u(n);e.splice(0,1,t)}return a(...e)}if("object"==typeof n&&n.$$typeof===Symbol.for("react.forward_ref")){const t=u(n,!0);return e.splice(0,1,t),a(...e)}return a(...e)}return a(...e)})}const p="__enhanced__";function u(e,t=!1){let o=e[p];if(!o){t?(o=(0,n.memo)(e),o.render=f(e.render,!1)):o=f(e);try{e[p]=o}catch(e){}}const i=Object.getOwnPropertyNames(e);return i&&i.forEach((n=>{try{t&&"render"===n||(o[n]=e[n])}catch(e){console.error(e)}})),o}function f(e,t=!0){function o(t,o){var i;const s=(0,n.useRef)(null),[,r]=(0,n.useState)([]);let l;return(0,n.useMemo)((()=>{s.current||(s.current=new g((()=>r([]))))}),[]),(0,n.useEffect)((()=>()=>{var e;null===(e=s.current)||void 0===e||e.destroy(),s.current=null}),[]),null===(i=s.current)||void 0===i||i.track((()=>{l=e(t,o)})),l}return o.displayName=e.displayName||e.name,t?(0,n.memo)(o):o}function m(e){return(0,r.Kn)(e)?s.kU.has(e)?e:s.in.get(e)||function(e){const t=l.Z,o=new Proxy(e,t);return s.in.set(e,o),s.kU.set(o,e),s.ep.addTask(e),o}(e):{}}class g{constructor(e){this.update=e}track(e){s.st.autoRun(this.update,e)}destroy(){s.ep.deleteReaction(this.update)}}},383:(e,t,o)=>{"use strict";o.d(t,{Z:()=>u});var n=o(359),i=o.n(n),s=o(318),r=o.n(s),l=o(599),c=o(423);const a=c.Z.locals,d=i().createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10635",width:"12",height:"12"},i().createElement("path",{d:"M219.428571 73.142857v877.714286H73.142857V73.142857zM365.714286 73.142857l585.142857 438.857143-577.828572 438.857143L365.714286 599.771429","p-id":"10636",fill:"#707070"}));function p({resume:e}){return i().createElement("div",{className:a.debugger},i().createElement("div",{className:a.titlebar},i().createElement("div",null,"已在交互视图中暂停"),i().createElement("div",{className:a.resume,onClick:e},d)))}class u{constructor(){}apply(e){const{options:t,mode:o}=e,{env:n,debug:i,onError:s}=t;if("development"===o&&"function"==typeof i){const o=new f(n),{log:r,onResume:a}=i({resume:()=>{o.next()},ignoreAll:e=>{o.setIgnoreWait(e),e&&o.next(!0)}});o.setResume(a),e.debuggerPanel=o,t.debugLogger=r,e.onError=s,c.Z.use({target:(0,l.o4)()})}}}class f{constructor(e){this.env=e,this.isReact18=!!r().createRoot,this.resume=()=>{},this._pending=!1,this._ignoreWait=!1,this._waitCount=0,this._waitBreakpointIds=[],this._waitIdToResolvesMap={}}setResume(e){this.resume=e}open(){if(this.dom)this.dom.style.visibility="visible";else{const e=document.createElement("div"),t=this.env.canvasElement;if(this.canvas=t,this.dom=e,e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="100000",e.style.visibility="visible",t.appendChild(e),this.isReact18){const t=r().createRoot(e);t.render(i().createElement(p,{resume:this.resume})),this.root=t}else r().render(i().createElement(p,{resume:this.resume}),e)}}close(){this.dom&&(this.dom.style.visibility="hidden")}destroy(){this.dom&&requestAnimationFrame((()=>{this.isReact18?this.root.unmount():r().unmountComponentAtNode(this.dom),this.root=null,this.canvas.removeChild(this.dom),this.canvas=null,this.dom=null}))}hasBreakpoint(e){return!this._ignoreWait&&(this._pending||e.isBreakpoint)}wait(e,t){return new Promise((o=>{if(this._ignoreWait)o();else{const n=this._waitBreakpointIds.length>0;if(n||t(),this.open(),this._pending=!0,e.isBreakpoint){if(n){const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(t)}const i=this._waitCount+++e.id;this._waitBreakpointIds.unshift(i),this._waitIdToResolvesMap[i]=[o]}else{const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(o)}}}))}next(e=!1){if(e)for(;this._waitBreakpointIds.length;)this.next();else{const e=this._waitBreakpointIds.pop(),t=this._waitIdToResolvesMap[e];t&&t.forEach((e=>e())),this._waitBreakpointIds.length||(this._pending=!1,this.close())}}setIgnoreWait(e){this._ignoreWait=e}}},257:(e,t,o)=>{"use strict";function n(e){const{global:t,modules:o,scenes:n}=e;if(!n)return e;if(t){const{comsReg:e,consReg:s,pinRels:r,fxFrames:l,pinProxies:c}=t;e&&Object.keys(e).forEach((t=>{e[t].global=!0})),Array.isArray(l)&&l.forEach((t=>{e&&Object.assign(t.coms,e),s&&Object.assign(t.cons,s),r&&Object.assign(t.pinRels,r),c&&Object.assign(t.pinProxies,c)})),o&&Object.entries(o).forEach((([t,o])=>{const{json:n}=o;e&&Object.assign(n.coms,e),s&&Object.assign(n.cons,s),r&&Object.assign(n.pinRels,r),c&&Object.assign(n.pinProxies,c)}));const a=new i;n.forEach((t=>{a.transformSlotComAry(t.slot,t.coms),e&&Object.assign(t.coms,e),s&&Object.assign(t.cons,s),r&&Object.assign(t.pinRels,r),c&&Object.assign(t.pinProxies,c)}))}return e}o.d(t,{An:()=>n});class i{constructor(){this.comIdToSlotComMap={}}transformSlotComAry(e,t){const{comIdToSlotComMap:o}=this,{comAry:n}=e;if("smart"===e.style.layout){const i=n.sort(((e,o)=>{const{id:n,slots:i}=e,{id:s,slots:r}=o;i&&Object.entries(i).forEach((([e,o])=>{this.transformSlotComAry(o,t)})),r&&Object.entries(r).forEach((([e,o])=>{this.transformSlotComAry(o,t)}));const l=t[n].model.style,c=l.top,a=l.left,d=t[s].model.style,p=d.top,u=d.left;return c===p?a-u:c-p})),r=this.traverseElementsToSlotComAry2(function(e,t){console.log("🚄 初始化 elements: ",e);const o=new s(e,t),n=o.getElements();return n}(i.map((e=>{const n=e.id,i=t[n],s=i.model.style,r=i.style;return o[n]=e,{id:n,width:r.width||0,height:r.height||0,top:s.top||0,left:s.left||0,children:[],brother:[]}})),{width:e.style.width}),t);console.log("🛹 开始处理comAry2: ",JSON.parse(JSON.stringify(r))),r[0].isContainer=!0,e.comAry2=this.transformComAry2(r,t,{com:{width:e.style.width,marginLeft:0,marginTop:0,flexDirection:"row"},parentCom:{width:e.style.width,marginLeft:0,marginTop:0,flexDirection:"row"}}),console.log("最终结果: ",e.comAry2)}else n.forEach((e=>{const{slots:o}=e;o&&Object.entries(o).forEach((([e,o])=>{this.transformSlotComAry(o,t)}))}))}isSameGroup(e){if(e.length<2)return!0;let t=!1,o=!1;for(let n=0;n<e.length;n++){if(e[n].tempElements?t=!0:o=!0,t&&o)break}return t!==o}transformComAry2(e,t,{com:o,parentCom:n,isSameGroup:i=!1}){const s=[],r=[],l={};let c=0;if(e.forEach((e=>{if(e.def)s.push(e);else if(e.flexDirection){const a=e.elements;if(1!==a.length&&this.isSameGroup(a)){const n={display:"flex",flexDirection:e.flexDirection,marginTop:e.marginTop},d=this.transformComAry2(a,t,{com:e,parentCom:o,isSameGroup:!0});if(d.some((e=>e.style.flex))){"column"===e.flexDirection&&d.forEach((e=>{Reflect.deleteProperty(e.style,"flex")}));const t=e.width;let s;r.push(t),c+=t,l[r.length-1]=n,s=i?"row"===o.flexDirection?0:o.width-e.marginLeft-e.width:e.flexDirection===e.parentFlexDirection||"row"===e.parentFlexDirection?0:o.width-o.marginLeft-e.width-e.marginLeft,n.margin=`${e.marginTop}px ${s}px 0px ${e.marginLeft}px`}else{let t;t=i?"row"===o.flexDirection?0:o.width-e.marginLeft-e.width:o.width-o.marginLeft-e.width-e.marginLeft,t===e.marginLeft?n.justifyContent="center":(n.marginLeft=e.marginLeft,n.width="fit-content")}s.push({id:e.id,style:n,elements:d})}else if("row"===e.flexDirection){const d={display:"flex",flexDirection:e.flexDirection,marginTop:e.marginTop},p=this.transformComAry2(a,t,{com:o,parentCom:n});if(p.some((e=>e.style.flex))){"column"===e.flexDirection&&(console.log(41,"🐱 分开处理 - 容器是纵向的，把flex数据干掉 => "),p.forEach((e=>{Reflect.deleteProperty(e.style,"flex")})));const t=e.width;let n;r.push(t),c+=t,l[r.length-1]=d,n=i?"row"===o.flexDirection?0:o.width-e.marginLeft-e.width:o.width-o.marginLeft-e.width-e.marginLeft,d.margin=`${e.marginTop}px ${n}px 0px ${e.marginLeft}px`}else{let t;t=i?"row"===o.flexDirection?0:o.width-e.marginLeft-e.width:o.width-o.marginLeft-e.width-e.marginLeft,t===e.marginLeft?d.justifyContent="center":(d.marginLeft=e.marginLeft,d.width="fit-content"),d.marginRight=t,console.log("这里有问题呀: ",t),console.log("relEles: ",p)}s.push({id:e.id,style:d,elements:p})}else if("column"!==e.parentFlexDirection&&e.parentFlexDirection){const d={display:"flex",flexDirection:e.flexDirection,marginTop:e.marginTop},p=this.transformComAry2(a,t,{com:o,parentCom:n});if(p.some((e=>e.style.flex))){"column"===e.flexDirection&&p.forEach((e=>{Reflect.deleteProperty(e.style,"flex")}));const t=e.width;let n;r.push(t),c+=t,l[r.length-1]=d,n=i?"row"===o.flexDirection?0:o.width-e.marginLeft-e.width:e.parentFlexDirection!==e.flexDirection?0:o.width-o.marginLeft-e.width-e.marginLeft,d.margin=`${e.marginTop}px ${n}px 0px ${e.marginLeft}px`}d.marginLeft=e.marginLeft,s.push({id:e.id,style:d,elements:p})}else{const i=this.transformComAry2(a.map(((t,o)=>Object.assign(Object.assign({},t),{marginTop:o?t.marginTop:t.marginTop+e.marginTop,marginLeft:t.marginLeft+e.marginLeft}))),t,{com:o,parentCom:n});s.push(...i)}}else{const a={display:"flex",flexDirection:e.flexDirection,marginTop:e.marginTop},d=e.elements[0],p=t[d.id],u=p.model.style;if(u.flexX){u.width="100%",Reflect.deleteProperty(u,"maxWidth");const t=p.style.width;let s;r.push(t),c+=t,l[r.length-1]=a,s=i?"row"===o.flexDirection?0:o.width-e.marginLeft-e.width:"row"===o.flexDirection&&"row"===n.flexDirection&&"row"===e.parentFlexDirection?0:o.width-o.marginLeft-e.width-e.marginLeft,a.margin=`${e.marginTop}px ${s}px 0px ${e.marginLeft}px`}else{let t;t=i?"row"===o.flexDirection?0:o.width-e.marginLeft-e.width:o.width-o.marginLeft-e.width-e.marginLeft,t===e.marginLeft?a.justifyContent="center":a.marginLeft=e.marginLeft}s.push({id:e.id,style:a,elements:e.elements})}})),r.length){const e=function(e){let t=Math.min(...e);for(;t>1;){let o=!0;for(let n=0;n<e.length;n++)if(e[n]%t!=0){o=!1;break}if(o)break;t--}return t}(r);r.forEach(((t,o)=>{l[o].flex=t/e}))}return s}traverseElementsToSlotComAry(e,t,o){const{comIdToSlotComMap:n}=this,i=[];return e.forEach((e=>{const{id:s,type:r,items:l,children:c,brother:a,style:d}=e;if(r)Reflect.deleteProperty(d,"width"),i.push({type:r,style:d,items:this.traverseElementsToSlotComAry(l,t,r)});else{if("brother"===o){const o=t[s].model.style;o.position="absolute",o.top=e.top,o.left=e.left}else{t[s].model.style.position="relative"}i.push(Object.assign(Object.assign({},n[s]),{children:this.traverseElementsToSlotComAry(c,t,"children"),brother:this.traverseElementsToSlotComAry(a,t,"brother")}))}})),i}traverseElementsToSlotComAry2(e,t){const{comIdToSlotComMap:o}=this,n=[];return e.forEach((e=>{const{id:i,elements:s,tempElements:r,marginLeft:l,marginTop:c,flexDirection:a,height:d,width:p}=e;if(Array.isArray(s))n.push(Object.assign(Object.assign({},e),{elements:this.traverseElementsToSlotComAry2(s,t)}));else if(Array.isArray(r))n.push(Object.assign(Object.assign({},e),{elements:this.traverseElementsToSlotComAry2(r,t)}));else{const e=t[i].model.style;e.position="relative",e.marginTop=c,e.marginLeft=l,n.push(o[i])}})),n}}class s{constructor(e,t){this.elements=e,this.config=t}getElements(){const{elements:e}=this,t=this.splitElements2(this.handleIntersectionsAndInclusions(e));return this.handleEleGroup(t,{top:0,left:0})}handleEleGroup(e,{top:t,left:o}){const n=[];let i=t,s=o;if(1===e.length){const t=e[0],o=Object.assign(Object.assign({},t),{marginTop:t.top-i,marginLeft:t.left-s});Array.isArray(t.elements)&&(o.elements=this.handleEleGroup(t.elements,{top:o.marginTop,left:o.marginLeft})),n.push(o)}else{let i=t,s=o;e.forEach((e=>{const t=Object.assign({},e),o=e.parentFlexDirection;t.marginLeft=e.left-s,t.marginTop=e.top-i,Array.isArray(e.elements)&&(t.elements=this.handleEleGroup(e.elements,{top:i+t.marginTop,left:s+t.marginLeft})),"row"===o?s=e.left+e.width:"column"===o&&(i=e.top+e.height),n.push(t)}))}return n}handleIntersectionsAndInclusions(e){return e}checkRightIntersects(e,t,o){const n=e.length;if(n&&1!==n){e.sort(((e,t)=>e.left-t.left));const n=e[0],i=e[1];return n.left+n.width>i.left?(o.rightEle=n,o.rightSpace=n.left-(t.left+t.width),!0):(o.rightEle=n,o.rightSpace=n.left-(t.left+t.width),!1)}{const n=e[0];return n&&(o.rightEle=n,o.rightSpace=n.left-(t.left+t.width)),!1}}checkBottomIntersects(e,t,o){const n=e.length;if(n&&1!==n){e.sort(((e,t)=>e.top-t.top));const n=e[0],i=e[1];return n.top+n.height>i.top?(o.bottomEle=n,o.bottomSpace=n.top-(t.top+t.height),!0):(o.bottomEle=n,o.bottomSpace=n.top-(t.top+t.height),!1)}{const n=e[0];return n&&(o.bottomEle=n,o.bottomSpace=n.top-(t.top+t.height)),!1}}checkTopIntersects(e,t,o){const n=e.length;if(n&&1!==n){e.sort(((e,t)=>t.top+t.height-(e.top+e.height)));const n=e[0],i=e[1];return i.top+i.height>n.top?(o.topEle=n,o.topSpace=t.top-(n.top+n.height),!0):(o.topEle=n,o.topSpace=t.top-(n.top+n.height),!1)}{const n=e[0];return n&&(o.topEle=n,o.topSpace=t.top-(n.top+n.height)),!1}}checkLeftIntersects(e,t,o){const n=e.length;if(n&&1!==n){e.sort(((e,t)=>t.left+t.width-(e.left+e.width)));const n=e[0],i=e[1];return i.left+i.width>n.left?(o.leftEle=n,o.leftSpace=t.left-(n.left+n.width),!0):(o.leftEle=n,o.leftSpace=t.left-(n.left+n.width),!1)}{const n=e[0];return n&&(o.leftEle=n,o.leftSpace=t.left-(n.left+n.width)),!1}}handleAdjacent(e){const t={},o={};return e.forEach((n=>{o[n.id]=n;const i=[],s=[];for(let o=0;o<e.length;o++){const r=e[o];if(t[r.id]||(t[r.id]={topEles:[],leftEles:[],rightEles:[],bottomEles:[]}),n.id!==r.id){const e=r.left>=n.left+n.width&&r.top>=n.top+n.height;if(e||r.left+r.width<=n.left||r.top+r.height<=n.top);else if(r.top>=n.top+n.height)s.push(r),t[r.id].topEles.push(n);else{const e=i.findIndex((({top:e,height:t})=>{const{top:o,height:n}=r;return o>=e&&o<e+t||o+n<=e+t&&o+n>e}));if(-1===e)i.push(r),t[r.id].leftEles.push(n);else{const o=i[e];if(r.left<o.left){i.splice(e,1,r),t[r.id].leftEles.push(n);const s=t[o.id].leftEles,l=s.findIndex((e=>e.id===n.id));-1!==l&&s.splice(l,1)}}}}}t[n.id].rightEles=i,t[n.id].bottomEles=s})),Object.entries(t).forEach((([e,t])=>{t.rightIntersect=this.checkRightIntersects(t.rightEles,o[e],t),t.bottomIntersect=this.checkBottomIntersects(t.bottomEles,o[e],t),t.topIntersect=this.checkTopIntersects(t.topEles,o[e],t),t.leftIntersect=this.checkLeftIntersects(t.leftEles,o[e],t)})),t}newSplitElements({elements:e,eleIdToInfo:t}){const o={bottomSpace:"bottomIntersect",topSpace:"topIntersect",leftSpace:"leftIntersect",rightSpace:"rightIntersect"},n={bottomSpace:"bottomEle",topSpace:"topEle",leftSpace:"leftEle",rightSpace:"rightEle"},i=[],s={};function r({ele:e,eleInfo:t,fEle:o,fEleInfo:n,direction:i}){let s,r,l={},c=!0;return"bottomSpace"===i?(s=[e,o],l[e.id]=0,l[o.id]=1,r=o.top-(e.top+e.height),c=!n.topIntersect):"bottomSpace"===i?(s=[o,e],l[o.id]=0,l[e.id]=1,r=e.top-(o.top+o.height),c=!n.topIntersect):"leftSpace"===i?(s=[o,e],l[o.id]=0,l[e.id]=1,r=e.left-(o.left+o.width),c=!n.rightIntersect):"rightSpace"===i&&(s=[e,o],l[e.id]=0,l[o.id]=1,r=o.left-(e.left+e.width),c=!n.leftIntersect),{eles:s,idxMap:l,space:r,comparable:c}}return e.forEach((e=>{const l=t[e.id],c=["rightSpace","bottomSpace","topSpace","leftSpace"].filter((e=>{if(l.hasOwnProperty(e))return!0})).sort(((e,t)=>l[e]-l[t]));if(c.length){let a=!1;const d=s[e.id];for(let p=0;p<c.length;p++){const u=c[p],f=l[o[u]],m=l[n[u]],g=s[m.id],h=t[m.id];if(!f)if(d)if(g){if(d.idx1===g.idx1){a=!0;break}{const{eles:t,idxMap:o,space:n,comparable:c}=r({ele:e,eleInfo:l,fEle:m,fEleInfo:h,direction:u});if(c&&n<g.space){console.log(`✅ 没有相交 间距更小 有-当前${e.id} 有-被对比${m.id}`),i[g.idx1].splice(g.idx2,1),i.push(t),s[e.id]={space:n,idx1:i.length-1,idx2:o[e.id]},s[m.id]={space:n,idx1:i.length-1,idx2:o[m.id]},a=!0;break}}}else{const{eles:t,idxMap:o,space:n,comparable:c}=r({ele:e,eleInfo:l,fEle:m,fEleInfo:h,direction:u});if(c&&n<d.space){console.log(`✅ 没有相交 间距更小 有-当前${e.id} 没有-被对比${m.id}`),i[d.idx1].splice(d.idx2,1),i.push(t),s[e.id]={space:n,idx1:i.length-1,idx2:o[e.id]},s[m.id]={space:n,idx1:i.length-1,idx2:o[m.id]},a=!0;break}}else if(g){const{eles:t,idxMap:o,space:n,comparable:c}=r({ele:e,eleInfo:l,fEle:m,fEleInfo:h,direction:u});if(c&&n<g.space){console.log(`✅ 没有相交 间距更小 没有-当前${e.id} 有-被对比${m.id}`),i[g.idx1].splice(g.idx2,1),i.push(t),s[e.id]={space:n,idx1:i.length-1,idx2:o[e.id]},s[m.id]={space:n,idx1:i.length-1,idx2:o[m.id]},a=!0;break}}else{console.log(`✅ 没有相交 没有-当前${e.id} 没有-被对比${m.id}`);const{eles:t,idxMap:o,space:n,comparable:c}=r({ele:e,eleInfo:l,fEle:m,fEleInfo:h,direction:u});if(c){i.push(t),s[e.id]={space:n,idx1:i.length-1,idx2:o[e.id]},s[m.id]={space:n,idx1:i.length-1,idx2:o[m.id]},a=!0;break}}}a||(console.log(`✅ 单独 ${e.id}`),i.push([e]),s[e.id]={idx1:i.length-1,idx2:0})}else i.push([e]),s[e.id]={idx1:i.length-1,idx2:0}})),i}splitElements2(e){const t=this.handleAdjacent(e.sort(((e,t)=>e.top===t.top?e.left-t.left:e.top-t.top))),o=this.newSplitElements({elements:e.sort(((e,t)=>e.top===t.top?e.left-t.left:e.top-t.top)),eleIdToInfo:t});let n=this.convertedToElements(o);if(e.length===n.length){let e=1/0,t=1/0,o=0,i=0,s="";const r=n.length-1;return n.forEach(((n,l)=>{s=s+n.id+""+(l===r?"":","),n.parentFlexDirection="column",n.top<t&&(t=n.top),n.left<e&&(e=n.left),n.top+n.height>o&&(o=n.top+n.height),n.left+n.width>i&&(i=n.left+n.width)})),[{id:s,flexDirection:"column",elements:n,top:t,left:e,height:o-t,width:i-e}]}return n.length>1?this.splitElements2(n):n}splitElements(e){const t=[],o={},n=this.handleAdjacent(e.sort(((e,t)=>e.top===t.top?e.left-t.left:e.top-t.top))),i=18===e.length&&!1;18===e.length&&this.newSplitElements({elements:e,eleIdToInfo:n}),i&&console.log("当前elements: ",e),i&&console.log("当前eleIdToInfo: ",n);const s={};Object.entries(n).forEach((([e,t])=>{s[e]=Object.assign(Object.assign({},t),{topEles:t.topEles.map((e=>e.id)),leftEles:t.leftEles.map((e=>e.id)),rightEles:t.rightEles.map((e=>e.id)),bottomEles:t.bottomEles.map((e=>e.id))})})),i&&console.log("easyIdToInfo: ",s),e.forEach((e=>{i&&console.log("当前id: ",e.id);const s=e.id,r=n[s],l=o[s];if(r.rightIntersect||r.bottomIntersect){if(i&&console.log(1),r.rightIntersect){i&&console.log(73,"右边相交 和下边比");const n=r.bottomEles.reduce(((e,t)=>e&&e.top<t.top?e:t),null);n?i&&console.log(87,"没处理"):(i&&console.log(88),l?i&&console.log(103,"没处理"):(i&&console.log(102),t.push([e]),o[e.id]={idx1:t.length-1,idx2:0}))}else if(r.bottomIntersect){i&&console.log(74,"下边相交 和右边比");const s=r.rightEles.reduce(((e,t)=>e&&e.left<t.left?e:t),null);if(s){i&&console.log(75);const r=o[s.id],c=n[s.id];if(l)i&&console.log(80,"没处理");else if(i&&console.log(79),r){i&&console.log(82);const n=s.left-(e.left+e.width);"number"!=typeof r.space?(i&&console.log(83,"没处理"),c.leftIntersect?(i&&console.log(94),t.push([e]),o[e.id]={idx1:t.length-1,idx2:0}):i&&console.log(95,"没有处理")):(i&&console.log(84),n<=r.space?(i&&console.log(85),t[r.idx1].splice(r.idx2,1),t[r.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t.push([e,s]),o[e.id]={space:n,idx1:t.length-1,idx2:0},o[s.id]={space:n,idx1:t.length-1,idx2:1}):i&&console.log(86,"没处理"))}else i&&console.log(81,"没处理")}else i&&console.log(76),l?i&&console.log(78,"没处理"):(i&&console.log(77),t.push([e]),o[e.id]={idx1:t.length-1,idx2:0})}}else if(r.rightIntersect&&r.bottomIntersect)console.log("两边都相交单独拆分");else{const s=r.rightEles.reduce(((e,t)=>e&&e.left<t.left?e:t),null),c=r.bottomEles.reduce(((e,t)=>e&&e.top<t.top?e:t),null);let a;if(s&&c)if(i&&console.log(1),s.left-(e.left+e.width)<c.top-(e.top+e.height)){i&&console.log(20),a=s;const r=n[a.id],c=o[a.id];if(l)if(i&&console.log(35),c)i&&console.log(39,`重点处理这里，有${e.id}, 有${a.id}`);else{i&&console.log(38);const n=a.left-(e.left+e.width);"number"!=typeof l.space?(t[l.idx1].splice(l.idx2,1),t[l.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t.push([e,a]),o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1}):(i&&console.log(105),n<l.space?i&&console.log(60,"还没处理"):(i&&console.log(61),t.push([a]),o[a.id]={idx1:t.length-1,idx2:0}))}else if(i&&console.log(34),c)if(i&&console.log(37),r.leftIntersect)if(i&&console.log(57),c){i&&console.log(59);const n=c.idx1,s=t[n];s.splice(c.idx2,1),t.push([a]),c.idx1=t.length-1,c.idx2=0;const r=s.findIndex((t=>t.top>=e.top+e.height));i&&console.log(e,JSON.parse(JSON.stringify(s))),0===r?s.unshift(e):-1===r?s.push(e):s.splice(r-1,0,e),s.forEach(((e,t)=>{o[e.id].idx2=t}))}else i&&console.log(58,"还没处理");else{i&&console.log(68);const n=a.left-(e.left+e.width);c.space?(i&&console.log(69),n<c.space?(i&&console.log(45),t[c.idx1].splice(c.idx2,1),t[c.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t.push([e,a]),o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1}):i&&console.log(42,"还没处理","间距更大")):(i&&console.log(70),t[c.idx1].splice(c.idx2,1),t[c.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t.push([e,a]),o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1})}else{i&&console.log(36),t.push([e,a]);const n=a.left-(e.left+e.width);o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1}}}else{i&&console.log(21),a=c;const s=n[a.id],r=o[a.id];if(l)if(i&&console.log(23),s.topIntersect)if(i&&console.log(24,"还没处理"),r){i&&console.log(26),t[l.idx1].splice(l.idx2,1),t[l.idx1].forEach(((e,t)=>{o[e.id].idx2=t}));const n=r.idx1,s=t[n];s.splice(r.idx2,1),t.push([a]),r.idx1=t.length-1,r.idx2=0;const c=s.findIndex((t=>t.left>=e.left+e.width));-1===c?console.log("出问题222"):0===c?s.unshift(e):s.splice(c-1,0,e),s.forEach(((e,t)=>{o[e.id].idx2=t}))}else i&&console.log(25,"还没处理");else if(i&&console.log(29),r)i&&console.log(50,"没处理");else{i&&console.log(49);const n=a.top-(e.top+e.height);n<l.space?(i&&console.log(51),t[l.idx1].splice(l.idx2),t[l.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t.push([e,a]),o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1}):i&&console.log(52,"没处理",`有${e.id} 没有${a.id}`)}else if(i&&console.log(22),r)if(i&&console.log(28),s.topIntersect)if(i&&console.log(30),r){i&&console.log(32);const n=r.idx1,s=t[n];s.splice(r.idx2,1),t.push([a]),r.idx1=t.length-1,r.idx2=0;const l=s.findIndex((t=>t.left>=e.left+e.width));-1===l?console.log("出问题111"):0===l?s.unshift(e):s.splice(l-1,0,e),s.forEach(((e,t)=>{o[e.id].idx2=t}))}else i&&console.log(31,"还没处理");else i&&console.log(33,"没有处理");else if(i&&console.log(27,e,a),s.topIntersect)i&&console.log(104),t.push([e]),o[e.id]={idx1:t.length-1,idx2:0};else{t.push([e,a]);const n=a.top-(e.top+e.height);o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1}}}else if(s){i&&console.log(2),a=s;const r=o[a.id],c=n[a.id];if(l)if(i&&console.log(6),c.leftIntersect)i&&console.log(66,"左边相交的，被对比本来就是单独一行");else{i&&console.log(67);const n=a.left-(e.left+e.width);if("number"==typeof l.space)i&&console.log(62),n<l.space?(i&&console.log(7),r?(i&&console.log(48),t[l.idx1].splice(l.idx2,1),t[l.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t[r.idx1].splice(r.idx2,1),t[r.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t.push([e,a]),o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1}):(i&&console.log(47,"还没处理","有",e.id,"没有",a.id),t[l.idx1].splice(l.idx2,1),t[l.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t.push([e,a]),o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1})):(i&&console.log(8),r?i&&console.log(10,"还没处理",`有当前${e.id}，有对比${a.id}`):(i&&console.log(9),t.push([a]),o[a.id]={space:n,idx1:t.length-1,idx2:0}));else if(i&&console.log(63),r)i&&console.log(65,"没有处理");else{i&&console.log(64);const e=l.idx1;t[e].push(a),l.space=n,o[a.id]={space:n,idx1:e,idx2:t[e].length-1}}}else if(i&&console.log(3),r){i&&console.log(5);const n=a.left-(e.left+e.width);if("number"!=typeof r.space)i&&console.log(46),t[r.idx1].splice(r.idx2,1),t[r.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t.push([e,a]),o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1};else if(i&&console.log(52),c.leftIntersect)if(i&&console.log(53,"重点看这里",c,a.id),r){i&&console.log(56);const n=r.idx1,s=t[n];s.splice(r.idx2,1),t.push([a]),r.idx1=t.length-1,r.idx2=0;const l=s.findIndex((t=>t.top>=e.top+e.height));i&&console.log(e,JSON.parse(JSON.stringify(s))),0===l?s.unshift(e):-1===l?s.push(e):s.splice(l-1,0,e),s.forEach(((e,t)=>{o[e.id].idx2=t}))}else i&&console.log(55,"还没处理");else i&&console.log(54),n<r.space?(i&&console.log(40),t[r.idx1].splice(r.idx2,1),t[r.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t.push([e,a]),o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1}):(i&&console.log(41,"还没处理",`没有${e.id}， 有${a.id}`,r.space),t.push([e]),o[e.id]={idx1:t.length-1,idx2:0})}else{i&&console.log(4),t.push([e,a]);const n=a.left-(e.left+e.width);o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1}}}else if(c){i&&console.log(11),a=c;const s=o[a.id];n[a.id];if(l){i&&console.log(15);const n=a.top-(e.top+e.height);if(n<l.space)if(s)i&&console.log(89,"没有处理");else if(i&&console.log(16),"number"!=typeof l.space)i&&console.log(90,"没有处理");else{i&&console.log(91);const n=a.top-(e.top+e.height);n<l.space?(i&&console.log(92),t[l.idx1].splice(l.idx2),t[l.idx1].forEach(((e,t)=>{o[e.id].idx2=t})),t.push([e,a]),o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1}):i&&console.log(93,"还没处理")}else i&&console.log(7),s?i&&console.log(19,"还有处理"):(i&&console.log(18),t.push([a]),o[a.id]={space:n,idx1:t.length-1,idx2:0})}else if(i&&console.log(12),s)i&&console.log(14,"还没处理");else if(i&&console.log(13,e.id,a.id),r.leftIntersect)i&&console.log(71,"注意观察"),t.push([e]),o[e.id]={idx1:t.length-1,idx2:0},t.push([a]),o[a.id]={idx1:t.length-1,idx2:0};else{i&&console.log(72),t.push([e,a]);const n=a.top-(e.top+e.height);o[e.id]={space:n,idx1:t.length-1,idx2:0},o[a.id]={space:n,idx1:t.length-1,idx2:1}}}else i&&console.log("什么也没有",e.id),l||(t.push([e]),o[e.id]={idx1:t.length-1,idx2:0})}})),(i||18===e.length)&&console.log("eleGroup 结果: ",t.map((e=>e.map((e=>e.id))))),i&&console.log("eleIdToPosition 位置信息: ",o);let r=this.convertedToElements(t);return 1===r.length?r:(t.length,e.length,this.splitElements(r))}convertedToElements(e){const t=[];return e.forEach((e=>{const o=e.length;if(o)if(1===o){const o=e[0];o.flexDirection||o.tempElements?t.push(o):t.push(Object.assign(Object.assign({},o),{tempElements:[o]}))}else if(o>1){let o,n,i,s,r,l=0,c=0;e.forEach((e=>{("number"!=typeof o||o>e.top)&&(o=e.top),("number"!=typeof n||n>e.left)&&(n=e.left),("number"!=typeof i||i<e.width+e.left)&&(i=e.width+e.left),("number"!=typeof s||s<e.height+e.top)&&(s=e.height+e.top),e.top>=c?r="column":e.left>=l&&(r="row"),l=e.left+e.width,c=e.top+e.height})),t.push({id:e.map((e=>e.id)).join(),top:o,left:n,width:i-n,height:s-o,flexDirection:r||"column",elements:e.map((e=>e.flexDirection||e.tempElements?Object.assign(Object.assign({},e),{parentFlexDirection:r||"column"}):Object.assign(Object.assign({},e),{parentFlexDirection:r||"column",tempElements:[e]})))})}})),t}}},359:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__359__},318:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__318__},147:e=>{"use strict";e.exports=JSON.parse('{"u2":"@mybricks/render-web","i8":"1.2.46"}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__(130);return __webpack_exports__})()));