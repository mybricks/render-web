!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports._mybricks_render_web=t(require("react"),require("react-dom")):e._mybricks_render_web=t(e.React,e.ReactDOM)}(this,((__WEBPACK_EXTERNAL_MODULE__359__,__WEBPACK_EXTERNAL_MODULE__318__)=>(()=>{var __webpack_modules__={21:function(module,__unused_webpack_exports,__webpack_require__){var t;t=__WEBPACK_EXTERNAL_MODULE__359__=>(()=>{"use strict";var __webpack_modules__={356:(__unused_webpack_module,__nested_webpack_exports__,__nested_webpack_require_406__)=>{function __WEBPACK_DEFAULT_EXPORT__({data,outputs,inputs,onError}){inputs.from(((val,relOutpus)=>{var _a;const script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){let fn,returnVal,isOk;try{eval(`fn = ${script}`),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError(`数据转换错误:${e.message}`,e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__nested_webpack_require_406__.d(__nested_webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__})},359:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__359__}},__webpack_module_cache__={};function __nested_webpack_require_963__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__nested_webpack_require_963__),n.exports}__nested_webpack_require_963__.d=(e,t)=>{for(var n in t)__nested_webpack_require_963__.o(t,n)&&!__nested_webpack_require_963__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_963__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__nested_webpack_require_963__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};return(()=>{__nested_webpack_require_963__.r(__nested_webpack_exports__),__nested_webpack_require_963__.d(__nested_webpack_exports__,{default:()=>p,getCom:()=>f});const e=JSON.parse('{"title":"Fn计算","namespace":"mybricks.core-comlib.fn","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"Fn计算","icon":"./icon.png","runtime":"./Fn.tsx","rtType":"js","visibility":false}'),t=JSON.parse('{"visibility":false,"title":"变量","namespace":"mybricks.core-comlib.var","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"变量","icon":"./icon.png","data":"./data.json","runtime":"./Var.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"get","title":"读取","schema":{"type":"any"},"rels":["return"]},{"id":"set","title":"赋值","schema":{"type":"follow"},"rels":["return"]},{"id":"reset","title":"重置","schema":{"type":"any"}}],"outputs":[{"id":"return","title":"完成","schema":{"type":"unknown"}},{"id":"changed","title":"当值发生变化","schema":{"type":"unknown"}}]}');function n(e){if(e&&"object"==typeof e)try{return e instanceof FormData?e:JSON.parse(JSON.stringify(e))}catch(t){return e}return e}const o=JSON.parse('{"title":"类型转换","visibility":false,"namespace":"mybricks.core-comlib.type-change","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"类型转换","icon":"./icon.png","runtime":"./rt.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"from","title":"从","schema":{"type":"follow"},"rels":["to"]}],"outputs":[{"id":"to","title":"到","schema":{"type":"follow"},"conMax":1,"editable":true}]}');var r=__nested_webpack_require_963__(356);const s=JSON.parse('{"deprecated":true,"visibility":false,"title":"连接器","namespace":"mybricks.core-comlib.connector","author":"MyBricks","author_name":"MyBricks","version":"1.0.0","description":"连接器","runtime":"./runtime.ts","editors":"./editors.tsx","icon":"./icon.svg","rtType":"js-autorun","inputs":[{"id":"call","rels":["then","catch"],"title":"调用","schema":{"type":"object"}}],"outputs":[{"id":"then","title":"结果","schema":{"type":"unknown"}},{"id":"catch","title":"发生错误","schema":{"type":"string"}}]}');function i({env:e,data:t,outputs:n,onError:o},r={}){if(t.connector)try{e.callConnector(t.connector,r,t.connectorConfig).then((e=>{n.then(e)})).catch((e=>{n.catch(e)}))}catch(e){console.error(e),n.catch(`执行错误 ${e.message||e}`)}else n.catch("没有选择接口")}const c=JSON.parse('{"visibility":false,"title":"作用域输入","namespace":"mybricks.core-comlib.frame-input","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"作用域输入","rtType":"js","runtime":"./runtime.ts","editors":"./editor.tsx","inputs":[{"id":"getCurValue","title":"获取","schema":{"type":"any"},"rels":["return"]}],"outputs":[{"id":"return","title":"结果","schema":{"type":"follow"}}]}'),a=JSON.parse('{"visibility":false,"title":"打开对话框","namespace":"mybricks.core-comlib.scenes","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"切换场景","icon":"./icon.png","runtime":"./runtime.ts","data":"./data.json","rtType":"js","inputs":[{"id":"open","title":"打开","schema":{"type":"any"}}]}'),l=JSON.parse('{"title":"模块","namespace":"mybricks.core-comlib.module","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"模块","icon":"./icon.png","data":"./data.json","runtime":"./runtime.ts","editors":"./editors.ts"}');var u=__nested_webpack_require_963__(359);const d={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[m({comDef:e,rt:function({inputs:e,outputs:t}){}}),m({comDef:t,rt:function({env:e,data:t,outputs:o,inputs:r,_notifyBindings:s}){r.get(((e,o)=>{const r=n(void 0!==t.val?t.val:t.initValue);o.return(r)})),r.set(((e,r)=>{t.val=e;const i=n(e);o.changed(i,!0),s(i),r.return(i)})),r.reset((()=>{const e=t.initValue;t.val=e;const r=n(e);o.changed(r,!0),s(r)}))}}),m({comDef:o,rt:r.Z}),m({comDef:s,rt:function({env:e,data:t,inputs:n,outputs:o,onError:r}){e.runtime&&(t.immediate?i({env:e,data:t,outputs:o}):n.call((n=>{i({env:e,data:t,outputs:o,onError:r},n)})))}}),m({comDef:c,rt:function({env:e,data:t,inputs:n,outputs:o}){e.runtime&&n.getCurValue(((e,t)=>{t.return(e)}))}}),m({comDef:a,rt:function({env:e,data:t,inputs:n,_inputs:o,_inputsCallable:r}){n.open((n=>{e.canvas.open(t._sceneId,n,"popup"===t._sceneShowType?null:t.openType),r._open(n)}))}}),m({comDef:l,rt:function({env:e,data:t,inputs:n,outputs:o}){const[r,s]=(0,u.useState)(),i=(0,u.useMemo)((()=>{const r=e.getModuleJSON(t.definedId);return e.renderModule(r,{ref(t){if(s(t),e.runtime){const{inputs:e,outputs:s}=r;e.forEach((({id:e})=>{n[e]((n=>{t.inputs[e](n)}))})),s.forEach((({id:e})=>{t.outputs(e,o[e])}))}t.run()},disableAutoRun:!0})}),[]);return(0,u.useMemo)((()=>{if(r){const e=t.configs;for(let t in e)r.inputs[t](e[t])}}),[Object.assign({},t.configs),r]),i}})]},p=d;function f(e){return d.comAray.find((t=>t.namespace===e))}function m({comDef:e,rt:t,data:n}){return Object.assign(e,{runtime:t,data:n})}})(),__nested_webpack_exports__})(),module.exports=t(__webpack_require__(359))},526:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(601),r=n.n(o),s=n(609),i=n.n(s)()(r());i.push([e.id,".debugger-c41e2 {\n  width: 100%;\n  height: 100%;\n  background-color: #1b1b1b73;\n}\n.debugger-c41e2 .titlebar-ba70c {\n  font-size: 12px;\n  line-height: 23px;\n  position: absolute;\n  top: 10%;\n  height: 23px;\n  padding: 0px 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  align-items: center;\n  background-color: #faf8df;\n}\n.debugger-c41e2 .titlebar-ba70c .resume-e5932 {\n  display: flex;\n  padding-left: 4px;\n  cursor: pointer;\n}\n.debugger-c41e2 .titlebar-ba70c .resume-e5932 svg path {\n  fill: #FA6400;\n}\n",""]),i.locals={debugger:"debugger-c41e2",titlebar:"titlebar-ba70c",resume:"resume-e5932"};const c=i},998:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(601),r=n.n(o),s=n(609),i=n.n(s)()(r());i.push([e.id,".error-c0f46 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n  white-space: pre-wrap;\n}\n",""]),i.locals={error:"error-c0f46"};const c=i},942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(601),r=n.n(o),s=n(609),i=n.n(s)()(r());i.push([e.id,"@keyframes slipInto-fb013 {\n  0% {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n.main-a6e42 {\n  animation: slipInto-fb013 0.1s ease-in-out 1;\n}\n",""]),i.locals={main:"main-a6e42",slipInto:"slipInto-fb013"};const c=i},432:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(601),r=n.n(o),s=n(609),i=n.n(s)()(r());i.push([e.id,".container-ff9f5 {\n  position: fixed;\n  right: 20px;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  z-index: 9999;\n}\n.container-ff9f5 .itemWrap-a3069 {\n  position: relative;\n}\n.container-ff9f5 .item-c8a43 {\n  padding: 16px;\n  background-color: #fff;\n  margin-bottom: 8px;\n  border-radius: 4px;\n  max-width: 50vw;\n  max-height: 50vh;\n  overflow: auto;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05);\n  font-size: 12px;\n}\n.container-ff9f5 .errorItem-e6fc8 {\n  color: #f5222d;\n}\n.container-ff9f5 .closeIcon-c5e91 {\n  position: absolute;\n  right: 16px;\n  top: 16px;\n  width: 24px;\n  height: 24px;\n  padding: 2px;\n  cursor: pointer;\n}\n.container-ff9f5 .closeIcon-c5e91:hover {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.12);\n}\n",""]),i.locals={container:"container-ff9f5",itemWrap:"itemWrap-a3069",item:"item-c8a43",errorItem:"errorItem-e6fc8",closeIcon:"closeIcon-c5e91"};const c=i},644:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(601),r=n.n(o),s=n(609),i=n.n(s)()(r());i.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.slot-ced90 {\n  width: 100%;\n  height: 100% !important;\n  position: relative;\n}\n.lyFlexColumn-f7fd6 {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-c8e04 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-b95f6 {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-e1ca1 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-ef832 {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-ad880 {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-a2f09 {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-a8880 {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-c6d62 {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-d7b4c {\n  align-items: flex-end;\n}\n.debugFocus-def53 {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-f9041 {\n  flex-shrink: 0;\n}\n.flex-ca980 {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-ca980 > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-ca980 > * {\n  height: 100%;\n}\n.error-d4d00 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-e9378 {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-e9378 .tt-d634d {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-e9378 .info-d57d6 {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),i.locals={slot:"slot-ced90",lyFlexColumn:"lyFlexColumn-f7fd6",lyFlexRow:"lyFlexRow-c8e04",justifyContentFlexStart:"justifyContentFlexStart-b95f6",justifyContentFlexCenter:"justifyContentFlexCenter-e1ca1",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-ef832",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-ad880",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-a2f09",alignItemsFlexStart:"alignItemsFlexStart-a8880",alignItemsFlexCenter:"alignItemsFlexCenter-c6d62",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-d7b4c",debugFocus:"debugFocus-def53",com:"com-f9041",flex:"flex-ca980",error:"error-d4d00",errorRT:"errorRT-e9378",tt:"tt-d634d",info:"info-d57d6"};const c=i},609:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var c=0;c<this.length;c++){var a=this[c][0];null!=a&&(i[a]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);o&&i[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},683:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var o=n(62),r=n.n(o),s=n(36),i=n.n(s),c=n(892),a=n.n(c),l=n(173),u=n.n(l),d=n(464),p=n.n(d),f=n(526),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var y,g=0,v={};v.styleTagTransform=p(),v.setAttributes=a(),v.insert=function(e,t){(t.target||document.head).appendChild(e)},v.domAPI=i(),v.insertStyleElement=u(),m.use=function(e){return v.options=e||{},g++||(y=r()(f.Z,v)),m},m.unuse=function(){g>0&&! --g&&(y(),y=null)};const _=m},490:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var o=n(62),r=n.n(o),s=n(36),i=n.n(s),c=n(892),a=n.n(c),l=n(173),u=n.n(l),d=n(464),p=n.n(d),f=n(998),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var y,g=0,v={};v.styleTagTransform=p(),v.setAttributes=a(),v.insert=function(e,t){(t.target||document.head).appendChild(e)},v.domAPI=i(),v.insertStyleElement=u(),m.use=function(e){return v.options=e||{},g++||(y=r()(f.Z,v)),m},m.unuse=function(){g>0&&! --g&&(y(),y=null)};const _=m},650:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var o=n(62),r=n.n(o),s=n(36),i=n.n(s),c=n(892),a=n.n(c),l=n(173),u=n.n(l),d=n(464),p=n.n(d),f=n(942),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var y,g=0,v={};v.styleTagTransform=p(),v.setAttributes=a(),v.insert=function(e,t){(t.target||document.head).appendChild(e)},v.domAPI=i(),v.insertStyleElement=u(),m.use=function(e){return v.options=e||{},g++||(y=r()(f.Z,v)),m},m.unuse=function(){g>0&&! --g&&(y(),y=null)};const _=m},759:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var o=n(62),r=n.n(o),s=n(36),i=n.n(s),c=n(892),a=n.n(c),l=n(173),u=n.n(l),d=n(464),p=n.n(d),f=n(432),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var y,g=0,v={};v.styleTagTransform=p(),v.setAttributes=a(),v.insert=function(e,t){(t.target||document.head).appendChild(e)},v.domAPI=i(),v.insertStyleElement=u(),m.use=function(e){return v.options=e||{},g++||(y=r()(f.Z,v)),m},m.unuse=function(){g>0&&! --g&&(y(),y=null)};const _=m},232:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var o=n(62),r=n.n(o),s=n(36),i=n.n(s),c=n(892),a=n.n(c),l=n(173),u=n.n(l),d=n(464),p=n.n(d),f=n(644),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var y,g=0,v={};v.styleTagTransform=p(),v.setAttributes=a(),v.insert=function(e,t){(t.target||document.head).appendChild(e)},v.domAPI=i(),v.insertStyleElement=u(),m.use=function(e){return v.options=e||{},g++||(y=r()(f.Z,v)),m},m.unuse=function(){g>0&&! --g&&(y(),y=null)};const _=m},62:e=>{"use strict";var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var s={},i=[],c=0;c<e.length;c++){var a=e[c],l=o.base?a[0]+o.base:a[0],u=s[l]||0,d="".concat(l," ").concat(u);s[l]=u+1;var p=n(d),f={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var m=r(f,o);o.byIndex=c,t.splice(c,0,{identifier:d,updater:m,references:1})}i.push(d)}return i}function r(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var s=o(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<s.length;i++){var c=n(s[i]);t[c].references--}for(var a=o(e,r),l=0;l<s.length;l++){var u=n(s[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=a}}},173:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},892:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},36:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},464:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},901:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(358),r=n(599),s=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};const i="_rootFrame_";function c(e,{observable:t}){const{json:n,getComDef:c,env:a,ref:l,onError:u,logger:d,debug:p,debugLogger:f}=e,m=a._context,y=e.scenesOperate||a.scenesOperate,{slot:g,coms:v={},comsAutoRun:_={},cons:h=[],pinRels:b={},pinProxies:x={},pinValueProxies:w={},type:I}=n,j=a,E={},k={},O={},C={},S={};Object.keys(h).forEach((e=>{const t=h[e],{startPinParentKey:n}=t[0];n&&(S[n]=e)}));const P={},R={},T={};function A(e,t,s){if("com"===e){const{com:e,pinHostId:i,val:c,fromCon:a,notifyAll:l,comDef:u,conId:d}=t;f?f("com","output",{id:e.id,pinHostId:i,val:(0,r.Am)(c),fromCon:a,notifyAll:l,comDef:u,sceneId:n.id,conId:d},s):(0,o.J2)(e.title,u,i,c)}else if("frame"===e){const{comId:e,frameId:o,pinHostId:i,val:c,sceneId:a,conId:l}=t;f&&f("frame","output",{comId:e,frameId:o,pinHostId:i,val:(0,r.Am)(c),sceneId:a||n.id,conId:l},s)}}function M(e,t){const{com:s,pinHostId:i,val:c,frameKey:a,finishPinParentKey:l,comDef:u,conId:d}=e;f?f("com","input",{id:s.id,pinHostId:i,val:(0,r.Am)(c),frameKey:a,finishPinParentKey:l,comDef:u,sceneId:n.id,conId:d},t):(0,o.Wg)(s.title,u,i,c)}function F(e,t,n,o,c,a){function l(e,t,n){var o,s;const i=x[e.comId+"-"+e.pinId];if(i){if(T[`${i.frameId}-${i.pinId}`]=n,c&&c.finishPinParentKey!==e.startPinParentKey)return;if("frame"===i.type){const o=$(e.comId,t);let s;s={id:(0,r.Vj)(10,16),frameId:i.frameId,parent:t,proxyComProps:o};const c="mybricks.core-comlib.frame-output"===e.def.namespace;c&&t&&(i.frameId=t.proxyComProps.id,s=t.parent);if("mybricks.core-comlib.fn"===e.def.namespace){const{configs:e}=o.data;e&&Object.entries(e).forEach((([e,t])=>{const{frameId:n,comId:o,pinId:r}=i,c=h[(o?`${o}-${n}`:`${n}`)+"-"+e];c&&F(null,c,t,s)}))}return K({options:i,value:n,scope:s,comProps:o}),void(c||B({frameId:i.frameId,scope:s}))}}if("com"===e.type)c?c.finishPinParentKey===e.startPinParentKey&&Z(e,n,t):Z(e,n,t);else{if("frame"!==e.type)throw new Error("尚未实现");if(c&&c.finishPinParentKey!==e.startPinParentKey)return;if(e.comId){if("inner-input"===e.direction){const r=k[e.comId+"-"+e.frameId+"-"+((null===(o=null==t?void 0:t.parent)||void 0===o?void 0:o.id)?t.parent.id+"-":"")+e.pinId];r&&r(n)}else if("inner-output"===e.direction&&"joint"===e.pinType){const t=h[e.comId+"-"+e.frameId+"-"+e.pinId];t&&F(null,t,n)}}else{const o=null==t?void 0:t.proxyComProps;if(o){const r=o.outputs[e.pinId];if(r)return void r(n,t.parent)}null===(s=C[e.pinId])||void 0===s||s.call(C,n)}}}t.forEach((t=>s(this,void 0,void 0,(function*(){const{comId:r,pinId:s,pinType:c,timerPinInputId:u}=t,d=v[r];if(!p||!t.isIgnored)if(p&&"module"!==I&&m.hasBreakpoint(t)?yield m.wait(t,(()=>{e&&(e[1].conId=t.id,A(...e,!0))})):A(...e),"timer"===c)f({value:n});else{const{isReady:e,isMultipleInput:t,pinId:i,value:c,cb:a}=function({pinId:e,value:t,component:o}){let s=e,i=t,c=!0;const a=e.indexOf(".");if(o&&-1!==a){const{inputs:t}=o;s=e.substring(0,a);const l=e.substring(a+1);let u=P[r];u||(u=P[r]={}),u[l]=n;const d=new RegExp(`${s}.`),p=t.filter((e=>!!e.match(d)));Object.keys(u).length===p.length?i=u:c=!1}let l=s!==e;return{pinId:s,value:i,isReady:c,isMultipleInput:l,cb:l?()=>{Reflect.deleteProperty(P,r)}:null}}({pinId:s,value:n,component:d});if(e){const e={pinId:t?i:null,value:c};if(u){const t=o?u+"-"+o.id:u,n=R[t];if(n){const{ready:o,todo:r}=n;if(o){let n=!1;Object.entries(r).forEach((([t,o])=>{t===i?(f(e),n=!0):o()})),n||f(e),null==a||a(),Reflect.deleteProperty(R,t)}else r[i]=()=>{null==a||a(),f(e)}}else R[t]={ready:!1,todo:{[i]:()=>{null==a||a(),f(e)}}}}else null==a||a(),f(e)}}function f({pinId:e,value:n}){let r=o;const s=e?Object.assign(Object.assign({},t),{pinId:e}):t;if(a){const e=s.frameKey;if(!e)throw new Error("数据异常，请检查toJSON结果.");if(e===i)l(s,{},n);else{const t=e.split("-");if(t.length>=2){const e=L(t[0],t[1],r,a);e.curScope?(e.curScope!==r&&(r=e.curScope),l(s,r,n)):e.pushTodo((e=>{e!==r&&(r=e),l(s,r,n)}))}}}else{const e=s.frameKey.split("-");if(e.length>=2&&!r){const t=L(e[0],e[1],null,!1);if("scope"===(null==t?void 0:t.type)&&!(null==t?void 0:t.curScope))return void t.pushTodo((e=>{e!==r&&(r=e),l(s,r,n)}))}l(s,r,n)}}}))))}function $(e,n){var o;const r=v[e];if(!r)return null;const s=e+(r.frameId||i);let l,f=E[s];f||(f=E[s]={});let m=n;for(!m&&r.parentComId&&r.frameId&&(m=null===(o=E[`${r.parentComId}-${r.frameId}`])||void 0===o?void 0:o.curScope);m;){const t=m.id+"-"+e;if(m.frameId===r.frameId){l=m.id;const e=f[t];if(e)return e;{const e=m.parentComId;if(!e)break;if(e===r.paramId||e===r.parentComId)break}}m=m.parent}const g=(l?l+"-":"")+e,_=f[g];if(_)return _;const w=r.def,I=r.model,j=JSON.parse(JSON.stringify(I.data)),k=JSON.parse(JSON.stringify(I.style));k.__model_style__=!0;const O={},C={},S={},P={},R=function(e){return new Proxy({},{ownKeys:e=>r.inputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(t,n)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const o=null==e?void 0:e.inputs;if(o){const e=o[n];"function"==typeof e&&e(t)}O[n]=t;const r=C[n];r&&(r.forEach((({val:e,fromCon:n,fromScope:o})=>{t(e,new Proxy({},{get:(e,t)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;const r=D()[t];if("function"!=typeof r)throw new Error(`outputs.${t} not found`);r(e,o||m,n)}}))})),C[n]=void 0)}})},M=new Proxy({},{get:(t,o)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const r=b[e+"-"+o];if(r){const s={},i={};return r.forEach((e=>{s[e]=t=>{i[e]=t}})),Promise.resolve().then((()=>{Z({comId:e,def:w,pinId:o},t,n,i)})),s}Z({comId:e,def:w,pinId:o},t,n)}}),N=new Proxy({},{get:(t,n)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const o=x[e+"-"+n];o&&(null==y||y.inputs(Object.assign(Object.assign({},o),{value:t,parentScope:K})))}}),D=function(t){return new Proxy({},{ownKeys:e=>r.outputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(o,s,i){const l=function(o,i,l,u){if("[object Symbol]"===Object.prototype.toString.call(s))return;const d="boolean"==typeof i&&i;if(r.global&&d&&!u)return void(null==y||y.exeGlobalCom({com:r,value:o,pinId:s}));const p=arguments,f=null==t?void 0:t.outputs;if(f){const e=f[s];"function"==typeof e&&e(o)}let m;i&&"object"==typeof i&&(m=i);const g=c(w),v=I.outputEvents;let _;if(v){const t=v[s];if(t&&Array.isArray(t)){const n=t.find((e=>e.active));if(n){const{type:t}=n;switch(t){case"none":_=[];break;case"fx":const r=x[e+"-"+s];if("frame"===(null==r?void 0:r.type)){const e=`${r.frameId}-${r.pinId}`;_=h[e]||[],T[e]=o}else _=[];break;case"defined":break;default:if(_=[],Array.isArray(null==a?void 0:a.events)){const e=a.events.find((e=>{if(e.type===t)return e}));e&&"function"==typeof e.exe&&e.exe({options:n.options})}}}}}_=_||h[e+"-"+s],(null==_?void 0:_.length)?p.length>=3?F(["com",{com:r,pinHostId:s,val:o,fromCon:l,notifyAll:d,comDef:g}],_,o,m,l):F(["com",{com:r,pinHostId:s,val:o,fromCon:l,notifyAll:d,comDef:g}],_,o,m||n,l,d):A("com",{com:r,pinHostId:s,val:o,fromCon:l,notifyAll:d,comDef:g})};return l.getConnections=()=>h[e+"-"+s]||[],l}})},L=new Proxy({},{get:(e,t,n)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;S[t]=e;const n=P[t];n&&(n.forEach((t=>{e(t)})),P[t]=void 0)}}),B=new Proxy({},{get:(t,o,s)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const s=h[e+"-"+o];s?F(["com",{com:r,pinHostId:o,val:t,comDef:w}],s,t,n):A("com",{com:r,pinHostId:o,val:t,comDef:w})}});const K={id:r.id,title:r.title,frameId:r.frameId,parentComId:r.parentComId,data:t(j),style:t(k),_inputRegs:O,addInputTodo:(e,t,n,o)=>{let r=C[e];r||(C[e]=r=[]),r.push({val:t,fromCon:n,fromScope:o})},inputs:R(),inputsCallable:M,_inputsCallable:N,outputs:D(),_inputs:L,_outputs:B,clone(e){const t={inputs:R(e),outputs:D(e)};return Object.setPrototypeOf(t,this),t},_notifyBindings:function(e){if(r.global)return void(null==y||y._notifyBindings(e,r));const{bindingsTo:t}=r.model;if(t)for(let n in t){const o=$(n);if(o){const r=t[n];Array.isArray(r)&&r.forEach((t=>{let n=o;const r=t.split(".");r.forEach(((t,o)=>{o!==r.length-1?n=n[t]:n[t]=e}))}))}}},logger:d,onError:p?t=>u({comId:e,error:t}):u};return f[g]=K,K}function N(e,t){let n=T[`${e}${t?`-${t.id}-${t.frameId}`:""}`];return void 0===n&&(null==t?void 0:t.parent)&&(n=N(e,t.parent)),n}function Z(e,t,n,o){var r;const{comId:s,def:i,pinId:a,pinType:l,frameKey:f,finishPinParentKey:m,timerPinInputId:g}=e;if("ext"===l){const o=E[s]||$(s,n);if("show"===a)o.style.display="";else if("hide"===a)o.style.display="none";else if("showOrHide"===a){const e=o.style;void 0===t?"none"===e.display?e.display="":e.display="none":e.display=t?"":"none"}const r=c(i);M({com:o,val:t,pinHostId:a,frameKey:f,finishPinParentKey:m,comDef:r,conId:e.id})}else if("config"===l){const o=$(s,n),r=c(i);M({com:o,pinHostId:a,val:t,frameKey:f,finishPinParentKey:m,comDef:r,conId:e.id});const{extBinding:l}=e,u=l.split(".");let d=o;u.forEach(((e,n)=>{n!==u.length-1?d=d[e]:d[e]=t}))}else if("timer"===l){const o=$(s,n),r=c(i);M({com:o,pinHostId:a,val:t,frameKey:f,finishPinParentKey:m,comDef:r,conId:e.id});const l=n?g+"-"+n.id:g,u=R[l];if(u){const{todo:e}=u;Object.entries(e).forEach((([e,t])=>t())),Reflect.deleteProperty(R,l)}else R[l]={ready:!0,todo:{}}}else if(null===(r=i.rtType)||void 0===r?void 0:r.match(/^js/gi)){const o=v[s];if(o){const r=$(s,n),l=c(i);if(o.global){const e=null==y?void 0:y.getGlobalComProps(s);e&&(r.data=e.data)}const g=null==n?void 0:n.id,v=(g?g+"-":"")+s;o.inputs.find((e=>e===a))?M({com:o,val:t,pinHostId:a,frameKey:f,finishPinParentKey:m,comDef:l,conId:e.id}):Object.entries(t).forEach((([t,n])=>{M({com:o,val:n,pinHostId:`${a}.${t}`,frameKey:f,finishPinParentKey:m,comDef:l,conId:e.id})})),O[v]||(O[v]=!0,l.runtime({env:j,data:r.data,inputs:r.inputs,outputs:r.outputs,_notifyBindings:r._notifyBindings,_inputsCallable:r._inputsCallable,logger:d,onError:p?e=>u({comId:s,error:e}):u}));const _=r._inputRegs[a];"function"==typeof _&&_(t,new Proxy({},{get:(t,o)=>function(t){if("[object Symbol]"!==Object.prototype.toString.call(o)){if(w){const e=w[`${s}-${a}`];e&&void 0===(t=N(`${f}-${e.pinId}`,n))&&(t=N(`${f}-${e.pinId}`,null))}r.outputs[o](t,n,e)}}}))}}else{const r=$(s,n);if(!r)return;const l=c(i);M({com:r,pinHostId:a,val:t,frameKey:f,finishPinParentKey:m,comDef:l,conId:e.id});const u=r._inputRegs[a];if("function"==typeof u){let s;s=o||new Proxy({},{get:(t,o)=>function(t){"[object Symbol]"!==Object.prototype.toString.call(o)&&r.outputs[o](t,n,e)}}),u(t,s)}else r.addInputTodo(a,t,e,n)}if(m){const e=h[S[m]];e&&!b[`${s}-${a}`]&&F(null,e,void 0)}}function D(e,t){let n;return(null==e?void 0:e.comAry)&&e.comAry.find((e=>{if(e.id===t)return n=e,e;if(e.slots)for(let o in e.slots)if(n=D(e.slots[o],t),n)return n})),n}function L(e,t,n,o){let r=e+"-"+t+(n?`-${n.id}`:""),s=E[r];if(o&&!s&&(s=E[Object.keys(E).find((e=>e.startsWith(r)))]),!s){const o=D(g,e);if(!(null==o?void 0:o.slots))return null;const i=null==o?void 0:o.slots[t],c={};let a;if(n){const n=E[e+"-"+t];n&&(a=n.todo)}const l={scope:n,todo:a},u=new Proxy({},{get:(e,t)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(c[t]=e)}}),d=new Proxy({},{get(n,o){const r=function(n,r){if("[object Symbol]"===Object.prototype.toString.call(o))return;const s=e+"-"+t+"-"+o,i=h[s];T[`${s}${r?`-${r.id}-${r.frameId}`:""}`]=n,i?F(["frame",{comId:e,frameId:t,pinHostId:o,val:n}],i,n,r||l.scope):A("frame",{comId:e,frameId:t,pinHostId:o,val:n})};return r.getConnections=()=>h[e+"-"+t+"-"+o]||[],r}}),p=new Proxy({},{get:(e,t,n)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(k[r+"-"+t]=e)}});let f={};s=E[r]={type:null==i?void 0:i.type,run(n){l.scope=n;const o=(null==n?void 0:n.id)||"none";f[o]||(f[o]=!0,B({comId:e,frameId:t,scope:n})),Array.isArray(l.todo)&&(l.todo.forEach((e=>{Promise.resolve().then((()=>{e(n)}))})),l.todo=void 0)},destroy(){Reflect.deleteProperty(E,r)},_inputs:u,_inputRegs:c,inputs:d,outputs:p,get curScope(){return l.scope},get todo(){return l.todo},pushTodo(e){l.todo||(l.todo=[]),l.todo.push(e)}}}return s}function B(e){const{comId:t,frameId:n,scope:r}=e,s=_[t?`${t}-${n}`:`${n}`];s&&s.forEach((e=>{const{id:t,def:n}=e;if(v[t]){const e=$(t,r),s=c(n);(0,o.cM)(`${s.namespace} 开始执行`),s.runtime({env:j,data:e.data,inputs:e.inputs,outputs:e.outputs,_inputsCallable:e._inputsCallable,logger:d,onError:p?e=>u({comId:t,error:e}):u})}}))}function K({options:e,value:t,scope:o,log:r=!0,comProps:s}){const{frameId:c,comId:a,pinId:l,sceneId:u}=e,d=h[(a?`${a}-${c}`:`${c}`)+"-"+l];T[`${c}-${l}`]=t,d?F(["frame",{comId:a,frameId:c,pinHostId:l,val:t,sceneId:u}],d,t,o):(r&&A("frame",{comId:a,frameId:c,pinHostId:l,val:t,sceneId:u}),c!==i&&(n.id===c?C[l](t):null==y||y.open({frameId:c,todo:{pinId:l,value:t},comProps:s,parentScope:o.proxyComProps})))}const J={get(e,t,n,o){let r,s,i;for(let e=0;e<arguments.length;e++){const t=arguments[e];e>0&&"string"==typeof t&&(r=t),"object"==typeof t&&(t.inputs||t.outputs||t._inputs||t._outputs?i=t:(t.id||t.parent)&&(s=t))}if(r)return L(e,r,s);{const t=$(e,s);return i?t.clone(i):t}},getComInfo:e=>v[e]};if("function"==typeof l){const e={run(){B({frameId:i})},inputs:new Proxy({},{get:(e,t)=>function(e,n=void 0,o=!0){"[object Symbol]"!==Object.prototype.toString.call(t)&&K({options:{frameId:i,pinId:t,sceneId:n},value:e,scope:void 0,log:o})}}),outputs(e,t){C[e]=t},get:J.get,getComInfo:J.getComInfo};m&&"module"===I&&m.setRefs(n.id,e),l(e)}return J}},358:(e,t,n)=>{"use strict";n.d(t,{J2:()=>l,JE:()=>r,Wg:()=>a,cM:()=>c});let o=!1;function r(){o=!0}const s="__IOEventList__",i={log:(...e)=>{window[s]||(window[s]=[]),window[s].push(e[0]),console.log(...e)}};function c(e){console.log(`%c[Mybricks]%c ${e}\n`,"color:#FFF;background:#fa6400","","")}function a(e,t,n,r){if(o)return;let s;try{s=JSON.stringify(r)}catch(e){s=r}i.log(`%c[Mybricks] 输入项 %c ${e||t.title||t.namespace} | ${n} -> ${s}`,"color:#FFF;background:#000","","")}function l(e,t,n,r){if(o)return;let s;try{s=JSON.stringify(r)}catch(e){s=r}i.log(`%c[Mybricks] 输出项 %c ${e||t.title||t.namespace} | ${n} -> ${s}`,"color:#FFF;background:#fa6400","","")}},599:(e,t,n)=>{"use strict";function o(e){return e&&"object"==typeof e}function r(e){return"number"==typeof e&&!isNaN(e)}function s(e,t){const n=e.split("."),o=t.split("."),r=n.length,s=o.length,i=Math.min(r,s);let c=0;for(;c<i;c++){let e=parseInt(n[c]),t=parseInt(o[c]);if(e>t)return 1;if(e<t)return-1}if(r>s){for(let e=c;e<r;e++)if(0!=parseInt(n[e]))return 1;return 0}if(r<s){for(let e=c;e<s;e++)if(0!=parseInt(o[e]))return-1;return 0}return 0}function i(e=5,t=8){const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(let r=0;r<e;r++)o[r]=n[0|Math.random()*t];else{let e;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(let t=0;t<36;t++)o[t]||(e=0|16*Math.random(),o[t]=n[19==t?3&e|8:e])}return o.join("")}function c(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}n.d(t,{Am:()=>y,Kn:()=>o,Lc:()=>c,Ok:()=>f,Q1:()=>p,Vj:()=>i,hj:()=>r,nZ:()=>m,yC:()=>s});const a=function(e,t,n,o){return function(r,s){var i,c,a,l,u=parseFloat(s);return!s||u<=t?r:"".concat((i=u/e,c=n,a=Math.pow(10,c+1),l=Math.floor(i*a),10*Math.round(l/10)/a)).concat(o)}},l=a(12,0,5,"rem"),u=a(3.75,0,5,"vw"),d=/"[^"]+"|'[^']+'|url\([^)]+\)|(\d*\.?\d+)px/g,p=e=>e.replace(d,l),f=e=>e.replace(d,u),m=(e,t)=>{var n;const o=t||(null===(n=document.getElementById("_mybricks-geo-webview_"))||void 0===n?void 0:n.shadowRoot)||document.head;e.use({target:o})};function y(e){return e}},756:(e,t,n)=>{"use strict";n.d(t,{x:()=>l});var o=n(359),r=n.n(o),s=n(318);const i=n(683).Z.locals,c=r().createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10635",width:"12",height:"12"},r().createElement("path",{d:"M219.428571 73.142857v877.714286H73.142857V73.142857zM365.714286 73.142857l585.142857 438.857143-577.828572 438.857143L365.714286 599.771429","p-id":"10636",fill:"#707070"}));function a({resume:e}){return r().createElement("div",{className:i.debugger},r().createElement("div",{className:i.titlebar},r().createElement("div",null,"已在交互视图中暂停"),r().createElement("div",{className:i.resume,onClick:e},c)))}class l{constructor({resume:e}){this.resume=()=>{},this.resume=e}open(e){if(this.dom)this.dom.style.visibility="visible";else{const t=document.createElement("div");this.canvas=e,this.dom=t,t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0",t.style.zIndex="100000",t.style.visibility="visible",e.appendChild(t);const n=(0,s.createRoot)(t);n.render(r().createElement(a,{resume:this.resume})),this.root=n}}close(){this.dom&&(this.dom.style.visibility="hidden")}destroy(){this.dom&&requestAnimationFrame((()=>{this.root.unmount(),this.root=null,this.canvas.removeChild(this.dom),this.canvas=null,this.dom=null}))}}},987:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(359),r=n.n(o),s=n(878);const i=n(490).Z.locals;class c extends r().PureComponent{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){var t;return{hasError:!0,error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))}}componentDidCatch(e,t){var n,o;console.error(e,t),s.Z.error(e),this.setState({error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(n=null==e?void 0:e.toString)||void 0===n?void 0:n.call(e)),errorInfo:(null==t?void 0:t.stack)||(null==t?void 0:t.message)||(null===(o=null==t?void 0:t.toString)||void 0===o?void 0:o.call(t))})}render(){const{hasError:e,error:t,errorInfo:n}=this.state,{children:o,errorTip:s}=this.props;return e?r().createElement("div",{className:i.error},r().createElement("div",null,s||"渲染错误"),r().createElement("div",null,t||n)):o}}},576:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var o=n(359),r=n.n(o),s=n(21),i=n.n(s),c=n(130),a=n(901),l=n(606),u=n(599),d=n(358),p=n(878),f=n(987),m=n(196),y=n(232),g=n(650),v=n(490),_=n(759),h=n(683);const b=(e,t)=>{e.forEach((e=>{e.comAray?b(e.comAray,t):t[`${e.namespace}-${e.version}`]=e}))};let x=1;function w({json:e,opts:t,style:n={},className:s="",root:w=!0}){const I=(0,o.useMemo)((()=>{var e,n,o,r,s,i;if(1===x){x=2;const l=null===(e=t.env)||void 0===e?void 0:e.pxToRem;if(l){const{enableAdaptive:u=!1,landscapeWidth:f=1440}=l,m=document.documentElement;if(u){function y(){m.style.fontSize=m.clientWidth/(f/12)+"px"}y(),window.addEventListener("resize",y)}else m.style.fontSize="12px"}}(null===(n=null==t?void 0:t.env)||void 0===n?void 0:n.silent)&&(0,d.JE)(),p.Z.init(null===(o=null==t?void 0:t.env)||void 0===o?void 0:o.showErrorNotification);const{env:a}=t;return a.runtime||(a.runtime={}),a.i18n||(a.i18n=e=>e),a.canvas||(a.canvas={type:window.document.body.clientWidth<=414?"mobile":"pc"}),"canvasElement"in a||(a.canvasElement=t.debug&&((null===(r=t.env)||void 0===r?void 0:r.shadowRoot)||(null===(i=null===(s=document.getElementById("_mybricks-geo-webview_"))||void 0===s?void 0:s.shadowRoot)||void 0===i?void 0:i.getElementById("_geoview-wrapper_")))||document.body),t.env.renderModule||(t.env.renderModule=(e,t)=>(0,c.render)(e,Object.assign(Object.assign({},t),{env:a}))),a}),[]),j=(0,o.useMemo)((()=>{t.observable||(0,m.O)({pxToRem:I.pxToRem,pxToVw:I.pxToVw});let e=null;t.comDefs&&(e={},Object.assign(e,t.comDefs));let n=[...window.__comlibs_edit_||[],...window.__comlibs_rt_||[]];if(!e){if(!n.length)throw new Error('组件库为空，请检查是否通过<script src="组件库地址"><\/script>加载或通过comDefs传入了组件库运行时.');e={}}return n.push(i()),n.forEach((t=>{const n=t.comAray;n&&Array.isArray(n)&&b(n,e)})),e}),[]),E=(0,o.useCallback)((e=>{const t=j[e.namespace+"-"+e.version];if(!t){const t=[];for(let n in j)n.startsWith(e.namespace+"-")&&t.push(j[n]);if(t&&t.length>0){t.sort(((e,t)=>(0,u.yC)(e.version,t.version)));const n=t[0];return console.warn(`【Mybricks】组件${e.namespace+"@"+e.version}未找到，使用${n.namespace}@${n.version}代替.`),n}throw console.log(j),new Error(`组件${e.namespace+"@"+e.version}未找到，请确定是否存在该组件以及对应的版本号.`)}return t}),[]),{slot:k}=e,O=(0,o.useMemo)((()=>{const{debug:e,onError:n}=t;return e&&"function"==typeof n?n:e=>{console.error(e),p.Z.error(e)}}),[]),C=(0,o.useMemo)((()=>Object.assign(Object.assign({},console),{error:e=>{console.error(e),p.Z.error(e)}})),[]),[S,P,R]=(0,o.useMemo)((()=>{var n;(0,u.nZ)(y.Z,I.shadowRoot),(0,u.nZ)(g.Z,I.shadowRoot),(0,u.nZ)(v.Z,I.shadowRoot),(0,u.nZ)(_.Z,I.shadowRoot),"function"==typeof t.debug&&(0,u.nZ)(h.Z,I.shadowRoot);try{let n,o=!0;return[(0,a.Z)({json:e,getComDef:E,events:t.events,env:I,ref(e){n=e,"function"==typeof t.ref&&(t.ref(e),o=!1)},onError:O,debug:t.debug,debugLogger:t.debugLogger,logger:C,scenesOperate:t.scenesOperate},{observable:t.observable||m.L}),n,o]}catch(e){throw console.error(e),p.Z.error(`导出的JSON.script执行异常: ${(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(n=null==e?void 0:e.toString)||void 0===n?void 0:n.call(e))}`),new Error("导出的JSON.script执行异常.")}}),[]);return(0,o.useLayoutEffect)((()=>{if(!t.disableAutoRun){if(R){const{inputs:n}=P,o=e.inputs;n&&Array.isArray(o)&&o.forEach((e=>{const{id:o,mockData:r}=e;let s;if(t.debug&&void 0!==r)try{s=JSON.parse(decodeURIComponent(r))}catch(e){s=r}n[o](s)}))}P.run()}}),[]),(0,o.useEffect)((()=>{const e=[];let n;const o=t.debug&&"mySetInterval"!==setInterval.name;return o&&(n=setInterval,setInterval=function(...t){const o=n(...t);return e.push(o),o}),()=>{var r,s;o&&("function"==typeof t.debug&&(null===(s=null===(r=t.env._context)||void 0===r?void 0:r._pendingContext)||void 0===s||s.destroy()),setInterval=n,e.forEach((e=>clearInterval(e))))}}),[]),"js"===e.rtType?r().createElement(r().Fragment,null):r().createElement(f.Z,{errorTip:"页面渲染错误"},r().createElement(l.Z,{env:I,style:n,_env:t._env,slot:k,getComDef:E,context:S,className:s,createPortal:t.createPortal||(()=>{}),onError:O,logger:C,root:w}))}},704:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(359),r=n.n(o),s=n(576),i=n(650),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};const a=i.Z.locals;function l({json:e,opts:t}){const[n,i]=(0,o.useState)(0),[l,p]=(0,o.useState)([]),[f,m]=(0,o.useState)([]),{scenesMap:y,scenesOperateInputsTodo:g,themes:v,permissions:_,globalVarMap:h}=(0,o.useMemo)((()=>{if(t.sceneId){const n=e.scenes.findIndex((e=>e.id===t.sceneId));if(-1!==n){const t=e.scenes.splice(n,1);e.scenes.unshift(...t),"popup"===t[0].type&&p([t[0].id])}}const n=[];e.scenes.forEach(((e,t)=>{"popup"===e.type?t||p([e.id]):n.push(e)})),m(n);const{modules:o,definedComs:r}=e;return t.env.getDefinedComJSON||(t.env.getDefinedComJSON=e=>r[e].json),t.env.getModuleJSON=t=>{var n;const r=null===(n=null==o?void 0:o[t])||void 0===n?void 0:n.json;if(!r)return r;const{global:s}=e;let i={},c={},a={};return s&&(i=s.comsReg,c=s.consReg,a=s.pinRels,Object.keys(i).forEach((e=>{i[e].global=!0}))),Object.assign(r.coms,i),Object.assign(r.cons,c),Object.assign(r.pinRels,a),r},{scenesMap:e.scenes.reduce(((e,t,n)=>{var o;return Object.assign(Object.assign({},e),{[t.id]:{show:0===n,todo:[],json:t,disableAutoRun:!!n,useEntryAnimation:!1,type:(null===(o=t.slot)||void 0===o?void 0:o.showType)||t.type}})}),{}),scenesOperateInputsTodo:{},themes:e.themes,permissions:e.permissions||[],globalVarMap:{}}}),[]);(0,o.useMemo)((()=>{if(t.ref){const e=t.ref;t.ref=n=>o=>(n(o),e.call(t,o))}else t.ref=e=>t=>{e(t)}}),[]);const{fxFramesJsx:b,fxToJsonMap:x,currentFxFrameIdsMap:w}=(0,o.useMemo)((()=>{const t={},{global:n}=e;if(n){const{fxFrames:e}=n;Array.isArray(e)&&e.forEach((e=>{const{id:o}=e;let r=n.comsReg,s=n.consReg,i=n.pinRels;Object.keys(r).forEach((e=>{r[e].global=!0})),Object.assign(e.coms,r),Object.assign(e.cons,s),Object.assign(e.pinRels,i),t[o]=Object.assign(Object.assign({},e),{rtType:"js"})}))}return{fxFramesJsx:[],fxToJsonMap:t,currentFxFrameIdsMap:{}}}),[]),I=(0,o.useCallback)((n=>{var o;const r=y[n],s=t.env.hasPermission,{env:a}=t;a.themes=v,a.permissions=_,"function"==typeof s&&Object.defineProperty(a,"hasPermission",{get:function(){return e=>{if("string"==typeof e){const t=_.find((t=>t.id===e));return s({permission:t})}return s(e)}}}),a.canvas=Object.assign({id:n,type:window.document.body.clientWidth<=414?"mobile":"pc",open:(e,n,o)=>c(this,void 0,void 0,(function*(){var n;let r=y[e];if(!r){if("function"!=typeof t.scenesLoader)return void console.error(`缺少场景信息: ${e}`);const o=yield t.scenesLoader({id:e});if(r={disableAutoRun:!1,json:o,show:!1,parentScope:null,todo:[],type:(null===(n=o.slot)||void 0===n?void 0:n.showType)||o.type,useEntryAnimation:!1},y[e]=r,"popup"===o.type||m((e=>[...e,o])),g[e]){const{parentScope:t,todo:n}=g[e];r.parentScope=t,n.forEach((({value:e,pinId:t,parentScope:n})=>{r.todo=r.todo.concat({type:"inputs",todo:{pinId:t,value:e}})}))}}o?Object.entries(y).forEach((([t,n])=>{t===e?(n.useEntryAnimation="blank"===o,n.show=!0,"popup"===n.type?p((t=>[...t,e])):i((e=>e+1))):(n.show=!1,"popup"===n.type?p((e=>e.filter((e=>e!==n.json.id)))):i((e=>e+1)))})):r.show||(r.useEntryAnimation="blank"===o,r.show=!0,"popup"===r.type?p((t=>[...t,e])):i((e=>e+1)))}))},null===(o=t.env)||void 0===o?void 0:o.canvas);const l={open({todo:n,frameId:o,parentScope:r,comProps:s}){var a,l;const u=y[o];if(u)u.show||(u.show=!0,u.todo=u.todo.concat({type:"inputs",todo:n}),u.parentScope=r,"popup"===u.type?p((e=>[...e,o])):i((e=>e+1)));else{const u=x[o];if(u)if(w[r.id]){const{_refs:e}=w[r.id];w[r.id].parentScope=r;const t=null===(l=null==s?void 0:s.data)||void 0===l?void 0:l.configs;t&&Object.entries(t).forEach((([t,n])=>{e.inputs[t](n,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()}else{w[r.id]={};const{id:o}=u,{env:l}=t;l.canvas=Object.assign({id:o,type:window.document.body.clientWidth<=414?"mobile":"pc",open:(e,n,o)=>c(this,void 0,void 0,(function*(){var n;let r=y[e];if(!r){if("function"!=typeof t.scenesLoader)return void console.error(`缺少场景信息: ${e}`);const o=yield t.scenesLoader({id:e});if(r={disableAutoRun:!1,json:o,show:!1,parentScope:null,todo:[],type:(null===(n=o.slot)||void 0===n?void 0:n.showType)||o.type,useEntryAnimation:!1},y[e]=r,"popup"===o.type||m((e=>[...e,o])),g[e]){const{parentScope:t,todo:n}=g[e];r.parentScope=t,n.forEach((({value:e,pinId:t,parentScope:n})=>{r.todo=r.todo.concat({type:"inputs",todo:{pinId:t,value:e}})}))}}o?Object.entries(y).forEach((([t,n])=>{t===e?(n.useEntryAnimation="blank"===o,n.show=!0,"popup"===n.type?p((t=>[...t,e])):i((e=>e+1))):(n.show=!1,"popup"===n.type?p((e=>e.filter((e=>e!==n.json.id)))):i((e=>e+1)))})):r.show||(r.useEntryAnimation="blank"===o,r.show=!0,"popup"===r.type?p((t=>[...t,e])):i((e=>e+1)))}))},null===(a=t.env)||void 0===a?void 0:a.canvas);const f={open({todo:e,frameId:t,parentScope:n,comProps:o}){var r;const s=w[n.id];if(null==s?void 0:s._refs){w[n.id].parentScope=n;const t=null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.configs;t&&Object.entries(t).forEach((([e,t])=>{s._refs.inputs[e](t,void 0,!1)})),s._refs.inputs[e.pinId](e.value,void 0,!1),s._refs.run()}},inputs({frameId:e,parentScope:t,value:n,pinId:o}){const r=y[e];r?(r.parentScope=t,r._refs?r._refs.inputs[o](n):r.todo=r.todo.concat({type:"inputs",todo:{pinId:o,value:n}})):g[e]?g[e].todo.push({frameId:e,parentScope:t,value:n,pinId:o}):g[e]={parentScope:t,todo:[{value:n,pinId:o}]}},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in y){const r=y[o];if(r.json.coms[t])if(r._refs)d(r._refs,t,n[t],e);else{const o=n[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps(t){var n;return null===(n=y[e.scenes[0].id]._refs)||void 0===n?void 0:n.get(t)},exeGlobalCom({com:e,value:t,pinId:n}){const o=e.id;h[o]=t,Object.keys(y).forEach((e=>{const r=y[e];if(r.show&&r._refs){const e=r._refs.get(o);e&&e.outputs[n](t,!0,null,!0)}}));const r=l._context.getRefsMap();Object.entries(r).forEach((([e,r])=>{const s=r.get(o);s&&s.outputs[n](t,!0,null,!0)}))}};l.scenesOperate=f;const v=Object.assign(Object.assign({},t),{env:l,disableAutoRun:!0,ref:t.ref((e=>{var t;w[r.id]._refs=e,w[r.id].parentScope=r;const{inputs:o,outputs:i}=e;u.outputs.forEach((e=>{i(e.id,(t=>{var n;null===(n=w[r.id].parentScope)||void 0===n||n.outputs[e.id](t)}))}));const c=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.configs;c&&Object.entries(c).forEach((([t,n])=>{e.inputs[t](n,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()})),_env:{loadCSSLazy(){},currentScenes:{close(){}}},scenesOperate:f});b.push({key:r.id,json:u,opts:v}),i((e=>e+1))}}},inputs({frameId:e,parentScope:t,value:n,pinId:o}){const r=y[e];r?(r.parentScope=t,r._refs?r._refs.inputs[o](n):r.todo=r.todo.concat({type:"inputs",todo:{pinId:o,value:n}})):g[e]?g[e].todo.push({frameId:e,parentScope:t,value:n,pinId:o}):g[e]={parentScope:t,todo:[{value:n,pinId:o}]}},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in y){const r=y[o];if(r.json.coms[t])if(r._refs)d(r._refs,t,n[t],e);else{const o=n[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps(t){var n;return null===(n=y[e.scenes[0].id]._refs)||void 0===n?void 0:n.get(t)},exeGlobalCom({com:e,value:t,pinId:n}){const o=e.id;h[o]=t,Object.keys(y).forEach((e=>{const r=y[e];if(r.show&&r._refs){const e=r._refs.get(o);e&&e.outputs[n](t,!0,null,!0)}}));const r=a._context.getRefsMap();Object.entries(r).forEach((([e,r])=>{const s=r.get(o);s&&s.outputs[n](t,!0,null,!0)}))}};return a.scenesOperate=l,Object.assign(Object.assign({},t),{env:a,get disableAutoRun(){return r.disableAutoRun},ref:t.ref((e=>{r._refs=e;const o=r.todo,{inputs:s,outputs:c}=e,a=r.disableAutoRun;r.json.outputs.forEach((e=>{c(e.id,(t=>{var n,o;"apply"===e.id?null===(n=r.parentScope)||void 0===n||n.outputs[e.id](t):(r.show=!1,r.todo=[],r._refs=null,null===(o=r.parentScope)||void 0===o||o.outputs[e.id](t),r.parentScope=null,"popup"===r.type?p((e=>e.filter((e=>e!==r.json.id)))):i((e=>e+1)))}))})),o.length?(o.forEach((({type:t,todo:o})=>{if("inputs"===t)Promise.resolve().then((()=>{s[o.pinId](o.value,n)}));else if("globalVar"===t){const{comId:t,value:n,bindings:r}=o;d(e,t,r,n)}})),r.todo=[]):a||(r.disableAutoRun=!0,Promise.resolve().then((()=>{var e,n;null===(n=null===(e=r.json.inputs)||void 0===e?void 0:e.forEach)||void 0===n||n.call(e,(e=>{const{id:n,mockData:o}=e;let r;if(t.debug&&void 0!==o)try{r=JSON.parse(decodeURIComponent(o))}catch(e){r=o}s[n](r)}))}))),a&&Promise.resolve().then((()=>{e.run()}))})),_env:{loadCSSLazy(){},currentScenes:{close(){r.show=!1,r.todo=[],r._refs=null,"popup"===r.type?p((e=>e.filter((e=>e!==r.json.id)))):i((e=>e+1))}}},scenesOperate:l})}),[]),j=(0,o.useMemo)((()=>b.map((({key:e,json:t,opts:n})=>r().createElement(s.Z,{key:e,json:t,opts:n})))),[n]),E=(0,o.useMemo)((()=>{if(!f.length)return null;const{global:t}=e;let n={},o={},s={};return t&&(n=t.comsReg,o=t.consReg,s=t.pinRels,Object.keys(n).forEach((e=>{n[e].global=!0}))),f.map(((e,t)=>{const{id:i}=e;Object.assign(e.coms,n),Object.assign(e.cons,o),Object.assign(e.pinRels,s);const c=y[i];return c.show&&r().createElement(u,{key:i,json:Object.assign(Object.assign({},e),{scenesMap:y}),opts:I(i),className:c.useEntryAnimation?a.main:"",style:"popup"===c.type?{position:"absolute",top:0,left:0,backgroundColor:"#ffffff00"}:{}})}))}),[n,f]),k=(0,o.useMemo)((()=>{if(l.length){const{global:t}=e;let n={},o={},s={};return t&&(n=t.comsReg,o=t.consReg,s=t.pinRels,Object.keys(n).forEach((e=>{n[e].global=!0}))),l.map((e=>{const t=y[e].json,{id:i}=t;return Object.assign(t.coms,n),Object.assign(t.cons,o),Object.assign(t.pinRels,s),r().createElement(u,{key:t.id,json:Object.assign(Object.assign({},t),{scenesMap:y}),opts:I(i),style:{position:"absolute",top:0,left:0,backgroundColor:"#ffffff00"}})}))}return null}),[l]);return r().createElement(r().Fragment,null,j,E,k)}function u({json:e,opts:t,style:n={},className:o=""}){return r().createElement(s.Z,{json:e,opts:t,style:n,className:o})}function d(e,t,n,o){const r=e.get(t);r&&Array.isArray(n)&&n.forEach((e=>{let t=r;const n=e.split(".");n.forEach(((e,r)=>{r!==n.length-1?t=t[e]:t[e]=o}))}))}},878:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var o=n(359),r=n.n(o),s=n(318),i=n.n(s);const c=n(759).Z.locals;let a=!1;var l;!function(e){e.Error="error"}(l||(l={}));const u="__fz-debug-info-container__";let d,p=document.getElementById(u),f=0;const m=({content:e,type:t})=>{const[n,s]=(0,o.useState)([]),i=e=>{const t=`__fz-notification-id-${++f}__`;e=Object.assign({_nid:t},e),s((t=>[...t,e]))},a=e=>{s((t=>t.filter((t=>t._nid!==e))))};return(0,o.useEffect)((()=>{d={add:i,remove:a},e&&d.add({content:e,type:t})}),[]),r().createElement("div",{className:c.container},n.map((e=>r().createElement("div",{key:e._nid,className:c.itemWrap},r().createElement("div",{className:`${c.item} ${c.errorItem}`},r().createElement("svg",{className:c.closeIcon,viewBox:"0 0 1045 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>d.remove(e._nid)},r().createElement("path",{d:"M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z",fill:"#555555"})),e.content)))))},y=["ResizeObserver loop limit exceeded"],g={init:e=>{a=!1!==e,a&&(window.onerror=function(e,t,n,o,r){if("string"!=typeof e||!y.includes(e))return!1})},error:e=>{var t;if(a){const n=(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))||e;if("string"==typeof n&&y.includes(n))return;((e,t)=>{let n={content:"",type:t};if("string"==typeof e)n.content=e;else try{n.content=JSON.stringify(e)}catch(t){console.error("showNotification JSON.stringify Error",t,{message:e})}n.content&&(p?null==d||d.add(n):(p=document.createElement("div"),p.setAttribute("id",u),document.body.appendChild(p),i().render(r().createElement(m,{content:n.content,type:n.type}),p)))})(n,l.Error)}}}},606:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var o=n(359),r=n.n(o),s=n(599),i=n(232),c=n(987),a=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const l=i.Z.locals;function u({scope:e,root:t,slot:n,style:o={},createPortal:s,className:i,params:c,inputs:a,outputs:u,_inputs:p,_outputs:y,wrapper:g,template:v,env:_,_env:h,getComDef:b,context:x,onError:w,logger:I}){const{style:j,comAry:E}=n,k=[];if(E.forEach(((t,n)=>{var o;const{id:i,def:c,name:f}=t,m=x.getComInfo(i),{hasPermission:g}=_,j=null===(o=null==m?void 0:m.model)||void 0===o?void 0:o.permissions;if(j&&"function"==typeof g&&!g(j.id))return;if(b(c)){const o=x.get(i,e,{inputs:a,outputs:u,_inputs:p,_outputs:y}),c=(e?e.id:"")+n;k.push({id:i,jsx:r().createElement(d,{key:c,com:t,getComDef:b,context:x,scope:e,props:o,env:_,_env:h,template:v,onError:w,logger:I,createPortal:s}),name:f,inputs:o.inputsCallable,style:o.style})}else{const e=r().createElement("div",{className:l.error},"组件 (namespace = ",c.namespace,"）未找到.");k.push({id:i,jsx:e,name:f})}})),"function"==typeof g)return g(k);{const e=null==c?void 0:c.style,n=e||j;return r().createElement("div",{"data-isslot":"1",className:`${m(n)}${t&&i?` ${i}`:""}`,style:Object.assign(Object.assign({},f(n,!!e,t)),o)},k.map((e=>e.jsx)))}}function d({com:e,props:t,scope:n,template:i,env:a,createPortal:u,_env:d,getComDef:f,context:m,onError:g,logger:v}){const{id:_,def:h,name:b,slots:x={}}=e,{data:w,title:I,style:j,inputs:E,outputs:k,_inputs:O,_outputs:C,_notifyBindings:S}=t;(0,o.useMemo)((()=>{var e;const{pxToRem:t,pxToVw:n}=a,o=function({env:e,style:t,def:n}){var o;const r=null===(o=null==e?void 0:e.themes)||void 0===o?void 0:o.comThemes;if(!r)return t.styleAry;let s;const{themesId:i}=t,{namespace:c}=n;if(i)if("_defined"===i)s=t.styleAry;else{const e=r[c];if(Array.isArray(e)){const t=e.find((({id:e})=>e===i));t&&(s=t.styleAry)}}else{const e=r[c];if(Array.isArray(e)){const t=e.find((({isDefault:e})=>e));t&&(s=t.styleAry)}}if(!s)return t.styleAry;return s}({env:a,def:h,style:j});if(Array.isArray(o)){const r=(null==a?void 0:a.shadowRoot)||(null===(e=document.getElementById("_mybricks-geo-webview_"))||void 0===e?void 0:e.shadowRoot);if(!(r||document).querySelector(`style[id="${_}"]`)){const e=document.createElement("style");let s="";e.id=_,o.forEach((({css:e,selector:o,global:r})=>{":root"===o&&(o="> *:first-child"),Array.isArray(o)?o.forEach((o=>{s+=y({id:_,css:e,selector:o,global:r,configPxToRem:t,configPxToVw:n})})):s+=y({id:_,css:e,selector:o,global:r,configPxToRem:t,configPxToVw:n})})),e.innerHTML=s,r?r.appendChild(e):document.head.appendChild(e)}}Reflect.deleteProperty(j,"styleAry"),Reflect.deleteProperty(j,"themesId")}),[]);const P=f(h),R=new Proxy(x,{get(e,t){const o=m.get(_,t,n),s=`组件(namespace=${h.namespace}）的插槽(id=${t})`;if(!o)throw new Error(`${s} 获取context失败.`);return{render(e){const i=x[t];return i?r().createElement(p,{slotId:t,slot:i,props:o,params:e,style:j,onError:g,createPortal:u,parentComId:_,logger:v,env:a,_env:d,scope:n,getComDef:f,context:m}):r().createElement("div",{className:l.error},s," 未找到.")},get size(){var e,n;return!!(null===(n=null===(e=x[t])||void 0===e?void 0:e.comAry)||void 0===n?void 0:n.length)},_inputs:o._inputs,inputs:o.inputs,outputs:o.outputs}}}),T=(0,o.useMemo)((()=>{if(t.frameId&&t.parentComId){const e=m.get(t.parentComId,t.frameId,null==n?void 0:n.parent);if(e)return{get _inputs(){return new Proxy({},{get:(t,n)=>e._inputRegs[n]})}}}}),[]),A=function({style:e,id:t}){const n=[t,l.com];1===e.flex&&n.push(l.flex);return n.join(" ")}({style:j,id:_}),M=function({style:e}){const t={},{width:n,height:o,maxWidth:r}=e;n?(0,s.hj)(n)?t.width=n+"px":n&&(t.width=n):t.width="100%";(0,s.hj)(o)?t.height=o+"px":o&&(t.height=o);r&&(t.maxWidth=r);return t}({style:j}),F=function({style:e}){const t={},{width:n,marginTop:o,marginLeft:r,marginRight:i,marginBottom:c}=e;(0,s.hj)(o)&&(t.marginTop=o+"px");(0,s.hj)(r)&&("number"==typeof n||r<0?t.marginLeft=r+"px":t.paddingLeft=r+"px");(0,s.hj)(i)&&("number"==typeof n||i<0?t.marginRight=i+"px":t.paddingRight=i+"px");(0,s.hj)(c)&&(t.marginBottom=c+"px");return t}({style:j}),$={};if(["fixed","absolute"].includes(j.position)){const{top:e,left:t,right:n,bottom:o}=j;(e||(0,s.hj)(e))&&($.top=(0,s.hj)(e)?e+"px":e),(o||(0,s.hj)(o))&&($.bottom=(0,s.hj)(o)?o+"px":o),(t||(0,s.hj)(t))&&($.left=(0,s.hj)(t)?t+"px":t),(n||(0,s.hj)(n))&&($.right=(0,s.hj)(n)?n+"px":n),"fixed"===j.position?$.zIndex=1e3:"absolute"===j.position&&($.zIndex=1)}let N=P.runtime({id:_,env:a,_env:d,data:w,name:b,title:I,style:j,inputs:E,outputs:k,_inputs:O,_outputs:C,_notifyBindings:S,slots:R,createPortal:u,parentSlot:T,onError:g,logger:v});return"function"==typeof i&&(N=i({id:_,jsx:N,name:b})),N=N?r().createElement("div",{id:_,key:_,style:Object.assign(Object.assign(Object.assign(Object.assign({display:j.display,position:j.position||"relative"},$),M),F),j.ext||{}),className:A},r().createElement(c.Z,{errorTip:`组件 (namespace = ${h.namespace}@${h.version}）渲染错误`},N)):null,N}const p=(0,o.memo)((({slotId:e,parentComId:t,props:n,slot:i,params:c,scope:a,env:l,createPortal:d,_env:p,style:f,getComDef:m,context:y,onError:g,logger:v})=>{let _,h;if("scope"===(null==i?void 0:i.type)){_={id:(0,s.Vj)(10,16),frameId:e,parentComId:t},a&&(_.parent=a)}else _=a;if(c){const e=c.inputValues;if("object"==typeof e)for(let t in e)n.inputs[t](e[t],_);"function"==typeof c.wrap&&(h=c.wrap)}return n.run(_),(0,o.useEffect)((()=>()=>{n.destroy()}),[]),r().createElement(u,{scope:_,env:l,createPortal:d,_env:p,slot:i,params:c,wrapper:h,template:null==c?void 0:c.itemWrap,getComDef:m,context:y,inputs:null==c?void 0:c.inputs,outputs:null==c?void 0:c.outputs,_inputs:null==c?void 0:c._inputs,_outputs:null==c?void 0:c._outputs,onError:g,logger:v})}),((e,t)=>{var n,o,r,s;const i=null===(n=e.params)||void 0===n?void 0:n.key,c=null===(o=null==t?void 0:t.params)||void 0===o?void 0:o.key;if(void 0===i&&void 0===c)return!0;if(i!==c)return!1;if(void 0!==i&&void 0!==c&&i===c)try{if(JSON.stringify(null===(r=e.params)||void 0===r?void 0:r.inputValues)!==JSON.stringify(null===(s=t.params)||void 0===s?void 0:s.inputValues))return!1}catch(e){}return!0}));function f(e,t,n){const{paddingLeft:o,paddingTop:r,paddingRight:s,paddingBottom:i,background:c,backgroundColor:l,backgroundImage:u,backgroundPosition:d,backgroundRepeat:p,backgroundSize:f}=e,m=a(e,["paddingLeft","paddingTop","paddingRight","paddingBottom","background","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize"]);let y={paddingLeft:o||0,paddingTop:r||0,paddingRight:s||0,paddingBottom:i||0,backgroundColor:l||(n?"#ffffff":void 0),backgroundImage:u,backgroundPosition:d,backgroundRepeat:p,backgroundSize:f};if(c){if("object"==typeof c){const{background:e,backgroundImage:t,backgroundColor:n,backgroundRepeat:o,backgroundSize:r}=c;y.backgroundRepeat=o,y.backgroundSize=r,e?y.background=e:(y.backgroundImage=t,y.backgroundColor=n)}else y.background=c}return t&&(y=Object.assign(y,m)),y}function m(e){var t,n;const o=[l.slot,"slot"],r=e;if(r){"flex-column"==(null===(t=r.layout)||void 0===t?void 0:t.toLowerCase())?o.push(l.lyFlexColumn):"flex-row"==(null===(n=r.layout)||void 0===n?void 0:n.toLowerCase())&&o.push(l.lyFlexRow);const e=r.justifyContent;e&&("FLEX-START"===e.toUpperCase()?o.push(l.justifyContentFlexStart):"CENTER"===e.toUpperCase()?o.push(l.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?o.push(l.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?o.push(l.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&o.push(l.justifyContentFlexSpaceBetween));const s=r.alignItems;s&&("FLEX-START"===s.toUpperCase()?o.push(l.alignItemsFlexStart):"CENTER"===s.toUpperCase()?o.push(l.alignItemsFlexCenter):"FLEX-END"===s.toUpperCase()&&o.push(l.alignItemsFlexFlexEnd))}return o.join(" ")}function y({id:e,css:t,selector:n,global:o,configPxToRem:r,configPxToVw:i}){return`\n    ${o?"":`#${e} `}${n.replace(/\{id\}/g,`${e}`)} {\n      ${Object.keys(t).map((e=>{let n=t[e];return r&&"string"==typeof n&&-1!==n.indexOf("px")?n=(0,s.Q1)(n):i&&"string"==typeof n&&-1!==n.indexOf("px")&&(n=(0,s.Ok)(n)),`${(0,s.Lc)(e)}: ${n};`})).join("\n")}\n    }\n  `}},130:(e,t,n)=>{"use strict";n.r(t),n.d(t,{render:()=>d});var o=n(359),r=n.n(o),s=n(576),i=n(147),c=n(704),a=n(756),l=n(196);console.log(`%c ${i.u2} %c@${i.i8}`,"color:#FFF;background:#fa6400","","");class u{constructor(e){this._refsMap={},this._pendingContext=null,this._pending=!1,this._ignoreWait=!1,this._waitCount=0,this._waitBreakpointIds=[],this._waitIdToResolvesMap={},e.observable||(0,l.O)({pxToRem:e.env.pxToRem,pxToVw:e.env.pxToVw}),this.opts=e;const{debug:t}=e;if("function"==typeof t){const{log:n,onResume:o}=t({resume:()=>{this.next()},ignoreAll:e=>{this._ignoreWait=e,e&&this.next(!0)}});this._pendingContext=new a.x({resume:o}),e.debugLogger=n}}setRefs(e,t){this._refsMap[e]=t}getRefsMap(){return this._refsMap}hasBreakpoint(e){return!this._ignoreWait&&(this._pending||e.isBreakpoint)}wait(e,t){return new Promise((n=>{if(this._ignoreWait)n();else{const o=this._waitBreakpointIds.length>0;if(o||t(),this._pendingContext.open(this.opts.env.canvasElement),this._pending=!0,e.isBreakpoint){if(o){const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(t)}const r=this._waitCount+++e.id;this._waitBreakpointIds.unshift(r),this._waitIdToResolvesMap[r]=[n]}else{const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(n)}}}))}next(e=!1){if(e)for(;this._waitBreakpointIds.length;)this.next();else{const e=this._waitBreakpointIds.pop(),t=this._waitIdToResolvesMap[e];t&&t.forEach((e=>e())),this._waitBreakpointIds.length||(this._pending=!1,this._pendingContext.close())}}}function d(e,t={}){return e?(t.env._context||(t.env._context=new u(t)),Array.isArray(e.scenes)?r().createElement(c.Z,{json:e,opts:t}):r().createElement(s.Z,{json:e,opts:t,root:"module"!==e.type})):null}},119:(e,t,n)=>{"use strict";n.d(t,{ep:()=>o.e,in:()=>i,kU:()=>s,st:()=>r.s});var o=n(965),r=n(60);const s=new WeakMap,i=new WeakMap},60:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});var o=n(119);const r=new class{constructor(){this.reactionStack=[]}regist(e){let t=this.getCurrentReaction();t&&o.ep.registReaction(t,e)}autoRun(e,t){const{reactionStack:n}=this;if(-1===n.indexOf(e))try{return n.push(e),t()}finally{n.pop()}}getCurrentReaction(){const{reactionStack:e}=this;return e[e.length-1]}}},965:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});var o=n(599),r=n(119);function s(e){e()}const i=new class{constructor(){this.taskMap=new WeakMap,this.reactionToTaskMap=new WeakMap}addTask(e){this.taskMap.set(e,new Map)}deleteTask(e){if(!(0,o.Kn)(e))return;const t=r.kU.get(e);r.kU.delete(e),r.in.delete(t);this.taskMap.get(t);this.taskMap.delete(t)}deleteReaction(e){let t=this.reactionToTaskMap.get(e);t&&(this.reactionToTaskMap.delete(e),t.forEach((t=>{t.forEach((t=>{t.delete(e)}))})))}registReaction(e,{target:t,key:n}){const o=this.taskMap.get(t);if(o){let t=o.get(n);t||(t=new Set,o.set(n,t)),t.has(e)||t.add(e);let r=this.reactionToTaskMap.get(e);r||(r=new Set,this.reactionToTaskMap.set(e,r)),r.has(o)||r.add(o)}}getReactions({target:e,key:t}){const n=this.taskMap.get(e);if(!n)return[];return n.get(t)||[]}runTask(e){const t=this.getReactions(e);t.size&&t.forEach(s)}}},787:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(196),r=n(599),s=n(119);const i={get:function(e,t){const n=e[t];if(["$$typeof","constructor"].includes(t)||e.__model_style__&&"display"!==t)return n;if(s.st.regist({target:e,key:t}),n instanceof FormData)return n;const i=s.in.get(n);return(0,r.Kn)(n)?i||(0,o.L)(n):i||n},set:function(e,t,n){(0,r.Kn)(n)&&(n=s.kU.get(n)||n);const o=Object.hasOwnProperty.call(e,t),i=e[t];e[t]=n;let c=!1;switch(!0){case!o||Array.isArray(e)&&"length"===t:case n!==i:c=!0}return c&&(s.ep.runTask({target:e,key:t}),s.ep.deleteTask(s.in.get(i))),!0}}},196:(e,t,n)=>{"use strict";n.d(t,{L:()=>m,O:()=>u});var o=n(359),r=n.n(o),s=n(119),i=n(599),c=n(787);const a="__render-web-createElement__";let l;function u(e){const{pxToRem:t,pxToVw:n}=e;r()[a]||(r()[a]=!0,l=r().createElement,r().createElement=function(...e){let[o,s]=e;if(s){const c=s.style;if(t&&c?Object.keys(c).forEach((e=>{const t=c[e];"string"==typeof t&&-1!==t.indexOf("px")&&(c[e]=(0,i.Q1)(t))})):n&&c&&Object.keys(c).forEach((e=>{const t=c[e];"string"==typeof t&&-1!==t.indexOf("px")&&(c[e]=(0,i.Ok)(t))})),e.length>0&&"function"==typeof o){if(!o.prototype||!(o.prototype instanceof r().Component)&&void 0===o.prototype.isReactComponent){const t=p(o);e.splice(0,1,t)}return l(...e)}if("object"==typeof o&&o.$$typeof===Symbol.for("react.forward_ref")){const t=p(o,!0);return e.splice(0,1,t),l(...e)}return l(...e)}return l(...e)})}const d="__enhanced__";function p(e,t=!1){let n=e[d];if(!n){t?(n=(0,o.memo)(e),n.render=f(e.render,!1)):n=f(e);try{e[d]=n}catch(e){}}const r=Object.getOwnPropertyNames(e);return r&&r.forEach((o=>{try{t&&"render"===o||(n[o]=e[o])}catch(e){console.error(e)}})),n}function f(e,t=!0){function n(t,n){var r;const s=(0,o.useRef)(null),[,i]=(0,o.useState)([]),c=(0,o.useCallback)((()=>{i([])}),[]);let a;return(0,o.useMemo)((()=>{s.current||(s.current=new y(c))}),[]),(0,o.useEffect)((()=>()=>{var e;null===(e=s.current)||void 0===e||e.destroy(),s.current=null}),[]),null===(r=s.current)||void 0===r||r.track((()=>{a=e(t,n)})),a}return n.displayName=e.displayName||e.name,t?(0,o.memo)(n):n}function m(e){return(0,i.Kn)(e)?s.kU.has(e)?e:s.in.get(e)||function(e){const t=c.Z,n=new Proxy(e,t);return s.in.set(e,n),s.kU.set(n,e),s.ep.addTask(e),n}(e):{}}class y{constructor(e){this.update=e}track(e){s.st.autoRun(this.update,e)}destroy(){s.ep.deleteReaction(this.update)}}},359:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__359__},318:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__318__},147:e=>{"use strict";e.exports=JSON.parse('{"u2":"@mybricks/render-web","i8":"1.2.15"}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__(130);return __webpack_exports__})()));