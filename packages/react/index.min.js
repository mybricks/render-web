!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports._mybricks_render_web=t(require("react"),require("react-dom")):e._mybricks_render_web=t(e.React,e.ReactDOM)}(this,((__WEBPACK_EXTERNAL_MODULE__12__,__WEBPACK_EXTERNAL_MODULE__33__)=>(()=>{var __webpack_modules__={539:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(758),r=o.n(n),i=o(935),s=o.n(i)()(r());s.push([e.id,".error-c0f46 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n  white-space: pre-wrap;\n}\n",""]),s.locals={error:"error-c0f46"};const c=s},348:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(758),r=o.n(n),i=o(935),s=o.n(i)()(r());s.push([e.id,"@keyframes slipInto-fb013 {\n  0% {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n.main-a6e42 {\n  animation: slipInto-fb013 0.1s ease-in-out 1;\n}\n",""]),s.locals={main:"main-a6e42",slipInto:"slipInto-fb013"};const c=s},374:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(758),r=o.n(n),i=o(935),s=o.n(i)()(r());s.push([e.id,".container-ff9f5 {\n  position: fixed;\n  right: 20px;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  z-index: 9999;\n}\n.container-ff9f5 .itemWrap-a3069 {\n  position: relative;\n}\n.container-ff9f5 .item-c8a43 {\n  padding: 16px;\n  background-color: #fff;\n  margin-bottom: 8px;\n  border-radius: 4px;\n  max-width: 50vw;\n  max-height: 50vh;\n  overflow: auto;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05);\n  font-size: 12px;\n}\n.container-ff9f5 .errorItem-e6fc8 {\n  color: #f5222d;\n}\n.container-ff9f5 .closeIcon-c5e91 {\n  position: absolute;\n  right: 16px;\n  top: 16px;\n  width: 24px;\n  height: 24px;\n  padding: 2px;\n  cursor: pointer;\n}\n.container-ff9f5 .closeIcon-c5e91:hover {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.12);\n}\n",""]),s.locals={container:"container-ff9f5",itemWrap:"itemWrap-a3069",item:"item-c8a43",errorItem:"errorItem-e6fc8",closeIcon:"closeIcon-c5e91"};const c=s},365:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(758),r=o.n(n),i=o(935),s=o.n(i)()(r());s.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.slot-ced90 {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.lyFlexColumn-f7fd6 {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-c8e04 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-b95f6 {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-e1ca1 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-ef832 {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-ad880 {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-a2f09 {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-a8880 {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-c6d62 {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-d7b4c {\n  align-items: flex-end;\n}\n.debugFocus-def53 {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-f9041 {\n  flex-shrink: 0;\n  min-height: 0;\n}\n.comHeightAuto-f7f16 > div {\n  flex: 1;\n}\n.flex-ca980 {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-ca980 > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-ca980 > * {\n  height: 100%;\n}\n.error-d4d00 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-e9378 {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-e9378 .tt-d634d {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-e9378 .info-d57d6 {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),s.locals={slot:"slot-ced90",lyFlexColumn:"lyFlexColumn-f7fd6",lyFlexRow:"lyFlexRow-c8e04",justifyContentFlexStart:"justifyContentFlexStart-b95f6",justifyContentFlexCenter:"justifyContentFlexCenter-e1ca1",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-ef832",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-ad880",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-a2f09",alignItemsFlexStart:"alignItemsFlexStart-a8880",alignItemsFlexCenter:"alignItemsFlexCenter-c6d62",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-d7b4c",debugFocus:"debugFocus-def53",com:"com-f9041",comHeightAuto:"comHeightAuto-f7f16",flex:"flex-ca980",error:"error-d4d00",errorRT:"errorRT-e9378",tt:"tt-d634d",info:"info-d57d6"};const c=s},685:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(758),r=o.n(n),i=o(935),s=o.n(i)()(r());s.push([e.id,".debugger-fed31 {\n  width: 100%;\n  height: 100%;\n  background-color: #1b1b1b73;\n}\n.debugger-fed31 .titlebar-f7fe6 {\n  font-size: 12px;\n  line-height: 23px;\n  position: absolute;\n  top: 10%;\n  height: 23px;\n  padding: 0px 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  align-items: center;\n  background-color: #faf8df;\n}\n.debugger-fed31 .titlebar-f7fe6 .resume-ebcb6 {\n  display: flex;\n  padding-left: 4px;\n  cursor: pointer;\n}\n.debugger-fed31 .titlebar-f7fe6 .resume-ebcb6 svg path {\n  fill: #FA6400;\n}\n",""]),s.locals={debugger:"debugger-fed31",titlebar:"titlebar-f7fe6",resume:"resume-ebcb6"};const c=s},935:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",n=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),n&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),n&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,n,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var c=0;c<this.length;c++){var a=this[c][0];null!=a&&(s[a]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&s[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),o&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=o):u[2]=o),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},758:e=>{"use strict";e.exports=function(e){return e[1]}},443:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(591),r=o.n(n),i=o(740),s=o.n(i),c=o(855),a=o.n(c),l=o(51),u=o.n(l),d=o(656),p=o.n(d),f=o(539),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},v++||(g=r()(f.A,y)),m},m.unuse=function(){v>0&&! --v&&(g(),g=null)};const h=m},148:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(591),r=o.n(n),i=o(740),s=o.n(i),c=o(855),a=o.n(c),l=o(51),u=o.n(l),d=o(656),p=o.n(d),f=o(348),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},v++||(g=r()(f.A,y)),m},m.unuse=function(){v>0&&! --v&&(g(),g=null)};const h=m},462:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(591),r=o.n(n),i=o(740),s=o.n(i),c=o(855),a=o.n(c),l=o(51),u=o.n(l),d=o(656),p=o.n(d),f=o(374),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},v++||(g=r()(f.A,y)),m},m.unuse=function(){v>0&&! --v&&(g(),g=null)};const h=m},165:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(591),r=o.n(n),i=o(740),s=o.n(i),c=o(855),a=o.n(c),l=o(51),u=o.n(l),d=o(656),p=o.n(d),f=o(365),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},v++||(g=r()(f.A,y)),m},m.unuse=function(){v>0&&! --v&&(g(),g=null)};const h=m},997:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(591),r=o.n(n),i=o(740),s=o.n(i),c=o(855),a=o.n(c),l=o(51),u=o.n(l),d=o(656),p=o.n(d),f=o(685),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=u(),m.use=function(e){return y.options=e||{},v++||(g=r()(f.A,y)),m},m.unuse=function(){v>0&&! --v&&(g(),g=null)};const h=m},591:e=>{"use strict";var t=[];function o(e){for(var o=-1,n=0;n<t.length;n++)if(t[n].identifier===e){o=n;break}return o}function n(e,n){for(var i={},s=[],c=0;c<e.length;c++){var a=e[c],l=n.base?a[0]+n.base:a[0],u=i[l]||0,d="".concat(l," ").concat(u);i[l]=u+1;var p=o(d),f={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var m=r(f,n);n.byIndex=c,t.splice(c,0,{identifier:d,updater:m,references:1})}s.push(d)}return s}function r(e,t){var o=t.domAPI(t);o.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,r){var i=n(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var c=o(i[s]);t[c].references--}for(var a=n(e,r),l=0;l<i.length;l++){var u=o(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=a}}},51:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},855:(e,t,o)=>{"use strict";e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},740:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var n="";o.supports&&(n+="@supports (".concat(o.supports,") {")),o.media&&(n+="@media ".concat(o.media," {"));var r=void 0!==o.layer;r&&(n+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),n+=o.css,r&&(n+="}"),o.media&&(n+="}"),o.supports&&(n+="}");var i=o.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},656:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},822:(e,t,o)=>{"use strict";o.d(t,{A:()=>l,g:()=>u});var n=o(483),r=o(50),i=o(238),s=function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function c(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))};const c="_rootFrame_",a=e=>`未找到组件(${e.namespace}@${e.version})定义`;function l(e,t={}){const{observable:o=e=>e}=t,{json:d,getComDef:p,env:f,_env:m,ref:g,onError:v=()=>{},logger:y=console,debug:h,debugLogger:_,_isNestedRender:b,_isNestCom:I,_context:x,_getComProps:C,_getSlotValue:E,_frameId:w,_getSlotPropsMap:S,_getScopeInputTodoMap:j,rootId:k}=e,O=e.scenesOperate||f.scenesOperate,{_v:A,id:P,slot:R,coms:$={},comsAutoRun:T={},cons:F=[],pinRels:N={},pinProxies:D={},pinValueProxies:M={},type:B}=d;let L=$;"2024-diff"===A&&(L=(0,r.C6)($,{get(e,t){var o;const n=e[t];if(!n||n._ready)return n;const{def:i}=n;n._ready=!0;const s=p(i),c=n.model,a=c.data;return c.data=a?Object.assign((0,r.y_)(s.data),a):(0,r.y_)(s.data),(null===(o=i.rtType)||void 0===o?void 0:o.match(/^js/gi))||(n.inputs=s.inputs.concat(c.inputAry),n.outputs=s.outputs.concat(c.outputAry)),n}}));const K=f,V={},W={},q={},H={},z={};Object.keys(F).forEach((e=>{const t=F[e],{startPinParentKey:o}=t[0];o&&(z[o]=e)}));const J={},U={},X={},G={},Y={},Z={},Q={},ee={},te={},oe=new u;function ne(e,t,o){if(!I)if("com"===e){const{com:e,pinHostId:i,val:s,fromCon:c,notifyAll:a,comDef:l,conId:u}=t;_?_("com","output",{id:e.id,pinHostId:i,val:(0,r.eq)(s),fromCon:c,notifyAll:a,comDef:l,sceneId:d.id,conId:u},o):(0,n.$)(e.title,l,i,s)}else if("frame"===e){const{comId:e,frameId:n,pinHostId:i,val:s,sceneId:c,conId:a}=t;_&&_("frame","output",{comId:e,frameId:n,pinHostId:i,val:(0,r.eq)(s),sceneId:c||d.id,conId:a},o)}}function re(e,t){if(I)return;const{com:o,pinHostId:i,val:s,frameKey:c,finishPinParentKey:a,comDef:l,conId:u}=e;u&&(_?_("com","input",{id:o.id,pinHostId:i,val:(0,r.eq)(s),frameKey:c,finishPinParentKey:a,comDef:l,sceneId:d.id,conId:u},t):(0,n.sK)(o.title,l,i,s))}function ie(o,n,i,s){var a,u,p;const f=D[o.comId+"-"+o.pinId];let m=o;if(f){if("myFrame"===f.type){const e=S?S(`${o.comId}-${f.frameId}`):V[`${o.comId}-${f.frameId}`];if(e){const t=Object.entries(e);if(1===t.length){const e=t[0][1];if(e.curScope)e.inputs[f.pinId](i);else{(j?j():te)[`${o.comId}-${f.frameId}`]={pinId:f.pinId,value:i}}}else{const n=t.length>1;Object.entries(e).forEach((([e,t])=>{if("slot"===e&&n)return;const{curScope:r}=t;r&&r.parentComId===o.comId&&t.inputs[f.pinId](i)}))}}else{(j?j():te)[`${o.comId}-${f.frameId}`]={pinId:f.pinId,value:i}}return}const u="mybricks.core-comlib.frame-output"===(null===(a=m.def)||void 0===a?void 0:a.namespace);if(u)m=Object.assign(Object.assign({},o),{type:f.type,frameId:f.frameId,pinId:f.pinId,direction:"inner-input",comId:(o.targetFrameKey||o.frameKey).split("-")[0]});else{if(s&&s.finishPinParentKey!==m.startPinParentKey)return;if("frame"===f.type){if("mybricks.core-comlib.fn"===m.def.namespace){const{frameId:o,comId:r,pinId:s}=f;if(F[(r?`${r}-${o}`:`${o}`)+"-"+s])l(Object.assign(Object.assign({},e),{_getComProps:e=>le(e,n),_getSlotValue:e=>ue(e,n),_getSlotPropsMap:e=>S?S(e):V[e],_getScopeInputTodoMap:()=>j?j():te,_frameId:o,ref:e=>{const t=e.getComInfo(m.comId),{configs:o}=t.model.data,{frameId:r,pinId:s}=f,c=t.outputs,a=null;if(null==c?void 0:c.length){const t=le(m.comId,n);c.forEach((o=>{e.outputs(o,(e=>{const r=t.outputs[o];r&&r(e,n)}))}))}o&&Object.entries(o).forEach((([t,o])=>{e.inputs[t](o,void 0,!0,r,a)})),e.inputs[s](i,void 0,!0,r,a),e.run(r,a)}}),t);else if(ne("frame",{comId:r,frameId:o,pinHostId:s,val:i,sceneId:null}),o!==c)if(d.id===o)H[s](i);else{const e=le(m.comId,n);null==O||O.open({frameId:o,todo:{pinId:s,value:i},comProps:e,parentScope:e})}return}const o=le(m.comId,n);let s;return s={id:(0,r.uR)(10,16),frameId:f.frameId,parent:n,proxyComProps:o},ge({options:f,value:i,scope:s,comProps:o}),void(u||me({frameId:f.frameId,scope:s}))}X[`${f.frameId}-${f.pinId}`]=i}}if("com"===m.type)s?s.finishPinParentKey===m.startPinParentKey&&de(m,i,n):de(m,i,n);else{if("frame"!==m.type)throw new Error("尚未实现");if(s&&s.finishPinParentKey!==m.startPinParentKey)return;if(m.comId&&(null==f?void 0:f.frameId)!==P){if("inner-input"===m.direction){const e=W[m.comId+"-"+m.frameId+"-"+((null==n?void 0:n.id)?n.id+"-":"")+m.pinId]||W[m.comId+"-"+m.frameId+"-"+((null===(u=null==n?void 0:n.parent)||void 0===u?void 0:u.id)?n.parent.id+"-":"")+m.pinId]||W[m.frameKey+"-"+m.pinId];e?e(i):console.log("未找到proxyFn: ",m)}else if("inner-output"===m.direction&&"joint"===m.pinType){const e=F[m.comId+"-"+m.frameId+"-"+m.pinId];e&&se({logProps:null,cons:e,val:i})}}else{const e=null==n?void 0:n.proxyComProps;if(e){const t=e.outputs[m.pinId];if(t)return void t(i,n.parent)}null===(p=H[m.pinId])||void 0===p||p.call(H,i)}}}function se({logProps:e,cons:t,val:o,curScope:n,fromCon:r,notifyAll:a,fromCom:l,isAutoRun:u}){!I&&h&&t.sort(((e,t)=>e.isBreakpoint&&!t.isBreakpoint?-1:!e.isBreakpoint&&t.isBreakpoint?1:0)),t.forEach((t=>s(this,void 0,void 0,(function*(){var s,d;const{comId:p,pinId:f,pinType:m,timerPinInputId:g,frameKey:v}=t,y=L[p];if(r){if(r.finishPinParentKey!==t.startPinParentKey)return}else if(!(0,i.i)(l,t,e))return;if(I||!h||!t.isIgnored){if(!I&&h&&(null===(s=x.debuggerPanel)||void 0===s?void 0:s.hasBreakpoint(t))){let o=!0;yield null===(d=x.debuggerPanel)||void 0===d?void 0:d.wait(t,(()=>{o=!1,e&&(e[1].conId=t.id,e&&ne(...e,!0))})),o&&e&&(e[1].conId=t.id,e&&ne(...e))}else e&&ne(...e);if("timer"===m)ce({value:o,curScope:n,inReg:t,notifyAll:a,fromCon:r});else if(a){const e=t.frameKey;if(e===c||u)ae({pinId:f,value:o,component:y,curScope:null,comId:p,val:o,timerPinInputId:g,frameKey:e,inReg:t,notifyAll:a,fromCon:r});else{const[i,s]=e.split("-");if(G[e]){const o=G[e],n=o[l.id];n?n[t.id]=t:o[l.id]={[t.id]:t}}else{(G[e]={})[l.id]={[t.id]:t}}if(l.parentComId)ae({pinId:f,value:o,component:y,curScope:n,comId:i,val:o,timerPinInputId:g,frameKey:e,inReg:t,notifyAll:a,fromCon:r});else{const n=V[`${i}-${s}`];if(n){const s=Object.entries(n),c=s.length;s.forEach((([n,s])=>{c>1&&"slot"===n||("scope"===(null==s?void 0:s.type)?s.curScope?ae({pinId:f,value:o,component:y,curScope:s.curScope,comId:i,val:o,timerPinInputId:g,frameKey:e,inReg:t,notifyAll:a,fromCon:r}):s.pushTodo((n=>{ae({pinId:f,value:o,component:y,curScope:n,comId:i,val:o,timerPinInputId:g,frameKey:e,inReg:t,notifyAll:a,fromCon:r})})):ae({pinId:f,value:o,component:y,curScope:s.curScope,comId:i,val:o,timerPinInputId:g,frameKey:e,inReg:t,notifyAll:a,fromCon:r}))}))}}}}else ae({pinId:f,value:o,component:y,curScope:n,comId:p,val:o,timerPinInputId:g,frameKey:v,inReg:t,notifyAll:a,fromCon:r})}}))))}function ce({pinId:e,value:t,curScope:o,inReg:n,notifyAll:r,fromCon:i}){let s=o;const a=e?Object.assign(Object.assign({},n),{pinId:e}):n;if(r){const e=a.frameKey;if(!e)throw new Error("数据异常，请检查toJSON结果.");ie(a,e===c?{}:o,t,i)}else{const e=a.frameKey.split("-");if(e.length>=2&&!s){const o=fe(e[0],e[1],null,!1);"scope"===(null==o?void 0:o.type)?o.curScope?ie(a,o.curScope,t,i):o.pushTodo((e=>{ie(a,e,t,i)})):ie(a,s,t,i)}else ie(a,s,t,i)}}function ae({pinId:e,value:t,component:o,curScope:n,comId:r,val:i,timerPinInputId:s,frameKey:c,inReg:a,notifyAll:l,fromCon:u}){const{isReady:d,isMultipleInput:p,pinId:f,value:m,cb:g}=function({pinId:e,value:t,component:o,curScope:n,comId:r,val:i}){const s=e.indexOf("."),c={pinId:e,value:t,isReady:!0,isMultipleInput:!1,cb:null};if(o&&-1!==s){const t=o.id+""+((null==n?void 0:n.id)?`-${n.id}`:""),{inputs:r}=o,a=e.substring(0,s);c.pinId=a;const l=e.substring(s+1);let u=J[t];u||(u=J[t]={}),u[l]=i;const d=new RegExp(`${a}.`),p=r.filter((e=>!!e.match(d)));Object.keys(u).length===p.length?(c.value=u,c.isMultipleInput=!0,c.cb=()=>{Reflect.deleteProperty(J,t)}):c.isReady=!1}return c}({pinId:e,value:t,component:o,curScope:n,comId:r,val:i});if(d){const e={pinId:p?f:null,value:m,curScope:n,inReg:a,notifyAll:l,fromCon:u};if(s){const t=s+"-"+c+((null==n?void 0:n.id)?`-${n.id}`:""),o=U[t];if(o){const{ready:n,todo:r}=o;if(n){let o=!1;Object.entries(r).forEach((([t,n])=>{t===f?(ce(e),o=!0):n()})),o||ce(e),null==g||g(),Reflect.deleteProperty(U,t)}else r[f]=()=>{null==g||g(),ce(e)}}else U[t]={ready:!1,todo:{[f]:()=>{null==g||g(),ce(e)}}}}else null==g||g(),ce(e)}}function le(e,t,n){var i,s,l;const u=L[e];if(!u)return null;const d=u.def,m=null===(i=d.rtType)||void 0===i?void 0:i.match(/^js/gi);if(C&&!m&&!n||C&&"mybricks.core-comlib.var"===d.namespace&&!n)return C(e);const g=e+(u.frameId||c);let _,b=V[g];b||(b=V[g]={});let I,x=t;for(!x&&u.parentComId&&u.frameId&&(x=null===(l=null===(s=V[`${u.parentComId}-${u.frameId}`])||void 0===s?void 0:s.slot)||void 0===l?void 0:l.curScope);x;){x.dynamicId&&(I=x.dynamicId);const t=x.id+"-"+e;if(x.frameId===u.frameId){_=x.id;const o=I?b[`${_}-${I}-${e}`]:b[t];if(o)return o;{const e=x.parentComId;if(!e)break;if(e===u.paramId||e===u.parentComId)break}}x=x.parent}const E=(_?_+"-":"")+e;if(_){(ee[_]||(ee[_]={}))[g]=E}const w=b[E];if(w)return w;const S=u.model,j=JSON.parse(JSON.stringify(S.data)),k=JSON.parse(JSON.stringify(S.style));k.__model_style__=!0;const A={},P={},R={},T={},M=function(t){var o;return(0,r.C6)(r.jL?{}:(null===(o=u.inputs)||void 0===o?void 0:o.reduce(((e,t)=>{const o=t.indexOf(".");return-1!==o?e[t.slice(0,o)]=!0:e[t]=!0,e}),{}))||{},{ownKeys:e=>u.inputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(o,n)=>function(o){if("[object Symbol]"===Object.prototype.toString.call(n))return;const i=null==t?void 0:t.inputs;if(i){const e=i[n];"function"==typeof e&&e(o)}A[n]=o;const s=P[n];s&&(s.forEach((({val:t,fromCon:i,fromScope:s,next:c})=>{var a;o(t,(0,r.C6)(r.jL?{}:(null===(a=N[`${e}-${n}`])||void 0===a?void 0:a.reduce(((e,t)=>(e[t]=!0,e)),{}))||{},{get:(e,t)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;const o=c||W()[t];if("function"!=typeof o)throw new Error(`outputs.${t} not found`);o(e,s||x,i,!1,t)}}))})),P[n]=void 0)}})},B=(0,r.C6)({},{get:(o,n)=>function(o){if("[object Symbol]"===Object.prototype.toString.call(n))return;const r=N[e+"-"+n];if(r){const i={},s={};return r.forEach((e=>{i[e]=t=>{s[e]=t}})),Promise.resolve().then((()=>{de({comId:e,def:d,pinId:n},o,t,s)})),i}de({comId:e,def:d,pinId:n},o,t)}}),K=(0,r.C6)({},{get:(t,o)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const n=D[e+"-"+o];n&&(null==O||O.inputs(Object.assign(Object.assign({},n),{value:t,parentScope:J})))}}),W=function(o){var n;return(0,r.C6)(r.jL?{}:(null===(n=u.outputs)||void 0===n?void 0:n.reduce(((e,t)=>(e[t]=!0,e)),{}))||{},{ownKeys:e=>u.outputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(n,r,i){const s=function(n,i,s,c){if("[object Symbol]"===Object.prototype.toString.call(r))return;const l="boolean"==typeof i&&i;if(l){if(u.parentComId){const t=`${u.parentComId}-${u.frameId}`;Z[t]?Z[t][e]=!0:Z[t]={[e]:!0}}if(Y[`${u.id}${(null==t?void 0:t.id)?`-${t.id}`:""}`]=n,u.global&&!c)return void(null==O||O.exeGlobalCom({com:u,value:n,pinId:r}))}const m=arguments,g=null==o?void 0:o.outputs;if(g){const e=g[r];"function"==typeof e&&e(n)}let y;i&&"object"==typeof i&&(y=i);const h=p(d);if(!h)return void v(a(d));const _=S.outputEvents;let b;if(_){const t=_[r];if(t&&Array.isArray(t)){const o=t.find((e=>e.active));if(o){const{type:t}=o;switch(t){case"none":b=[];break;case"fx":const i=D[e+"-"+r];if("frame"===(null==i?void 0:i.type)){const e=`${i.frameId}-${i.pinId}`;b=F[e]||[],X[e]=n}else b=[];break;case"defined":break;default:if(b=[],Array.isArray(null==f?void 0:f.events)){const e=f.events.find((e=>{if(e.type===t)return e}));e&&"function"==typeof e.exe&&e.exe({options:o.options})}}}}}b=b||F[e+"-"+r],(null==b?void 0:b.length)?se(m.length>=3&&void 0===c?{logProps:["com",{com:u,pinHostId:r,val:n,fromCon:s,notifyAll:l,comDef:h}],cons:b,val:n,curScope:y,fromCon:s,fromCom:u}:{logProps:["com",{com:u,pinHostId:r,val:n,fromCon:s,notifyAll:l,comDef:h}],cons:b,val:n,curScope:y||t,fromCon:s,notifyAll:l,fromCom:u}):ne("com",{com:u,pinHostId:r,val:n,fromCon:s,notifyAll:l,comDef:h})};return s.getConnections=()=>F[e+"-"+r]||[],s}})},q=(0,r.C6)({},{get:(e,t,o)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;R[t]=e;const o=T[t];o&&(o.forEach((t=>{e(t)})),T[t]=void 0)}}),H=(0,r.C6)({},{get:(o,n,r)=>function(o){if("[object Symbol]"===Object.prototype.toString.call(n))return;const r=F[e+"-"+n];r?se({logProps:["com",{com:u,pinHostId:n,val:o,comDef:d}],cons:r,val:o,curScope:t}):ne("com",{com:u,pinHostId:n,val:o,comDef:d})}});let z=new Set,J={id:u.id,title:u.title,frameId:u.frameId,parentComId:u.parentComId,data:m?j:o(j),style:m?k:o(k),_inputRegs:A,scopeId:_,addInputTodo:(e,t,o,n,r)=>{let i=P[e];i||(P[e]=i=[]),i.push({val:t,fromCon:o,fromScope:n,next:r})},inputs:M(),inputsCallable:B,_inputsCallable:K,outputs:W(),_inputs:q,_outputs:H,clone(e){const t={inputs:M(e),outputs:W(e)};return Object.setPrototypeOf(t,this),t},_notifyBindings:function(t){u.global?O.var.changed(e,t):oe.changed(e,t)},logger:y,destroy:()=>{J=null,z.forEach((({id:e,callBack:t,global:o})=>{o?O.var.destroy(e,t):oe.destroy(e,t)}))},onError:h?t=>{v({comId:e,error:t,title:u.title})}:e=>{v(e,{id:u.id,title:u.title,frameId:u.frameId,parentComId:u.parentComId})}};b[E]=J;const{bindingsFrom:U}=u.model;return U&&Object.entries(U).forEach((([e,t])=>{const o=t=>{let o=J;const n=e.split(".");n.forEach(((e,r)=>{r!==n.length-1?o=o[e]:o[e]=t}))};$[t].global?(z.add({id:t,callBack:o,global:!0}),O.var.regist(t,o)):(z.add({id:t,callBack:o}),oe.regist(t,o))})),J}function ue(e,t){let o=X[`${e}${t?`-${t.id}-${t.frameId}`:""}`];return void 0===o&&(null==t?void 0:t.parent)&&(o=ue(e,t.parent)),(0,r.y_)(o)}function de(e,t,o,n){var i,s,l,u,f;const{comId:g,def:h,pinId:_,pinType:b,frameKey:I,finishPinParentKey:S,timerPinInputId:j,targetFrameKey:A}=e;if("ext"===b){const n=V[g]||le(g,o);if("_setStyle"===_){const{scopeId:e}=n,o=k?e?`${k}-${e}-${g}`:`${k}-${g}`:e?`${e}-${g}`:g;null===(s=null===(i=null==x?void 0:x.options)||void 0===i?void 0:i.stylization)||void 0===s||s.setStyle(o,t)}else{const e=n.style;let o=e.display;"show"===_?o="":"hide"===_?o="none":"showOrHide"===_&&(o=void 0===t?"none"===o?"":"none":t?"":"none"),e.display=o}const r=p(h);if(!r)return void v(a(h));re({com:n,val:t,pinHostId:_,frameKey:I,finishPinParentKey:S,comDef:r,conId:e.id})}else if("config"===b){const n=le(g,o),r=p(h);if(!r)return void v(a(h));re({com:n,pinHostId:_,val:t,frameKey:I,finishPinParentKey:S,comDef:r,conId:e.id});const{extBinding:i}=e,s=i.split(".");let c=n;s.forEach(((e,o)=>{o!==s.length-1?c=c[e]:c[e]=t}))}else if("timer"===b){const n=le(g,o),r=p(h);if(!r)return void v(a(h));re({com:n,pinHostId:_,val:t,frameKey:I,finishPinParentKey:S,comDef:r,conId:e.id});const i=j+"-"+I+((null==o?void 0:o.id)?`-${o.id}`:""),s=U[i];if(s){const{todo:e}=s;Object.entries(e).forEach((([e,t])=>t())),Reflect.deleteProperty(U,i)}else U[i]={ready:!0,todo:{}}}else if(null===(l=h.rtType)||void 0===l?void 0:l.match(/^js/gi)){const n=L[g];if(n){const i=le(g,o),s=p(h);if(!s)return void v(a(h));if(n.global){const e=null==O?void 0:O.getGlobalComProps(g);e&&(i.data.val=e.data.val)}const l=null==o?void 0:o.id,f=(l?l+"-":"")+g;n.inputs.find((e=>e===_))?re({com:n,val:t,pinHostId:_,frameKey:I,finishPinParentKey:S,comDef:s,conId:e.id}):Object.entries(t).forEach((([t,o])=>{re({com:n,val:o,pinHostId:`${_}.${t}`,frameKey:I,finishPinParentKey:S,comDef:s,conId:e.id})})),q[f]||(q[f]=!0,s.runtime({env:K,_env:m,data:i.data,inputs:i.inputs,outputs:i.outputs,_notifyBindings:i._notifyBindings,_inputsCallable:i._inputsCallable,logger:y,onError:i.onError}));const b=i._inputRegs[_];"function"==typeof b?b(t,(0,r.C6)(r.jL?{}:(null===(u=N[`${g}-${_}`])||void 0===u?void 0:u.reduce(((e,t)=>(e[t]=!0,e)),{}))||{},{get:(t,n)=>function(t){if("[object Symbol]"!==Object.prototype.toString.call(n)){if(M){const e=M[`${g}-${_}`];if(e){const n=e.frameId,r=`${n===d.id?c:A||I}-${e.pinId}`,i=n===w?ue:E||ue;void 0===(t=i(r,o))&&(t=i(r,null))}}if(C){le(g,o,!0).outputs[n](t,o,e)}else i.outputs[n](t,o,e)}}})):(console.log("计算组件的addInputTodo: ",h),i.addInputTodo(_,t,e,o))}}else{const i=le(g,o);if(!i)return;const s=p(h);if(!s)return void v(a(h));re({com:i,pinHostId:_,val:t,frameKey:I,finishPinParentKey:S,comDef:s,conId:e.id});const c=i._inputRegs[_];if("function"==typeof c){let s;s=n||(0,r.C6)(r.jL?{}:(null===(f=N[`${g}-${_}`])||void 0===f?void 0:f.reduce(((e,t)=>(e[t]=!0,e)),{}))||{},{get:(t,n)=>function(t){if("[object Symbol]"!==Object.prototype.toString.call(n))if(C){le(g,o,!0).outputs[n](t,o,e)}else i.outputs[n](t,o,e)}}),c(t,s)}else i.addInputTodo(_,t,e,o,C?(t,n,r,i,s)=>{le(g,o,!0).outputs[s](t,o,e)}:null)}if(S){const e=F[z[S]];e&&!N[`${g}-${_}`]&&se({logProps:null,cons:e,val:void 0})}}function pe(e,t){let o;return(null==e?void 0:e.comAry)&&e.comAry.find((e=>{if(e.id===t)return o=e,e;if(e.slots)for(let n in e.slots)if(o=pe(e.slots[n],t),o)return o})),o}function fe(e,t,o,n){var i;const s="string"!=typeof t,c=s?t.id:t,a=`${e}-${c}`;let l=V[a];l||(l=V[a]={});let u=o?o.id:"slot",d=l[u];if(n&&!d&&console.log("不应该再走到这儿了: ",{comId:e,slotId:c,scope:o,notifyAll:n}),!d){let n=s?t:Q[`${e}-${c}`];if(!n){const t=pe(R,e);if(!(null==t?void 0:t.slots))return null;n=null==t?void 0:t.slots[c]}const p={};let f;if(o){const t=V[e+"-"+c];t&&(f=t.todo)}const m={scope:o,todo:f},g={},v={},y={};if(!r.jL){const t=$[e].frames;if(t){const e=t.find((({id:e})=>e===c));if(e){const{_inputs:t,inputs:o,outputs:n}=e;t.forEach((({id:e})=>{g[e]=!0})),o.forEach((({id:e})=>{v[e]=!0})),n.forEach((({id:e})=>{y[e]=!0}))}}}const h=(0,r.C6)(g,{get:(e,t)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(p[t]=e)}}),_=new Set,b=(0,r.C6)(v,{get(t,o){const n=function(t,n){if("[object Symbol]"===Object.prototype.toString.call(o))return;let r=n||m.scope;const i=e+"-"+c+"-"+o,s=F[i],a=`${i}${r?`-${r.id}-${r.frameId}`:""}`;_.add(a),X[a]=t,s?se({logProps:["frame",{comId:e,frameId:c,pinHostId:o,val:t}],cons:s,val:t,curScope:r}):ne("frame",{comId:e,frameId:c,pinHostId:o,val:t})};return n.getConnections=()=>F[e+"-"+c+"-"+o]||[],n}}),I=(0,r.C6)(y,{get:(t,n,r)=>function(t){var r;"[object Symbol]"!==Object.prototype.toString.call(n)&&(W[`${e}-${c}-${null==o?void 0:o.id}-${n}`]=t,W[`${e}-${c}-${null===(r=null==o?void 0:o.parent)||void 0===r?void 0:r.id}-${n}`]=t,W[u+"-"+n]=t,W[a+"-"+n]=t)}});let x={};if(d=l[u]={type:null==n?void 0:n.type,run(t,o){let n=m.scope;if(t&&n!==t&&(m.scope=t,n=t),o){const t=te[`${e}-${n.frameId}`];if(t){const{pinId:e,value:o}=t;d.inputs[e](o)}return}const r=(null==n?void 0:n.id)||"none";if(x[r]||(x[r]=!0,me({comId:e,frameId:c,scope:n})),Array.isArray(m.todo)&&(m.todo.forEach((e=>{Promise.resolve().then((()=>{e(n)}))})),m.todo=void 0),n&&"slot"!==u){const t=G[`${e}-${c}`];Promise.resolve().then((()=>{t&&Object.entries(t).forEach((([e,t])=>{if(!L[e].parentComId){const o=Object.entries(t).map((([e,t])=>t));o.length&&se({logProps:null,cons:o,val:Y[e],curScope:n,notifyAll:!0,fromCom:L[e],isAutoRun:!0})}}))}))}},destroy(){if(o){let t=!1;const n=o.parent;if(n&&ee[n.id]||(t=!0),t){const e=ee[o.id];e&&(Object.entries(e).forEach((([e,t])=>{Reflect.deleteProperty(q,t),V[e][t]&&!V[e][t].setSlotValue&&V[e][t].destroy(),Reflect.deleteProperty(V[e],t)})),Reflect.deleteProperty(ee,o.id))}Reflect.deleteProperty(l,`${o.id}-${o.frameId}`);const r=`${o.parentComId}-${o.frameId}`,i=Z[r];i&&Object.keys(i).forEach((e=>{Reflect.deleteProperty(Y,`${e}-${o.id}`)})),Reflect.deleteProperty(te,`${e}-${o.frameId}`)}_.forEach((e=>{Reflect.deleteProperty(X,e)})),Reflect.deleteProperty(l,u),d=null},_inputs:h,_inputRegs:p,inputs:b,outputs:I,get curScope(){return m.scope},setCurScope(e){m.scope=e},get todo(){return m.todo},pushTodo(e){m.todo||(m.todo=[]),m.todo.push(e)},setSlotValue(t,o){const n=o||m.scope;Object.entries(t).forEach((([t,o])=>{const r=`${e+"-"+c+"-"+t}${n?`-${n.id}-${n.frameId}`:""}`;_.add(r),X[r]=o}))}},o){(ee[i=o.id.split("-")[0]]||(ee[i]={}))[a]=u}}return d}function me(e){const{comId:t,frameId:o,scope:n}=e,r=T[t?`${t}-${o}`:`${o}`];r&&r.forEach((e=>{const{id:t,def:o}=e;if(L[t]){const e=le(t,n),r=p(o);if(!r)return void v(a(o));r.runtime({env:K,_env:m,data:e.data,inputs:e.inputs,outputs:e.outputs,_inputsCallable:e._inputsCallable,logger:y,onError:e.onError})}}))}function ge({options:e,value:t,scope:o,log:n=!0,comProps:r}){const{frameId:i,comId:s,pinId:a,sceneId:l}=e,u=F[(s?`${s}-${i}`:`${i}`)+"-"+a];if(X[`${i}-${a}`]=t,u)se({logProps:["frame",{comId:s,frameId:i,pinHostId:a,val:t,sceneId:l}],cons:u,val:t,curScope:o});else if(n&&ne("frame",{comId:s,frameId:i,pinHostId:a,val:t,sceneId:l}),i!==c)if(d.id===i)H[a](t);else{if(!o)return;null==O||O.open({frameId:i,todo:{pinId:a,value:t},comProps:r,parentScope:o.proxyComProps})}}const ve={get({comId:e,slotId:t,slot:o,scope:n,_ioProxy:r}){let i;if(r&&(r.inputs||r.outputs||r._inputs||r._outputs)&&(i=r),t)return o&&(Q[`${e}-${t}`]=o),fe(e,o||t,n);{const t=le(e,n);return i?t.clone(i):t}},getComInfo:e=>L[e]};if("function"==typeof g){g({style:null==R?void 0:R.style,run(e=c,t=null){me({frameId:e,scope:t})},inputs:(0,r.C6)({y:()=>({}),n:()=>{var e;return(null===(e=d.inputs)||void 0===e?void 0:e.reduce(((e,t)=>(e[t.id]=!0,e)),{}))||{}}},{get:(o,n)=>function(o,r=void 0,i=!0,s=c,a=null){var u;if("[object Symbol]"!==Object.prototype.toString.call(n)){if(null===(u=d.inputs)||void 0===u?void 0:u.length){const[r,i]=n.split("&execute&");if(i){const n=N[`${c}-${r}`];if(n){const c=null;return void l(Object.assign(Object.assign({},e),{_getComProps:e=>le(e,c),_getSlotValue:e=>ue(e,c),_frameId:s,ref:e=>{const{inputs:t,outputs:s}=e;n.forEach((e=>{s(e,((...t)=>{const o=`${e}&execute&${i}`;H[o](...t),Reflect.deleteProperty(H,o)}))})),t[r](o)}}),t)}}}ge({options:{frameId:s,pinId:n,sceneId:r},value:o,scope:a,log:i})}}}),outputs(e,t){H[e]=t},get:ve.get,getComInfo:ve.getComInfo})}return ve}class u{constructor(){this._varChangeCallBack=new Map}regist(e,t){let o=this._varChangeCallBack.get(e);o||(o=new Set,this._varChangeCallBack.set(e,o)),o.add(t)}destroy(e,t){const o=this._varChangeCallBack.get(e);o&&o.delete(t)}changed(e,t){const o=this._varChangeCallBack.get(e);o&&o.forEach((e=>{e(t)}))}}},238:(e,t,o)=>{"use strict";function n(e,t,o){var n,r;const i=null===(n=null==e?void 0:e.def)||void 0===n?void 0:n.namespace,s=null===(r=null==o?void 0:o[1])||void 0===r?void 0:r.pinHostId;return!(i&&s&&("test.text"===i&&"testOut"===s||"fangzhou.normal-pc.table-blocks"===i&&"rowSelection"===s)&&t.startPinParentKey)}o.d(t,{i:()=>n})},483:(e,t,o)=>{"use strict";o.d(t,{$:()=>s,qr:()=>r,sK:()=>i});let n=!1;function r(){n=!0}function i(e,t,o,r){if(n)return;let i;try{i=JSON.stringify(r)}catch(e){i=r}console.log(`%c [MyBricks] 输入项 %c ${e||t.title||t.namespace} | ${o} -> ${i}`,"color:#FFF;background:#000","","")}function s(e,t,o,r){if(n)return;let i;try{i=JSON.stringify(r)}catch(e){i=r}console.log(`%c [MyBricks] 输出项 %c ${e||t.title||t.namespace} | ${o} -> ${i}`,"color:#FFF;background:#fa6400","","")}},29:(e,t,o)=>{"use strict";o.d(t,{s:()=>_,y:()=>a});var n=o(12),r=o.n(n),i=o(50);const s="__render-web-createElement__";let c;function a(e){const{pxToRem:t,pxToVw:o}=e;r()[s]||(r()[s]=!0,c=r().createElement,r().createElement=function(...e){let[s,a]=e;if(a){const d=a.style;if(t&&d?Object.keys(d).forEach((e=>{const t=d[e];"string"==typeof t&&-1!==t.indexOf("px")&&(d[e]=(0,i.a8)(t))})):o&&d&&Object.keys(d).forEach((e=>{const t=d[e];"string"==typeof t&&-1!==t.indexOf("px")&&(d[e]=o(t))})),a.__no_hijack__)return c(...e);if(e.length>0&&"function"==typeof s){if(!s.prototype||!(s.prototype instanceof r().Component)&&void 0===s.prototype.isReactComponent){const t=function(e,t=!1){let o=e[l];if(!o){t?(o=(0,n.memo)(e),o.render=u(e.render,!1)):o=u(e);try{e[l]=o}catch(e){}}const r=Object.getOwnPropertyNames(e);return r&&r.forEach((n=>{try{t&&"render"===n||(o[n]=e[n])}catch(e){console.error(e)}})),o}(s);e.splice(0,1,t)}return c(...e)}return"object"==typeof s&&(s.$$typeof,Symbol.for("react.forward_ref")),c(...e)}return c(...e)})}const l="__enhanced__";function u(e,t=!0){function o(t,o){const[,r]=(0,n.useState)([]);let i;return(0,n.useEffect)((()=>()=>{m(r)}),[]),f({update:r,run:()=>{i=e(t,o)}}),i}return o.displayName=e.displayName||e.name,t?(0,n.memo)(o):o}let d=0;const p=[],f=({update:e,run:t})=>{p.unshift(e),t();const o=p.indexOf(e);-1!==o&&p.splice(o,1)},m=e=>{v.destroy(e)};let g=/^_ob\d+_/;const v={_obToKey:{},event:{},reverse:new WeakMap,on(e,t,o){const{_obToKey:n,event:r,reverse:i}=this,s=e+t;n[e]||(n[e]=new Set),n[e].add(s),r[s]||(r[s]=new Set),r[s].add(o),i.get(o)||i.set(o,new Set),i.get(o).add(s)},emit(e,t){const o=new WeakSet,n=this.event[e];n&&n.forEach((e=>{o.has(e)||(o.add(e),e(t))}))},destroy(e){const{reverse:t}=this,o=t.get(e);if(o){const{event:n,_obToKey:r}=this;o.forEach((t=>{const o=n[t],i=t.match(g)[0],s=r[i];s&&(s.delete(t),s.size||Reflect.deleteProperty(r,i)),o.delete(e),o.size||Reflect.deleteProperty(n,t)})),t.delete(e)}},destroy2(e){const{_obToKey:t,event:o,reverse:n}=this,r=t[e];r&&(r.forEach((e=>{o[e].forEach((t=>{const o=n.get(t);o&&(o.delete(e),o.size||n.delete(t))})),Reflect.deleteProperty(o,e)})),Reflect.deleteProperty(t,e))}},y=e=>{(null==e?void 0:e._ob)&&(v.destroy2(e._ob),Object.entries(e).forEach((([,e])=>{y(e)})))},h={set(e,t,o,n,r){const i=r?r.previousValue:Reflect.get(e,t,n),s=r?r.next(o):Reflect.set(e,t,o,n);return(i!==o||Array.isArray(e)&&"length"===t)&&(v.emit(e._ob+t,[]),y(i)),s},get(e,t,o,n){const r=n?n.value:Reflect.get(e,t,o);if(["_ob","constructor",Symbol.toPrimitive,Symbol.toStringTag,Symbol.iterator].includes(t))return r;const s=p[0];if(s)if(Reflect.get(e,"__model_style__",o)){if("display"===t)v.on(e._ob,t,s);else if("styleAry"===t)return r}else v.on(e._ob,t,s);if((0,i.Gv)(r)){if(r._ob)return r;{const n=_(r);return Reflect.set(e,t,n,o),n}}return r}};function _(e){return e._ob?e:(Object.defineProperty(e,"_ob",{value:`_ob${++d}_`,enumerable:!1,writable:!1,configurable:!1}),(0,i.C6)(e,h))}},50:(e,t,o)=>{"use strict";function n(e){return e&&"object"==typeof e}function r(e){return"number"==typeof e&&!isNaN(e)}function i(e,t){const o=e.split("."),n=t.split("."),r=o.length,i=n.length,s=Math.min(r,i);let c=0;for(;c<s;c++){let e=parseInt(o[c]),t=parseInt(n[c]);if(e>t)return 1;if(e<t)return-1}if(r>i){for(let e=c;e<r;e++)if(0!=parseInt(o[e]))return 1;return 0}if(r<i){for(let e=c;e<i;e++)if(0!=parseInt(n[e]))return-1;return 0}return 0}function s(e=5,t=8){const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];if(t=t||o.length,e)for(let r=0;r<e;r++)n[r]=o[0|Math.random()*t];else{let e;n[8]=n[13]=n[18]=n[23]="-",n[14]="4";for(let t=0;t<36;t++)n[t]||(e=0|16*Math.random(),n[t]=o[19==t?3&e|8:e])}return n.join("")}function c(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}o.d(t,{A4:()=>y,BS:()=>p,C6:()=>_,Et:()=>r,Gm:()=>i,Gv:()=>n,RD:()=>c,a8:()=>d,eq:()=>f,iu:()=>g,jL:()=>h,uR:()=>s,y_:()=>v});const a=function(e,t,o,n){return function(r,i){var s,c,a,l,u=parseFloat(i);return!i||u<=t?r:"".concat((s=u/e,c=o,a=Math.pow(10,c+1),l=Math.floor(s*a),10*Math.round(l/10)/a)).concat(n)}},l=a(12,0,5,"rem"),u=(a(3.75,0,5,"vw"),/"[^"]+"|'[^']+'|url\([^)]+\)|(\d*\.?\d+)px/g),d=e=>e.replace(u,l),p=({viewportWidth:e=375,unitPrecision:t=5})=>{const o=a(e/100,0,t,"vw");return e=>e.replace(u,o)};function f(e){return e}let m;function g(){var e;return m||(m=(null===(e=document.getElementById("_mybricks-geo-webview_"))||void 0===e?void 0:e.shadowRoot)||document.head)}function v(e,t=[]){const o=Object.prototype.toString.call(e);if(null===e||"object"!=typeof e||o.startsWith("[object HTML")||"[object FormData]"===o)return e;const n=t.filter((t=>t.original===e))[0];if(n)return n.copy;const r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.keys(e).forEach((o=>{r[o]=v(e[o],t)})),r}function y(e,t=[]){const o=Object.prototype.toString.call(e);if(null===e||"object"!=typeof e||o.startsWith("[object HTML")||"[object FormData]"===o)return e;const n=t.filter((t=>t.original===e))[0];if(n)return n.copy;const r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.getOwnPropertyNames(e).forEach((o=>{const n=Object.getOwnPropertyDescriptor(e,o);n&&"function"==typeof n.get?Object.defineProperty(r,o,{get:n.get,enumerable:n.enumerable,configurable:n.configurable}):r[o]=y(e[o],t)})),r}const h="undefined"!=typeof Proxy,_=(e,t)=>{if(h)return new Proxy(e,t);{let o;if(Array.isArray(e)){const n=[];Object.entries(e).forEach((([e,o])=>{b({target:n,key:e,value:o},t)})),o=n}else{const n={};Object.entries(e).forEach((([e,o])=>{b({target:n,key:e,value:o},t)})),o=n}return e._ob&&Object.defineProperty(o,"_ob",{value:e._ob,enumerable:!1,writable:!1,configurable:!1}),o}},b=({target:e,key:t,value:o},n)=>{["__model_style__","constructor",Symbol.toPrimitive,Symbol.toStringTag,Symbol.iterator].includes(t)?e[t]=o:Object.defineProperty(e,t,{get:()=>n.get(e,t,e,{value:o}),set:r=>n.set(e,t,r,e,{previousValue:o,next:()=>(o=r,!0)}),enumerable:!0,configurable:!1})}},495:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(12),r=o.n(n),i=o(356);const s=o(443).A.locals;class c extends r().PureComponent{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){var t;return{hasError:!0,error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))}}componentDidCatch(e,t){var o,n,r,s;null===(n=null===(o=this.props.options)||void 0===o?void 0:o.errorHandler)||void 0===n||n.call(o,e,t),i.A.error(e),console.error(e),this.setState({error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(r=null==e?void 0:e.toString)||void 0===r?void 0:r.call(e)),errorInfo:(null==t?void 0:t.stack)||(null==t?void 0:t.message)||(null===(s=null==t?void 0:t.toString)||void 0===s?void 0:s.call(t))})}render(){const{hasError:e,error:t,errorInfo:o}=this.state,{children:n,errorTip:i}=this.props;return e?r().createElement("div",{className:s.error},r().createElement("div",null,i||"渲染错误"),r().createElement("div",null,t||o)):n}}},983:(e,t,o)=>{"use strict";o.d(t,{A:()=>u});var n=o(12),r=o.n(n),i=o(882),s=o(822),c=o(492),a=o(356),l=o(495);function u({json:e,options:t,style:o={},className:u="",root:d=!0,from:p}){const f=(0,i.b2)(),m=(0,i.Jh)(),{env:g,onError:v,logger:y,slot:h,getComDef:_}=(0,n.useMemo)((()=>{const{debug:n}=t,{env:r}=m,i=e.slot;if(!r.canvas.isValid&&!t._isNestedRender&&n&&"scene"===p&&i&&"module"!==i.type&&"module"!==i.showType&&(o.flex=1),"module"===(null==i?void 0:i.showType)||"module"===(null==i?void 0:i.type)){const{style:e}=i;o.hasOwnProperty("height")||(e.heightAuto?o.height="fit-content":e.heightFull?o.height="100%":o.height=e.height),o.hasOwnProperty("width")||(e.widthAuto?o.width="fit-content":e.widthFull?o.width="100%":o.width=e.width),i.style.backgroundColor=i.style.backgroundColor||"#ffffff00"}return"module"===e.type&&(i.style.backgroundColor=i.style.backgroundColor||"#ffffff00"),"2024-diff"===f._v&&(e._v=f._v),{env:r,onError:f.onError,logger:f.logger,getComDef:e=>f.getComDef(e),slot:i,_context:f}}),[]),[b,I,x]=(0,n.useMemo)((()=>{var o;try{let o,n=!0;return[(0,s.A)({json:e,getComDef:_,events:t.events,env:g,ref(e){o=e,"function"==typeof t.ref&&(t.ref(e),n=!1)},onError:v,debug:t.debug,debugLogger:t.debugLogger,logger:y,scenesOperate:t.scenesOperate,_env:t._env,_isNestedRender:t._isNestedRender,_isNestCom:t._isNestCom,_context:f,rootId:t.rootId},{observable:f.observable}),o,n]}catch(e){throw console.error(e),a.A.error(`导出的JSON.script执行异常: ${(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(o=null==e?void 0:e.toString)||void 0===o?void 0:o.call(e))}`),new Error("导出的JSON.script执行异常.")}}),[]);return(0,n.useLayoutEffect)((()=>{if(!t.disableAutoRun){if(x){const{inputs:o}=I,n=e.inputs;o&&Array.isArray(n)&&n.forEach((e=>{const{id:n,mockData:r,type:i,extValues:s}=e;let c;if(t.debug)if("config"===i&&(null==s?void 0:s.config)&&"defaultValue"in s.config)try{c=JSON.parse(decodeURIComponent(s.config.defaultValue))}catch(e){c=s.config.defaultValue}else try{c=JSON.parse(decodeURIComponent(r))}catch(e){c=r}o[n](c)}))}I.run()}}),[]),r().createElement(l.A,{errorTip:"页面渲染错误",options:t},r().createElement(c.A,Object.assign({env:g,style:o,_env:t._env,slot:h,getComDef:_,context:b,className:u,createPortal:t.createPortal||(()=>{}),onError:v,logger:y,root:d,options:t},"module"===e.type?{onClick(){var e;null===(e=t.outputs)||void 0===e||e.click()}}:{})))}},893:(e,t,o)=>{"use strict";o.d(t,{A:()=>p});var n=o(12),r=o.n(n),i=o(983),s=o(882),c=o(822),a=o(148),l=function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function c(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))};class u{constructor(e){this.history=[],this.index=-1,"popup"!==e.type&&(this.history[++this.index]={id:e.id,todo:[]})}go(e){this.history=this.history.slice(0,++this.index).concat({id:e,todo:[]})}back(){if(this.index>0)return this.history[--this.index]}forward(){if(this.history.length>this.index+1)return this.history[++this.index]}redirect(e){this.index>-1&&(this.history=this.history.slice(0,this.index).concat({id:e,todo:[]}))}setTodo(e){this.history[this.index].todo=e}}const d=a.A.locals;function p({json:e,options:t}){const o=(0,s.b2)(),i=(0,s.Jh)(),[a,p]=(0,n.useState)(0),[g,v]=(0,n.useState)([]),[y,h]=(0,n.useState)([]),{scenesMap:_,scenesOperateInputsTodo:b,globalVarMap:I,debugHistory:x,env:C}=(0,n.useMemo)((()=>{const{sceneId:n,disableAutoRun:r,globalVariable:s}=t,{env:a}=i;if(n){const t=e.scenes.findIndex((e=>e.id===n));if(-1!==t){const o=e.scenes.splice(t,1);e.scenes.unshift(...o),"popup"===o[0].type&&v([o[0].id])}}const d=[];e.scenes.forEach(((e,t)=>{"popup"===e.type?t||v([e.id]):d.push(e)})),h(d);const{modules:f,definedComs:g,global:y}=e;a.getDefinedComJSON||(a.getDefinedComJSON=e=>g[e].json),a.getModuleJSON=e=>{var t;return null===(t=null==f?void 0:f[e])||void 0===t?void 0:t.json};const C=e.permissions||[];a.themes=e.themes,a.permissions=C;const E=a.hasPermission;"function"==typeof E&&Object.defineProperty(a,"hasPermission",{get:function(){return e=>{if("string"==typeof e){const t=C.find((t=>t.id===e));return E({permission:t})}return E(e)}}});const w={};y.fxFrames.forEach((e=>{w[e.id]=e}));const S=e.scenes[0],j={lastSceneId:"popup"===S.type?null:S.id};a.canvas.open=(e,o,n,r,i)=>l(this,void 0,void 0,(function*(){var s,c;let l=_[e];if(!l){if("function"!=typeof t.scenesLoader)return void(a.history?a.history.go(e,o,n):console.error(`缺少场景信息: ${e}`));const r=yield t.scenesLoader({id:e});if(l={disableAutoRun:!1,json:r,show:!1,parentScope:null,todo:[],type:(null===(s=r.slot)||void 0===s?void 0:s.showType)||r.type,useEntryAnimation:!1},_[e]=l,"popup"===r.type||h((e=>[...e,r])),b[e]){const{parentScope:t,todo:o}=b[e];l.parentScope=t,o.forEach((({value:e,pinId:t,parentScope:o})=>{l.todo=l.todo.concat({type:"inputs",todo:{pinId:t,value:e}})}))}}if(null===(c=t.scenesLoaded)||void 0===c||c.call(t,l.json),n)if("popup"===n&&(l.disableAutoRun=!1),"none"===n)_[e].show=!0,p((e=>e+1));else{r||("blank"===n?x.go(e):"redirect"===n&&x.redirect(e));const o=_[j.lastSceneId],i=_[e];"blank"===n&&"redirect"!==t.sceneOpenType?i.useEntryAnimation=!0:i.useEntryAnimation=!1,i.show=!0,i.hidden=!1,o&&o.json.id!==i.json.id&&(r?"back"===r?(o.show=!1,o._refs=null,o.alreadyOpened=!1):(o.hidden=!0,o.alreadyOpened=!0):"redirect"===n?(o.show=!1,o._refs=null,o.alreadyOpened=!1):(o.hidden=!0,o.alreadyOpened=!0)),p((e=>e+1)),j.lastSceneId=e}else l.show||(l.show=!0,v((t=>[...t,e])));i&&i.callInputs&&i.callInputs.forEach((({frameId:e,value:t,pinId:o})=>{k.inputs({frameId:e,value:t,pinId:o})}))})),a.canvas.back=()=>{const e=x.back();if(e){const{id:t,todo:o}=e;a.canvas.open(t,null,"blank","back");_[t].todo=o}},a.canvas.forward=()=>{const e=x.forward();if(e){const{id:t,todo:o}=e;a.canvas.open(t,null,"blank","forward");_[t].todo=o}};const k={open({todo:e,frameId:n,parentScope:r,comProps:i}){var s;const l=w[n];l?(0,c.A)({json:l,getComDef:e=>o.getComDef(e),events:t.events,env:a,ref(t){var o;const{inputs:n,outputs:s}=t;l.outputs.forEach((e=>{s(e.id,(t=>{r.outputs[e.id](t)}))}));const c=null===(o=null==i?void 0:i.data)||void 0===o?void 0:o.configs;c&&Object.entries(c).forEach((([e,t])=>{n[e](t,void 0,!1)})),n[e.pinId](e.value,void 0,!1),t.run()},onError:o.onError,debug:t.debug,debugLogger:t.debugLogger,logger:o.logger,scenesOperate:k,_context:o},{observable:o.observable}):null===(s=a.callServiceFx)||void 0===s||s.call(a,n,e.value).then((({id:e,value:t})=>{r.outputs[e](t)}))},inputs({frameId:e,parentScope:t,value:o,pinId:n}){const r=_[e];if(r){if(r.alreadyOpened)return;r.parentScope=t,r._refs?r._refs.inputs[n](o):r.todo=r.todo.concat({type:"inputs",todo:{pinId:n,value:o}})}else b[e]?b[e].todo.push({frameId:e,parentScope:t,value:o,pinId:n}):b[e]={parentScope:t,todo:[{value:o,pinId:n}]}},_notifyBindings(e,t){const{bindingsTo:o}=t.model;if(o)for(let t in o)for(let n in _){const r=_[n];if(r.json.coms[t])if(r._refs)m(r._refs,t,o[t],e);else{const n=o[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:n,value:e}})}}},getGlobalComProps(t){var o;return s?{data:{val:s.get(t)}}:t in I?{data:{val:I[t]}}:null===(o=_[e.scenes[0].id]._refs)||void 0===o?void 0:o.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:o}){const n=e.id;I[n]=t,null==s||s.set(n,t),Object.keys(_).forEach((e=>{const r=_[e];if(r.show&&r._refs){const e=r._refs.get({comId:n});e&&e.outputs[o](t,!0,null,!0)}}))},var:new c.g};return a.scenesOperate=k,{scenesMap:e.scenes.reduce(((e,t,o)=>{var n;return Object.assign(Object.assign({},e),{[t.id]:{show:0===o,todo:[],json:t,disableAutoRun:!(!r&&!o),useEntryAnimation:!1,type:(null===(n=t.slot)||void 0===n?void 0:n.showType)||t.type,main:0===o}})}),{}),scenesOperateInputsTodo:{},globalVarMap:{},debugHistory:new u(e.scenes[0]),globalFxIdToFrame:w,env:a}}),[]);(0,n.useMemo)((()=>{if(t.ref){const e=t.ref;t.ref=o=>n=>(o(n),e.call(t,n))}else t.ref=e=>t=>{e(t)}}),[]);const E=(0,n.useCallback)((e=>{const o=_[e];return Object.assign(Object.assign({},t),{env:C,get disableAutoRun(){return o.disableAutoRun},ref:t.ref((n=>{var r;n.canvas=C.canvas,o._refs=n;const i=o.todo,{inputs:s,outputs:c}=n,a=o.disableAutoRun;null===(r=o.json.outputs)||void 0===r||r.forEach((e=>{c(e.id,(t=>{var n,r,i;"apply"===e.id?null===(n=o.parentScope)||void 0===n||n.outputs[e.id](t):"module"!==o.type&&a?(o.show=!1,o.todo=[],o._refs=null,null===(r=o.parentScope)||void 0===r||r.outputs[e.id](t),o.parentScope=null,"popup"===o.type?v((e=>e.filter((e=>e!==o.json.id)))):p((e=>e+1))):null===(i=o.parentScope)||void 0===i||i.outputs[e.id](t)}))})),i.length?(i.forEach((({type:t,todo:o})=>{if("inputs"===t)Promise.resolve().then((()=>{s[o.pinId](o.value,e)}));else if("globalVar"===t){const{comId:e,value:t,bindings:r}=o;m(n,e,r,t)}})),o.type||x.setTodo(i),o.todo=[]):a||(o.disableAutoRun=!0,Promise.resolve().then((()=>{var e,n;const r=[];null===(n=null===(e=o.json.inputs)||void 0===e?void 0:e.forEach)||void 0===n||n.call(e,(e=>{const{id:o,mockData:n,type:i,extValues:c}=e;let a;if(t.debug)if("config"===i&&(null==c?void 0:c.config)&&"defaultValue"in c.config)try{a=JSON.parse(decodeURIComponent(c.config.defaultValue))}catch(e){a=c.config.defaultValue}else try{a=JSON.parse(decodeURIComponent(n))}catch(e){a=n}r.push({type:"inputs",todo:{pinId:o,value:a}}),s[o](a)})),o.type||x.setTodo(r)}))),a&&Promise.resolve().then((()=>{n.run()}))})),_env:{loadCSSLazy(){},currentScenes:{close(){o.show=!1,o.todo=[],o._refs=null,"popup"===o.type?v((e=>e.filter((e=>e!==o.json.id)))):p((e=>e+1))}},destroyAllPopup(){v((e=>(e.forEach((e=>{const t=_[e];t&&(t.show=!1,t.todo=[],t._refs=null)})),[])))}},scenesOperate:C.scenesOperate})}),[]),w=(0,n.useMemo)((()=>y.length?y.map((e=>{const{id:o}=e,n=_[o];if(n.show){let i=n.useEntryAnimation?d.main:"",s={};if(n.main){const{className:e,style:o}=t;e&&(i+=` ${e}`),o&&(s=Object.assign(s,o))}return n.hidden&&(s.display="none"),n.show&&r().createElement(f,{key:o,json:Object.assign(Object.assign({},e),{scenesMap:_}),options:E(o),className:i,style:s})}return null})):null),[a,y]),S=(0,n.useMemo)((()=>g.length?g.map((e=>{const o=_[e],n=o.json,{id:i}=n;let s="",c={position:t.debug?"fixed":"absolute",top:0,left:0,backgroundColor:"#ffffff00",zIndex:1e3};if(o.main){const{className:e,style:o}=t;e&&(s=e),o&&(c=Object.assign(c,o))}return r().createElement(f,{key:n.id,json:Object.assign(Object.assign({},n),{scenesMap:_}),options:E(i),style:{position:t.debug?"fixed":"absolute",top:0,left:0,backgroundColor:"#ffffff00",zIndex:1e3}})})):null),[g]);return(0,n.useEffect)((()=>{o.setPerformanceRender("end",(new Date).getTime())}),[]),r().createElement(r().Fragment,null,w,S)}function f({json:e,options:t,style:o={},className:n=""}){return r().createElement(i.A,{json:e,options:t,style:o,className:n,from:"scene"})}function m(e,t,o,n){const r=e.get({comId:t});r&&Array.isArray(o)&&o.forEach((e=>{let t=r;const o=e.split(".");o.forEach(((e,r)=>{r!==o.length-1?t=t[e]:t[e]=n}))}))}},356:(e,t,o)=>{"use strict";o.d(t,{A:()=>v});var n=o(12),r=o.n(n),i=o(33),s=o.n(i);const c=o(462).A.locals;let a=!1;var l;!function(e){e.Error="error"}(l||(l={}));const u="__fz-debug-info-container__";let d,p=document.getElementById(u),f=0;const m=({content:e,type:t})=>{const[o,i]=(0,n.useState)([]),s=e=>{const t=`__fz-notification-id-${++f}__`;e=Object.assign({_nid:t},e),i((t=>[...t,e]))},a=e=>{i((t=>t.filter((t=>t._nid!==e))))};return(0,n.useEffect)((()=>{d={add:s,remove:a},e&&d.add({content:e,type:t})}),[]),r().createElement("div",{className:c.container},o.map((e=>r().createElement("div",{key:e._nid,className:c.itemWrap},r().createElement("div",{className:`${c.item} ${c.errorItem}`},r().createElement("svg",{className:c.closeIcon,viewBox:"0 0 1045 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>d.remove(e._nid)},r().createElement("path",{d:"M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z",fill:"#555555"})),e.content)))))},g=["ResizeObserver loop limit exceeded"],v={init:e=>{a=!1!==e,a&&(window.onerror=function(e,t,o,n,r){if("string"!=typeof e||!g.includes(e))return!1})},error:e=>{var t;if(a){const o=(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))||e;if("string"==typeof o&&g.includes(o))return;((e,t)=>{let o={content:"",type:t};if("string"==typeof e)o.content=e;else try{o.content=JSON.stringify(e)}catch(t){console.error("showNotification JSON.stringify Error",t,{message:e})}o.content&&(p?null==d||d.add(o):(p=document.createElement("div"),p.setAttribute("id",u),document.body.appendChild(p),s().render(r().createElement(m,{content:o.content,type:o.type}),p)))})(o,l.Error)}}}},492:(e,t,o)=>{"use strict";o.d(t,{A:()=>p});var n=o(12),r=o.n(n),i=o(50),s=o(882),c=o(165),a=o(495),l=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o};const u=c.A.locals;function d({com:e,index:t,env:o,getComDef:n,context:i,scope:s,inputs:c,outputs:a,_inputs:l,_outputs:u,_env:p,template:m,onError:g,logger:v,createPortal:y,options:h}){const{id:_,elements:b,style:I}=e;if(b){let e;const{handlePxToVw:f}=h;return f?(e={},Object.entries(I).forEach((([t,o])=>{const n=typeof o;"string"===n&&-1!==o.indexOf("px")?e[t]=f(o):e[t]="number"===n?f(`${o}px`):o}))):e=I,r().createElement("div",{id:_,key:_,style:e},b.map((e=>d({com:e,index:t,env:o,getComDef:n,context:i,scope:s,inputs:c,outputs:a,_inputs:l,_outputs:u,_env:p,template:m,onError:g,logger:v,createPortal:y,options:h}))))}{const r=f({com:e,env:o,getComDef:n,context:i,scope:s,inputs:c,outputs:a,_inputs:l,_outputs:u,index:t,_env:p,template:m,onError:g,logger:v,createPortal:y,options:h});return null==r?void 0:r.jsx}}function p({scope:e,root:t,slot:o,style:n={},createPortal:i,className:s,params:c,inputs:a,outputs:u,_inputs:p,_outputs:m,wrapper:g,template:h,env:_,_env:b,getComDef:I,context:x,onError:C,logger:E,options:w,onClick:S}){const{style:j,comAry:k,layoutTemplate:O,showType:A}=o;if("smart"===j.layout&&O){const f=(null==c?void 0:c.style)||{},{rowGap:g,layout:k,position:A,justifyContent:P,flexWrap:R,flexDirection:$,display:T,columnGap:F,alignItems:N}=f,D=l(f,["rowGap","layout","position","justifyContent","flexWrap","flexDirection","display","columnGap","alignItems"]),M=Object.assign(D||{},j);return r().createElement("div",{"data-isslot":"1","data-slot-id":o.id,onClick:S,className:`${y(M)}${t&&s?` ${s}`:""}`,style:Object.assign(Object.assign(Object.assign({},v(M,!!D,t,"module"===o.type,w)),n),{display:"none"===(null==n?void 0:n.display)?"none":"flex",flexDirection:"column"})},O.map(((t,o)=>d({com:t,index:o,env:_,getComDef:I,context:x,scope:e,inputs:a,outputs:u,_inputs:p,_outputs:m,_env:b,template:h,onError:C,logger:E,createPortal:i,options:w}))))}const P=[];if(k.forEach(((t,o)=>{const n=f({com:t,env:_,getComDef:I,context:x,scope:e,inputs:a,outputs:u,_inputs:p,_outputs:m,index:o,_env:b,template:h,onError:C,logger:E,createPortal:i,options:w});n&&P.push(n)})),"function"==typeof g)return g(P.map((t=>(t.getJsx=({index:o,id:n})=>f({com:Object.assign(Object.assign({},t.com),{dynamicId:n}),env:_,getComDef:I,context:x,scope:e,inputs:a,outputs:u,_inputs:p,_outputs:m,index:o,_env:b,template:h,onError:C,logger:E,createPortal:i,options:w}),t))));{const e=null==c?void 0:c.style,i=Object.assign(j,e||{});return r().createElement("div",{"data-isslot":"1","data-slot-id":o.id,onClick:S,className:`${y(i)}${t&&s?` ${s}`:""}`,style:Object.assign(Object.assign({},v(i,!!e||"module"===o.type,t,"module"===o.type,w)),n)},P.map((e=>e.jsx)))}}function f({com:e,env:t,getComDef:o,context:n,scope:i,inputs:s,outputs:c,_inputs:a,_outputs:l,index:p,_env:f,template:g,onError:v,logger:y,createPortal:h,options:_}){var b,I;const{id:x,def:C,name:E,child:w,brother:S,dynamicId:j}=e,k=n.getComInfo(x),{hasPermission:O,permissions:A}=t,P=null===(I=null===(b=null==k?void 0:k.model)||void 0===b?void 0:b.permissions)||void 0===I?void 0:I.id;if(P&&"function"==typeof O){const e=O(P);if(!e||"boolean"!=typeof e&&!e.permission){const t=A.find((e=>e.id===P));return"hintLink"===((null==e?void 0:e.type)||(null==t?void 0:t.register.noPrivilege))?{id:x,name:E,jsx:r().createElement("div",{key:x},r().createElement("a",{href:(null==e?void 0:e.hintLinkUrl)||t.hintLink,target:"_blank",style:{textDecoration:"underline"}},(null==e?void 0:e.hintLinkTitle)||t.register.title)),style:{}}:void 0}}if(o(C)){const b=n.get({comId:x,dynamicId:j,scope:i?Object.assign(Object.assign({},i),{id:j?i.id+"-"+j:i.id,dynamicId:j}):null,_ioProxy:{inputs:s,outputs:c,_inputs:a,_outputs:l}});if(b){const u=x+(i?i.id:"")+p;return{id:x,jsx:r().createElement(m,{key:u,com:e,index:p,getComDef:o,context:n,scope:i,props:b,env:t,_env:f,template:g,onError:v,logger:y,createPortal:h,options:_},null==S?void 0:S.map(((e,r)=>d({com:e,index:r,env:t,getComDef:o,context:n,scope:i,inputs:s,outputs:c,_inputs:a,_outputs:l,_env:f,template:g,onError:v,logger:y,createPortal:h,options:_}))),w?d({com:w,index:p,env:t,getComDef:o,context:n,scope:i,inputs:s,outputs:c,_inputs:a,_outputs:l,_env:f,template:g,onError:v,logger:y,createPortal:h,options:_}):null),name:E,inputs:b.inputsCallable,style:b.style,com:e}}return{id:x,jsx:r().createElement("div",{className:u.error},"未找到组件(",C.namespace,"@",C.version," - ",x,")定义."),name:E,style:{}}}return{id:x,jsx:r().createElement("div",{className:u.error},"未找到组件(",C.namespace,"@",C.version,")定义."),name:E,style:{}}}function m({com:e,index:t,props:o,scope:c,template:l,env:d,createPortal:p,_env:f,getComDef:m,context:v,onError:y,logger:h,children:_,options:b}){const I=(0,s.Jh)(),{id:x,def:C,name:E,slots:w={},dynamicId:S}=e,{scopeId:j,data:k,title:O,style:A,inputs:P,outputs:R,_inputs:$,_outputs:T,_notifyBindings:F}=o,{rootId:N}=b,[,D]=(0,n.useState)(!1);(0,n.useMemo)((()=>{const{handlePxToVw:e,debug:t,disableStyleInjection:o,rootId:n,stylization:r}=b,i=n?j?`${n}-${j}-${x}`:`${n}-${x}`:j?`${j}-${x}`:x;if(!o&&!r.hasDefaultStyle(i)){r.setDefaultStyle(i);const e=function({env:e,style:t,def:o}){var n;const r=null===(n=null==e?void 0:e.themes)||void 0===n?void 0:n.comThemes;if(!r)return t.styleAry;let i=t.styleAry;const{themesId:s}=t,{namespace:c}=o;if(s)if("_defined"===s);else{const e=r[c];if(Array.isArray(e)){const t=e.find((({id:e})=>e===s));t&&(i=t.styleAry)}}else{const e=r[c];if(Array.isArray(e)){const t=e.find((({isDefault:e})=>e));t&&(i=t.styleAry)}}return i}({env:d,def:C,style:A});Array.isArray(e)&&r.setStyle(i,e,!0),Reflect.deleteProperty(A,"styleAry"),Reflect.deleteProperty(A,"themesId")}}),[]);const M=m(C),B=(0,i.C6)(w,{get(e,t,o,n){const i=n?n.value:w[t];if(!i)return;let s;c&&(s={id:c.id+"-"+c.frameId+(S?"-"+S:""),frameId:t,parentComId:x,parent:c,dynamicId:S});const a=v.get({comId:x,slotId:t,slot:i,scope:s});return{render(e){const o=null==e?void 0:e.scope;return o&&(s={id:o.id+"-"+o.frameId,frameId:t,parentComId:x,parent:o}),i?r().createElement(g,{key:null==e?void 0:e.key,props:a,currentScope:s,slotId:t,slot:i,params:e,style:A,onError:y,createPortal:p,parentComId:x,logger:h,env:d,_env:f,scope:c,getComDef:m,context:v,options:b}):r().createElement("div",{className:u.error},`组件(namespace=${C.namespace}）的插槽(id=${t})`," 未找到.")},get size(){var e,o;return!!(null===(o=null===(e=w[t])||void 0===e?void 0:e.comAry)||void 0===o?void 0:o.length)},_inputs:a._inputs,inputs:a.inputs,outputs:a.outputs}}}),L=(0,n.useMemo)((()=>{if(o.frameId&&o.parentComId){let e=(null==c?void 0:c.parentScope)||c;const t=v.get({comId:o.parentComId,slotId:o.frameId,scope:(null==e?void 0:e.parent)?e:null});if(t)return{get _inputs(){return(0,i.C6)({},{get:(e,o)=>t._inputRegs[o]})}}}}),[]),K=function({style:e,id:t,rootId:o}){const n=[t,u.com];1!==e.flex||e._new||n.push(u.flex);e.heightAuto&&n.push(u.comHeightAuto);return n.join(" ")}({style:A,id:x,rootId:N}),V=function({style:e}){const t={},{width:o,height:n,maxWidth:r,flexX:s,minWidth:c,minHeight:a,rotation:l}=e;(o||s)&&((0,i.Et)(o)?t.width=o+"px":o&&(t.width=o));(0,i.Et)(n)?t.height=n+"px":n&&(t.height=n);r&&(t.maxWidth=r);c&&(t.minWidth=c);a&&(t.minHeight=a);(0,i.Et)(l)&&(t.transform=`rotate(${l}deg)`,t.transformOrigin="center center");return t}({style:A}),W=function({style:e}){const{margin:t,marginTop:o,marginLeft:n,marginRight:r,marginBottom:i,paddingTop:s,paddingLeft:c,paddingRight:a,paddingBottom:l}=e;if(t)return{margin:t};return{marginTop:o,marginLeft:n,marginRight:r,marginBottom:i,paddingTop:s,paddingLeft:c,paddingRight:a,paddingBottom:l}}({style:A}),q={zIndex:A.zIndex};if(["fixed","absolute"].includes(A.position)){const{top:e,left:t,right:o,bottom:n}=A;(e||(0,i.Et)(e))&&(q.top=(0,i.Et)(e)?e+"px":e),(n||(0,i.Et)(n))&&(q.bottom=(0,i.Et)(n)?n+"px":n),(t||(0,i.Et)(t))&&(q.left=(0,i.Et)(t)?t+"px":t),(o||(0,i.Et)(o))&&(q.right=(0,i.Et)(o)?o+"px":o),"fixed"===A.position?q.zIndex=1e3:"absolute"===A.position&&(q.zIndex=1)}const H=M.runtime;let z=r().createElement(H,{id:S||x,_id:N?j?`${N}-${j}-${x}`:`${N}-${x}`:j?`${j}-${x}`:x,env:d,_env:f,data:k,name:E,title:O,style:A,inputs:P,outputs:R,_inputs:$,_outputs:T,_notifyBindings:F,slots:B,createPortal:p,parentSlot:L,onError:y,logger:h,_onError_:e=>{throw new Error(e)},modules:I.modules});return(0,n.useLayoutEffect)((()=>{D(!0)}),[]),"function"==typeof l&&(z=l({id:x,jsx:z,name:E,scope:c,index:t})),z=z?r().createElement("div",{id:x,key:x,"data-title":O,"data-namespace":C.namespace,"data-nested-id":N?j?`${N}-${j}-${x}`:`${N}-${x}`:j?`${j}-${x}`:x,style:Object.assign(Object.assign(Object.assign(Object.assign({display:A.display,visibility:A.visibility,position:A.position,flex:A.flex,flexDirection:A.flexDirection,flexShrink:A.flexShrink},q),V),W),A.ext||{}),className:K},r().createElement(a.A,{errorTip:`组件 (namespace = ${C.namespace}@${C.version}）渲染错误`,options:b},z,_)):null,z}function g({slotId:e,parentComId:t,props:o,currentScope:s,slot:c,params:a,scope:l,env:u,createPortal:d,_env:f,style:m,getComDef:g,context:v,onError:y,logger:h,options:_}){const b=(0,n.useRef)(null),{curScope:I,curProps:x,isRuntime:C}=(0,n.useMemo)((()=>{const n=!u.edit;let r=s,l=o,d=!1;if(r||"scope"===(null==c?void 0:c.type)&&(r={id:(0,i.uR)(10,16),frameId:e,parentComId:t},d=!0),a){const o=a.inputValues;if("object"==typeof o&&(d||(r=Object.assign(Object.assign({},r),{id:r.id+"-"+(0,i.uR)(10,16),parentScope:r})),l=v.get({comId:t,slotId:e,scope:r}),n)){console.log("finalProps: ",l,o),l.setSlotValue(o);for(let e in o)l.inputs[e](o[e],r)}}return l.run(r),{curScope:r,curProps:l,isRuntime:n}}),[]);(0,n.useEffect)((()=>{if(C){const e=null==a?void 0:a.inputValues;if(e)if(b.current){if("object"==typeof e&&JSON.stringify(b.current)!==JSON.stringify(e)){b.current=e,x.setSlotValue(e);for(let t in e)x.inputs[t](e[t],I);x.run()}}else b.current=e,x.run(null,!0)}}),[null==a?void 0:a.inputValues]),(0,n.useEffect)((()=>()=>{x.destroy()}),[]);return(0,n.useMemo)((()=>r().createElement(p,{scope:I,env:u,createPortal:d,_env:f,slot:c,params:a,wrapper:null==a?void 0:a.wrap,template:null==a?void 0:a.itemWrap,getComDef:g,context:v,inputs:null==a?void 0:a.inputs,outputs:null==a?void 0:a.outputs,_inputs:null==a?void 0:a._inputs,_outputs:null==a?void 0:a._outputs,onError:y,logger:h,options:_})),[])}function v(e,t,o,n,r){const{handlePxToVw:i}=r,{paddingLeft:s,paddingTop:c,paddingRight:a,paddingBottom:u,background:d,backgroundColor:p,backgroundImage:f,backgroundPosition:m,backgroundRepeat:g,backgroundSize:v,position:y,rowGap:h,columnGap:_,borderBottomColor:b,borderBottomLeftRadius:I,borderBottomRightRadius:x,borderBottomStyle:C,borderBottomWidth:E,borderLeftColor:w,borderLeftStyle:S,borderLeftWidth:j,borderRightColor:k,borderRightStyle:O,borderRightWidth:A,borderTopColor:P,borderTopLeftRadius:R,borderTopRightRadius:$,borderTopStyle:T,borderTopWidth:F,boxShadow:N,top:D,left:M,marginLeft:B,marginTop:L,marginRight:K,marginBottom:V,overflowX:W,overflowY:q,height:H,heightAuto:z,heightFull:J,width:U,widthAuto:X,widthFull:G}=e,Y=l(e,["paddingLeft","paddingTop","paddingRight","paddingBottom","background","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","position","rowGap","columnGap","borderBottomColor","borderBottomLeftRadius","borderBottomRightRadius","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopLeftRadius","borderTopRightRadius","borderTopStyle","borderTopWidth","boxShadow","top","left","marginLeft","marginTop","marginRight","marginBottom","overflowX","overflowY","height","heightAuto","heightFull","width","widthAuto","widthFull"]);let Z={rowGap:h,columnGap:_,paddingLeft:s||0,paddingTop:c||0,paddingRight:a||0,paddingBottom:u||0,backgroundColor:p||(o?"#ffffff":void 0),backgroundImage:f,backgroundPosition:m,backgroundRepeat:g,backgroundSize:v,borderBottomColor:b,borderBottomLeftRadius:I,borderBottomRightRadius:x,borderBottomStyle:C,borderBottomWidth:E,borderLeftColor:w,borderLeftStyle:S,borderLeftWidth:j,borderRightColor:k,borderRightStyle:O,borderRightWidth:A,borderTopColor:P,borderTopLeftRadius:R,borderTopRightRadius:$,borderTopStyle:T,borderTopWidth:F,boxShadow:N,overflowX:W,overflowY:q};if(d){if("object"==typeof d){const{background:e,backgroundImage:t,backgroundColor:o,backgroundRepeat:n,backgroundSize:r}=d;Z.backgroundRepeat=n,Z.backgroundSize=r,e?Z.background=e:(Z.backgroundImage=t,Z.backgroundColor=o)}else Z.background=d}return n&&(Z.height=z?"fit-content":J?"100%":H,Z.width=X?"fit-content":G?"100%":U),t&&(Z=Object.assign(Z,Y)),i&&Object.entries(Z).forEach((([e,t])=>{const o=typeof t;"string"===o&&-1!==t.indexOf("px")?Z[e]=i(t):Z[e]="number"===o?i(`${t}px`):t})),Z}function y(e){var t,o;const n=[u.slot,"slot"],r=e;if(r){"flex-column"==(null===(t=r.layout)||void 0===t?void 0:t.toLowerCase())?n.push(u.lyFlexColumn):"flex-row"==(null===(o=r.layout)||void 0===o?void 0:o.toLowerCase())&&n.push(u.lyFlexRow);const e=r.justifyContent;e&&("FLEX-START"===e.toUpperCase()?n.push(u.justifyContentFlexStart):"CENTER"===e.toUpperCase()?n.push(u.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?n.push(u.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?n.push(u.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&n.push(u.justifyContentFlexSpaceBetween));const i=r.alignItems;i&&("FLEX-START"===i.toUpperCase()?n.push(u.alignItemsFlexStart):"CENTER"===i.toUpperCase()?n.push(u.alignItemsFlexCenter):"FLEX-END"===i.toUpperCase()&&n.push(u.alignItemsFlexFlexEnd))}return n.join(" ")}},882:(e,t,o)=>{"use strict";o.d(t,{Jh:()=>A,XX:()=>P,b2:()=>j,yY:()=>d.y});var n=o(12),r=o.n(n),i=o(33),s=o.n(i),c=o(983),a=o(330),l=o(893),u=o(999),d=o(29),p=o(165),f=o(148),m=o(443),g=o(462),v=o(483),y=o(356),h=o(822),_=o(50),b=o(452),I=o.n(b);o(208);function x(e,t){e.use({target:t})}console.log(`%c ${a.UU} %c@${a.rE}`,"color:#FFF;background:#fa6400","","");class C{constructor(e,t){this.options=e,this.performance={render:{start:window.MYBRICKS_PC_FMP_START||(new Date).getTime(),end:null,time:null},callConnectorTimes:[]},this.onCompleteCallBacks=[],this.comDefs={},this.observable=d.s;const{errorHandler:o}=e;this.onError=(e,t)=>{console.error(e),y.A.error(e),t&&(null==o||o(e,t))},this._v=t._v;const{env:n,debug:r,observable:i,onError:s,plugins:c=[],rootId:a}=e,{onCompleteCallBacks:l}=this;n.runtime||(n.runtime={onComplete(e){r&&l.push(e)}});const v=(0,_.iu)();let h;e.stylization=new E({rootId:a,root:v,options:e,onCompleteCallBacks:l}),this.mode=r?"development":"production";const b=null==e?void 0:e.pxToVw;b?(h=(0,_.BS)(b),e.handlePxToVw=h,n.pxToVw=h):n.pxToVw=e=>e;const I=null==n?void 0:n.pxToRem;if(I){const{enableAdaptive:e=!1,landscapeWidth:t=1440}=I,o=document.documentElement;if(e){const e=()=>{o.style.fontSize=o.clientWidth/(t/12)+"px"};e(),window.addEventListener("resize",e)}else o.style.fontSize="12px"}if(i?this.observable=i:(0,d.y)({pxToRem:n.pxToRem,pxToVw:h}),x(p.A,v),x(f.A,v),x(m.A,v),x(g.A,v),n.i18n||(n.i18n=e=>e),n.renderModule=(t,o)=>{const r=e.rootId,i=o.rootId;let s=r||i;return r&&i&&(s=r+"_"+i),P(t,Object.assign(Object.assign(Object.assign({},e),o),{rootId:s,env:n,_isNestedRender:!0,_context:this}))},n.renderCom){const t=n.renderCom;n.renderCom=(o,n)=>t(o,Object.assign(Object.assign(Object.assign({},e),n),{_isNestedRender:!0,_isNestCom:!0,_context:this}))}else n.renderCom=(t,o)=>P(t,Object.assign(Object.assign(Object.assign({},e),o),{_isNestedRender:!0,_isNestCom:!0,_context:this}));const C=document.body;n.canvas||(n.canvas={get type(){return C.clientWidth<=414?"mobile":"pc"}}),"canvasElement"in n||(n.canvasElement=C);window.RENDER_WEB_PERFORMANCE={getPerformance:this.getPerformance.bind(this)},this.initOther(),this.initComdefs();[new u.A].concat(c).forEach((e=>{e.apply(this)}))}initOther(){const{env:e}=this.options;e.silent&&(localStorage.getItem("MYBRICKS_LOG")||(0,v.qr)()),y.A.init(e.showErrorNotification),this.logger={info:console.info,trace:console.trace,warn:console.warn,error:e=>{console.error(e),y.A.error(e)}}}initComdefs(){const e=(t,o)=>{t.forEach((t=>{t.comAray?e(t.comAray,o):o[`${t.namespace}-${t.version}`]=t}))},{comDefs:t}=this.options,{comDefs:o}=this;t&&Object.assign(o,t);let n=[...window.__comlibs_edit_||[],...window.__comlibs_rt_||[]];n.push(I()),n.forEach((t=>{const n=t.comAray;n&&Array.isArray(n)&&e(n,o)}))}getComDef(e){const{comDefs:t}=this,o=t[e.namespace+"-"+e.version]||t[e.namespace];if(!o){const o=[];for(let n in t)n.startsWith(e.namespace+"-")&&o.push(t[n]);if(o&&o.length>0){o.sort(((e,t)=>(0,_.Gm)(e.version,t.version)));const t=o[0];return console.warn(`【Mybricks】组件${e.namespace+"@"+e.version}未找到，使用${t.namespace}@${t.version}代替.`),t}return console.error(`组件${e.namespace+"@"+e.version}未找到，请确定是否存在该组件以及对应的版本号.`),null}return o}getPerformance(){return this.performance}setPerformanceRender(e,t){const o=this.performance.render;o[e]=t,"end"===e&&(o.time=t-o.start)}setPerformanceCallConnectorTimes(e){this.performance.callConnectorTimes.push(e)}}class E{constructor({rootId:e,root:t,options:o,onCompleteCallBacks:n}){this._defaultStyleMap={},this._cssMap={},this.root=t,this.rootId=e,this.options=o;const{_cssMap:r}=this;n.push((()=>{Object.entries(r).forEach((([e,o])=>{t.removeChild(o.tag)}))}))}hasDefaultStyle(e){return this._defaultStyleMap[e]}setDefaultStyle(e){this._defaultStyleMap[e]=!0}setStyle(e,t,o=!1){let n=[];Array.isArray(t)?n=t:Object.entries(t).forEach((([e,t])=>{n.push({selector:e,css:t})}));const r=e.split("-"),i=r[r.length-1];if(n.length){const{root:t,options:r}=this,{env:s,handlePxToVw:c,debug:a}=r,{pxToRem:l}=s,u=a?"#_geoview-wrapper_ ":"",d={};n.forEach((({css:t,selector:o,global:n})=>{":root"===o&&(o="> *:first-child"),(Array.isArray(o)?o:[o]).forEach((o=>{const r=`${u}${n?"":`#${i}[data-nested-id="${e}"] `}${o.replace(/\{id\}/g,`${i}`)}`,s={};Object.entries(t).forEach((([e,t])=>{l&&"string"==typeof t&&-1!==t.indexOf("px")?t=(0,_.a8)(t):c&&"string"==typeof t&&-1!==t.indexOf("px")&&(t=c(t)),s[(0,_.RD)(e)]=t})),d[r]?d[r]=Object.assign(d[r],s):d[r]=s}))}));const p=this._cssMap[e];if(p){const{tag:e,css:t}=p,n=Array.from(e.sheet.cssRules).reduce(((e,t)=>(e[t.selectorText]=t,e)),{});Object.entries(d).forEach((([r,i])=>{var s;const c=null===(s=n[r])||void 0===s?void 0:s.style;if(c){const e=t[r];Object.entries(i).forEach((([t,n])=>{o&&c[t]||(e[t]=n,c[t]=n)}))}else t[r]=i,e.sheet.insertRule(`${r} {${Object.entries(i).map((([e,t])=>`${e}: ${t};`)).join("")}}`)}))}else{const o=document.createElement("style");this._cssMap[e]={tag:o,css:d},t.appendChild(o),Object.entries(d).forEach((([e,t])=>{o.sheet.insertRule(`${e} {${Object.entries(t).map((([e,t])=>`${e}: ${t};`)).join("")}}`)}))}}}}const w=(0,n.createContext)({});function S({children:e,value:t}){return(0,n.useEffect)((()=>()=>{t.onCompleteCallBacks.forEach((e=>{e()}))}),[]),r().createElement(w.Provider,{value:t},e)}function j(){return(0,n.useContext)(w)}const k=(0,n.createContext)({});function O({children:e,value:t}){return r().createElement(k.Provider,{value:t},e)}function A(){return(0,n.useContext)(k)}function P(e,t){var o;let n=e;if(t.sceneOpenType||(t.sceneOpenType="redirect"),t.env.edit||null===(o=t.env.runtime)||void 0===o||o.debug,n){let e,o=null;if("scenes"in n?o=r().createElement(l.A,{json:n,options:t}):n.slot&&(t.env.edit&&n.type,o=r().createElement(c.A,{json:n,options:t,root:"module"!==n.type})),!o){const e=t._isNestedRender?t._context:new C(t,n);return(0,h.A)({json:n,getComDef:t=>e.getComDef(t),events:t.events,env:t.env,ref(e){if("function"==typeof t.ref)t.ref(e);else{const{inputs:o}=e,r=n.inputs;o&&Array.isArray(r)&&r.forEach((e=>{const{id:n,mockData:r,type:i,extValues:s}=e;let c;if(t.debug)if("config"===i&&(null==s?void 0:s.config)&&"defaultValue"in s.config)try{c=JSON.parse(decodeURIComponent(s.config.defaultValue))}catch(e){c=s.config.defaultValue}else try{c=JSON.parse(decodeURIComponent(r))}catch(e){c=r}o[n](c)})),e.run()}},onError:e.onError,debug:t.debug,debugLogger:t.debugLogger,logger:e.logger,scenesOperate:t.scenesOperate,_isNestedRender:t._isNestedRender,_isNestCom:t._isNestCom,_context:e},{observable:e.observable}),null}if(t._isNestCom){const e=(0,_.A4)(t.env);let i;const s=n.modules;s&&(i=new R(s)),o=r().createElement(O,{value:{env:e,modules:i}},o)}if(t._isNestedRender)return o;const i=n.modules;return i&&(e=new R(i)),"scenes"in n||"module"!==n.type||(t.env.edit=null),r().createElement(S,{value:new C(t,n)},r().createElement(O,{value:{env:t.env,modules:e}},o))}return null}class R{constructor(e){this._jsons=e,this._isReact18=!!s().createRoot,this._renderMap={}}get(e){const{_renderMap:t,_jsons:o,_isReact18:i}=this;return{render(){const c=j(),a=A(),l=(0,n.useRef)();return(0,n.useLayoutEffect)((()=>{const n=t[e];if(n)l.current.appendChild(n);else{const n=document.createElement("div");n.style.width="100%",n.style.height="100%";const u=o[e].json,d=r().createElement(S,{value:c},r().createElement(O,{value:a},a.env.renderModule(u,{})));if(i){s().createRoot(n).render(d)}else s().render(d,n);t[e]=n,l.current.appendChild(n)}}),[]),r().createElement("div",{ref:l,style:{height:"100%",width:"100%"}})}}}}},999:(e,t,o)=>{"use strict";o.d(t,{A:()=>p});var n=o(12),r=o.n(n),i=o(33),s=o.n(i),c=o(50),a=o(997);const l=a.A.locals,u=r().createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10635",width:"12",height:"12"},r().createElement("path",{d:"M219.428571 73.142857v877.714286H73.142857V73.142857zM365.714286 73.142857l585.142857 438.857143-577.828572 438.857143L365.714286 599.771429","p-id":"10636",fill:"#707070"}));function d({resume:e}){return r().createElement("div",{className:l.debugger},r().createElement("div",{className:l.titlebar},r().createElement("div",null,"已在交互视图中暂停"),r().createElement("div",{className:l.resume,onClick:e},u)))}class p{constructor(){}apply(e){const{options:t,mode:o}=e,{env:n,debug:r,onError:i}=t;if("development"===o&&"function"==typeof r){const o=new f(n),{log:s,onResume:l}=r({resume:()=>{o.next()},ignoreAll:e=>{o.setIgnoreWait(e),e&&o.next(!0)}});o.setResume(l),e.debuggerPanel=o,t.debugLogger=s,e.onError=i,a.A.use({target:(0,c.iu)()})}}}class f{constructor(e){this.env=e,this.isReact18=!!s().createRoot,this.resume=()=>{},this._pending=!1,this._ignoreWait=!1,this._waitCount=0,this._waitBreakpointIds=[],this._waitIdToResolvesMap={}}setResume(e){this.resume=e}open(){if(this.dom)this.dom.style.visibility="visible";else{const e=document.createElement("div"),t=this.env.canvasElement;if(this.canvas=t,this.dom=e,e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="100000",e.style.visibility="visible",t.appendChild(e),this.isReact18){const t=s().createRoot(e);t.render(r().createElement(d,{resume:this.resume})),this.root=t}else s().render(r().createElement(d,{resume:this.resume}),e)}}close(){this.dom&&(this.dom.style.visibility="hidden")}destroy(){this.dom&&requestAnimationFrame((()=>{this.isReact18?this.root.unmount():s().unmountComponentAtNode(this.dom),this.root=null,this.canvas.removeChild(this.dom),this.canvas=null,this.dom=null}))}hasBreakpoint(e){return!this._ignoreWait&&(this._pending||e.isBreakpoint)}wait(e,t){return new Promise((o=>{if(this._ignoreWait)o();else{const n=this._waitBreakpointIds.length>0;if(n||t(),this.open(),this._pending=!0,e.isBreakpoint){if(n){const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(t)}const r=this._waitCount+++e.id;this._waitBreakpointIds.unshift(r),this._waitIdToResolvesMap[r]=[o]}else{const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(o)}}}))}next(e=!1){if(e)for(;this._waitBreakpointIds.length;)this.next();else{const e=this._waitBreakpointIds.pop(),t=this._waitIdToResolvesMap[e];t&&t.forEach((e=>e())),this._waitBreakpointIds.length||(this._pending=!1,this.close())}}setIgnoreWait(e){this._ignoreWait=e}}},208:(e,t,o)=>{"use strict";o(17),o(485)},485:(e,t,o)=>{"use strict"},543:(e,t,o)=>{"use strict";o(894),o(829),o(7)},7:(e,t,o)=>{"use strict";o(543)},844:(e,t,o)=>{"use strict";o(543)},829:(e,t,o)=>{"use strict";o(894)},894:(e,t,o)=>{"use strict";o(543)},17:(e,t,o)=>{"use strict";o(844)},452:function(module,__unused_webpack_exports,__webpack_require__){var React=__webpack_require__(12),t;t=function(__WEBPACK_EXTERNAL_MODULE__359__){return function(){"use strict";var __webpack_modules__={356:function(__unused_webpack_module,__nested_webpack_exports__,__nested_webpack_require_399__){function __WEBPACK_DEFAULT_EXPORT__(_a){var data=_a.data,outputs=_a.outputs,inputs=_a.inputs,onError=_a.onError;inputs.from((function(val,relOutpus){var _a,script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){var fn=void 0,returnVal=void 0,isOk=void 0;try{eval("fn = ".concat(script)),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError("数据转换错误:".concat(e.message),e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__nested_webpack_require_399__.d(__nested_webpack_exports__,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}})},359:function(e){e.exports=__WEBPACK_EXTERNAL_MODULE__359__}},__webpack_module_cache__={};function __nested_webpack_require_1055__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__nested_webpack_require_1055__),o.exports}__nested_webpack_require_1055__.d=function(e,t){for(var o in t)__nested_webpack_require_1055__.o(t,o)&&!__nested_webpack_require_1055__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__nested_webpack_require_1055__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_1055__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};return function(){function e(t,o){void 0===o&&(o=[]);try{var n=Object.prototype.toString.call(t);if(null===t||"object"!=typeof t||n.startsWith("[object HTML")||"[object FormData]"===n)return t;var r=o.filter((function(e){return e.original===t}))[0];if(r)return r.copy;var i=Array.isArray(t)?[]:{};return o.push({original:t,copy:i}),Object.keys(t).forEach((function(n){i[n]=e(t[n],o)})),i}catch(e){return t}}__nested_webpack_require_1055__.r(__nested_webpack_exports__),__nested_webpack_require_1055__.d(__nested_webpack_exports__,{default:function(){return r}});var t=__nested_webpack_require_1055__(356);function o(e,t){var o=e.env,n=e.data,r=e.outputs;if(e.onError,void 0===t&&(t={}),n.connector)try{o.callConnector(n.connector,t,n.connectorConfig).then((function(e){r.then(e)})).catch((function(e){r.catch(e)}))}catch(e){console.error(e),r.catch("执行错误 ".concat(e.message||e))}else r.catch("没有选择接口")}var n=__nested_webpack_require_1055__(359),r={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[{namespace:"mybricks.core-comlib.fn",version:"1.0.0",runtime:function(e){e.inputs,e.outputs},data:{},inputs:[],outputs:[]},{namespace:"mybricks.core-comlib.var",version:"1.0.0",runtime:function(t){t.env;var o=t.data,n=t.outputs,r=t.inputs,i=t._notifyBindings;r.get((function(t,n){var r=e(void 0!==o.val?o.val:o.initValue);n.return(r)})),r.set((function(t,r){o.val=t;var s=e(t);n.changed(s,!0),i(s),r.return(s)})),r.reset((function(){var t=o.initValue;o.val=t;var r=e(t);n.changed(r,!0),i(r)}))},data:{},inputs:["get","set","reset"],outputs:["return","changed"]},{namespace:"mybricks.core-comlib.type-change",version:"1.0.0",runtime:t.Z,data:{},inputs:["from"],outputs:["to"]},{namespace:"mybricks.core-comlib.connector",version:"1.0.0",runtime:function(e){var t=e.env,n=e.data,r=e.inputs,i=e.outputs,s=e.onError;t.runtime&&(n.immediate?o({env:t,data:n,outputs:i}):r.call((function(e){o({env:t,data:n,outputs:i,onError:s},e)})))},data:{},inputs:["call"],outputs:["then","catch"]},{namespace:"mybricks.core-comlib.frame-input",version:"1.0.0",runtime:function(e){var t=e.env,o=e.inputs;t.runtime&&o.getCurValue((function(e,t){t.return(e)}))},data:{},inputs:["getCurValue"],outputs:["return"]},{namespace:"mybricks.core-comlib.scenes",version:"1.0.0",runtime:function(e){var t=e.env,o=e.data,n=e.inputs,r=(e._inputs,e._inputsCallable);n.open((function(e){t.canvas.open(o._sceneId,e,"popup"===o._sceneShowType?null:o.openType),r._open(e)}))},data:{_sceneId:null,_sceneShowType:null,openType:"blank"},inputs:["open"],outputs:[]},{namespace:"mybricks.core-comlib.module",version:"1.0.0",runtime:function(e){var t=e.id,o=e.env,r=e.data,i=e.style,s=e.inputs,c=e.outputs,a=(0,n.useState)(),l=a[0],u=a[1],d=(0,n.useMemo)((function(){var e=o.getModuleJSON(r.definedId);return o.renderModule(e,{ref:function(t){if(u(t),o.edit){var n=t.style;n&&(i.widthAuto=n.widthAuto,i.widthFull=n.widthFull,i.heightAuto=n.heightAuto,i.heightFull=n.heightFull)}if(o.runtime){var a=e.inputs,l=e.outputs,d=e.pinRels,p={},f={};Object.entries(d).forEach((function(e){var t=e[0],o=e[1],n=t.split("_rootFrame_-")[1];if(n){var r=o[0];p[n]=r,f[r]=!0}}));var m=r.configs;for(var g in m)t.inputs[g](m[g]);l.forEach((function(e){var o=e.id;f[o]||t.outputs(o,c[o])})),a.forEach((function(e){var o=e.id;s[o]((function(e,n){var r=p[o];r&&t.outputs(r,(function(e){n[r](e)})),t.inputs[o](e)}))}))}t.run()},disableAutoRun:!0,outputs:c,rootId:t})}),[]);return(0,n.useMemo)((function(){if(l&&o.edit){var e=r.configs;for(var t in e)l.inputs[t](e[t])}}),[r.configs,l]),d},data:{},inputs:["show","hide","showOrHide"],outputs:["click"]},{namespace:"mybricks.core-comlib.group",version:"1.0.0",runtime:function(e){var t=e.slots,o=e.outputs,r=(0,n.useCallback)((function(){o.click()}),[]),i=(0,n.useCallback)((function(){o.dblClick()}),[]);return React.createElement("div",{style:{width:"100%",height:"100%"},onClick:r,onDoubleClick:i},t.content.render())},data:{},inputs:["show","hide","showOrHide"],outputs:["click","dblClick"]},{namespace:"mybricks.core-comlib.service",version:"1.0.0",runtime:function(e){e.inputs,e.outputs},data:{},inputs:[],outputs:[]},{namespace:"mybricks.core-comlib.frame-output",version:"1.0.0",runtime:function(e){var t=e.env,o=(e.data,e.inputs);e.outputs,t.runtime&&o.output((function(e){}))},data:{},inputs:["output"],outputs:[]}]}}(),__nested_webpack_exports__}()},module.exports=t(__webpack_require__(12))},12:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__12__},33:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__33__},330:e=>{"use strict";e.exports=JSON.parse('{"UU":"@mybricks/render-web","rE":"1.3.37-beta.0"}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{hijackReactcreateElement:()=>e.yY,render:()=>e.XX});var e=__webpack_require__(882)})(),__webpack_exports__})()));