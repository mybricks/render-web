!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports._mybricks_render_web=t(require("react"),require("react-dom")):e._mybricks_render_web=t(e.React,e.ReactDOM)}(this,((__WEBPACK_EXTERNAL_MODULE__12__,__WEBPACK_EXTERNAL_MODULE__33__)=>(()=>{var __webpack_modules__={537:function(module,__unused_webpack_exports,__webpack_require__){var React=__webpack_require__(12),t;t=__WEBPACK_EXTERNAL_MODULE__359__=>(()=>{"use strict";var __webpack_modules__={356:(__unused_webpack_module,__nested_webpack_exports__,__nested_webpack_require_370__)=>{function __WEBPACK_DEFAULT_EXPORT__({data,outputs,inputs,onError}){inputs.from(((val,relOutpus)=>{var _a;const script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){let fn,returnVal,isOk;try{eval(`fn = ${script}`),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError(`数据转换错误:${e.message}`,e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__nested_webpack_require_370__.d(__nested_webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__})},359:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__359__}},__webpack_module_cache__={};function __nested_webpack_require_927__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__nested_webpack_require_927__),o.exports}__nested_webpack_require_927__.d=(e,t)=>{for(var o in t)__nested_webpack_require_927__.o(t,o)&&!__nested_webpack_require_927__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__nested_webpack_require_927__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__nested_webpack_require_927__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};return(()=>{function e(e){if(e)try{const t=Object.prototype.toString.call(e);return["[object Object]","[object Array]"].includes(t)?JSON.parse(JSON.stringify(e)):e}catch(t){return e}return e}__nested_webpack_require_927__.r(__nested_webpack_exports__),__nested_webpack_require_927__.d(__nested_webpack_exports__,{default:()=>r});var t=__nested_webpack_require_927__(356);function o({env:e,data:t,outputs:o,onError:n},r={}){if(t.connector)try{e.callConnector(t.connector,r,t.connectorConfig).then((e=>{o.then(e)})).catch((e=>{o.catch(e)}))}catch(e){console.error(e),o.catch(`执行错误 ${e.message||e}`)}else o.catch("没有选择接口")}var n=__nested_webpack_require_927__(359);const r={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[{namespace:"mybricks.core-comlib.fn",version:"1.0.0",runtime:function({inputs:e,outputs:t}){},data:{},inputs:[],outputs:[]},{namespace:"mybricks.core-comlib.var",version:"1.0.0",runtime:function({env:t,data:o,outputs:n,inputs:r,_notifyBindings:i}){r.get(((t,n)=>{const r=e(void 0!==o.val?o.val:o.initValue);n.return(r)})),r.set(((t,r)=>{o.val=t;const s=e(t);n.changed(s,!0),i(s),r.return(s)})),r.reset((()=>{const t=o.initValue;o.val=t;const r=e(t);n.changed(r,!0),i(r)}))},data:{},inputs:["get","set","reset"],outputs:["return","changed"]},{namespace:"mybricks.core-comlib.type-change",version:"1.0.0",runtime:t.Z,data:{},inputs:["from"],outputs:["to"]},{namespace:"mybricks.core-comlib.connector",version:"1.0.0",runtime:function({env:e,data:t,inputs:n,outputs:r,onError:i}){e.runtime&&(t.immediate?o({env:e,data:t,outputs:r}):n.call((n=>{o({env:e,data:t,outputs:r,onError:i},n)})))},data:{},inputs:["call"],outputs:["then","catch"]},{namespace:"mybricks.core-comlib.frame-input",version:"1.0.0",runtime:function({env:e,inputs:t}){e.runtime&&t.getCurValue(((e,t)=>{t.return(e)}))},data:{},inputs:["getCurValue"],outputs:["return"]},{namespace:"mybricks.core-comlib.scenes",version:"1.0.0",runtime:function({env:e,data:t,inputs:o,_inputs:n,_inputsCallable:r}){o.open((o=>{e.canvas.open(t._sceneId,o,"popup"===t._sceneShowType?null:t.openType),r._open(o)}))},data:{_sceneId:null,_sceneShowType:null,openType:"none"},inputs:["open"],outputs:[]},{namespace:"mybricks.core-comlib.module",version:"1.0.0",runtime:function({env:e,data:t,style:o,inputs:r,outputs:i}){const[s,c]=(0,n.useState)(),a=(0,n.useMemo)((()=>{const n=e.getModuleJSON(t.definedId);return e.renderModule(n,{ref(s){if(c(s),e.edit){const e=s.style;e&&(o.widthAuto=e.widthAuto,o.widthFull=e.widthFull,o.heightAuto=e.heightAuto,o.heightFull=e.heightFull)}if(e.runtime){const{inputs:e,outputs:o,pinRels:c}=n,a={},l={};Object.entries(c).forEach((([e,t])=>{const o=e.split("_rootFrame_-")[1];if(o){const e=t[0];a[o]=e,l[e]=!0}}));const d=t.configs;for(let e in d)s.inputs[e](d[e]);o.forEach((({id:e})=>{l[e]||s.outputs(e,i[e])})),e.forEach((({id:e})=>{r[e](((t,o)=>{const n=a[e];n&&s.outputs(n,(e=>{o[n](e)})),s.inputs[e](t)}))}))}s.run()},disableAutoRun:!0,outputs:i})}),[]);return(0,n.useMemo)((()=>{if(s&&e.edit){const e=t.configs;for(let t in e)s.inputs[t](e[t])}}),[t.configs,s]),a},data:{},inputs:["show","hide","showOrHide"],outputs:["click"]},{namespace:"mybricks.core-comlib.group",version:"1.0.0",runtime:function({slots:e,outputs:t}){const o=(0,n.useCallback)((()=>{t.click()}),[]),r=(0,n.useCallback)((()=>{t.dblClick()}),[]);return React.createElement("div",{style:{width:"100%",height:"100%"},onClick:o,onDoubleClick:r},e.content.render())},data:{},inputs:["show","hide","showOrHide"],outputs:["click","dblClick"]}]}})(),__nested_webpack_exports__})(),module.exports=t(__webpack_require__(12))},539:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(758),r=o.n(n),i=o(935),s=o.n(i)()(r());s.push([e.id,".error-c0f46 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n  white-space: pre-wrap;\n}\n",""]),s.locals={error:"error-c0f46"};const c=s},348:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(758),r=o.n(n),i=o(935),s=o.n(i)()(r());s.push([e.id,"@keyframes slipInto-fb013 {\n  0% {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n.main-a6e42 {\n  animation: slipInto-fb013 0.1s ease-in-out 1;\n}\n",""]),s.locals={main:"main-a6e42",slipInto:"slipInto-fb013"};const c=s},374:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(758),r=o.n(n),i=o(935),s=o.n(i)()(r());s.push([e.id,".container-ff9f5 {\n  position: fixed;\n  right: 20px;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  z-index: 9999;\n}\n.container-ff9f5 .itemWrap-a3069 {\n  position: relative;\n}\n.container-ff9f5 .item-c8a43 {\n  padding: 16px;\n  background-color: #fff;\n  margin-bottom: 8px;\n  border-radius: 4px;\n  max-width: 50vw;\n  max-height: 50vh;\n  overflow: auto;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05);\n  font-size: 12px;\n}\n.container-ff9f5 .errorItem-e6fc8 {\n  color: #f5222d;\n}\n.container-ff9f5 .closeIcon-c5e91 {\n  position: absolute;\n  right: 16px;\n  top: 16px;\n  width: 24px;\n  height: 24px;\n  padding: 2px;\n  cursor: pointer;\n}\n.container-ff9f5 .closeIcon-c5e91:hover {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.12);\n}\n",""]),s.locals={container:"container-ff9f5",itemWrap:"itemWrap-a3069",item:"item-c8a43",errorItem:"errorItem-e6fc8",closeIcon:"closeIcon-c5e91"};const c=s},365:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(758),r=o.n(n),i=o(935),s=o.n(i)()(r());s.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.slot-ced90 {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.lyFlexColumn-f7fd6 {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-c8e04 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-b95f6 {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-e1ca1 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-ef832 {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-ad880 {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-a2f09 {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-a8880 {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-c6d62 {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-d7b4c {\n  align-items: flex-end;\n}\n.debugFocus-def53 {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-f9041 {\n  flex-shrink: 0;\n  min-height: 0;\n}\n.comHeightAuto-f7f16 > div {\n  flex: 1;\n}\n.flex-ca980 {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-ca980 > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-ca980 > * {\n  height: 100%;\n}\n.error-d4d00 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-e9378 {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-e9378 .tt-d634d {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-e9378 .info-d57d6 {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),s.locals={slot:"slot-ced90",lyFlexColumn:"lyFlexColumn-f7fd6",lyFlexRow:"lyFlexRow-c8e04",justifyContentFlexStart:"justifyContentFlexStart-b95f6",justifyContentFlexCenter:"justifyContentFlexCenter-e1ca1",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-ef832",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-ad880",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-a2f09",alignItemsFlexStart:"alignItemsFlexStart-a8880",alignItemsFlexCenter:"alignItemsFlexCenter-c6d62",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-d7b4c",debugFocus:"debugFocus-def53",com:"com-f9041",comHeightAuto:"comHeightAuto-f7f16",flex:"flex-ca980",error:"error-d4d00",errorRT:"errorRT-e9378",tt:"tt-d634d",info:"info-d57d6"};const c=s},685:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(758),r=o.n(n),i=o(935),s=o.n(i)()(r());s.push([e.id,".debugger-fed31 {\n  width: 100%;\n  height: 100%;\n  background-color: #1b1b1b73;\n}\n.debugger-fed31 .titlebar-f7fe6 {\n  font-size: 12px;\n  line-height: 23px;\n  position: absolute;\n  top: 10%;\n  height: 23px;\n  padding: 0px 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  align-items: center;\n  background-color: #faf8df;\n}\n.debugger-fed31 .titlebar-f7fe6 .resume-ebcb6 {\n  display: flex;\n  padding-left: 4px;\n  cursor: pointer;\n}\n.debugger-fed31 .titlebar-f7fe6 .resume-ebcb6 svg path {\n  fill: #FA6400;\n}\n",""]),s.locals={debugger:"debugger-fed31",titlebar:"titlebar-f7fe6",resume:"resume-ebcb6"};const c=s},935:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o="",n=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),n&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),n&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o})).join("")},t.i=function(e,o,n,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var c=0;c<this.length;c++){var a=this[c][0];null!=a&&(s[a]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);n&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),o&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=o):d[2]=o),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},758:e=>{"use strict";e.exports=function(e){return e[1]}},443:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(591),r=o.n(n),i=o(740),s=o.n(i),c=o(855),a=o.n(c),l=o(51),d=o.n(l),u=o(656),p=o.n(u),f=o(539),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},v++||(g=r()(f.A,y)),m},m.unuse=function(){v>0&&! --v&&(g(),g=null)};const h=m},148:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(591),r=o.n(n),i=o(740),s=o.n(i),c=o(855),a=o.n(c),l=o(51),d=o.n(l),u=o(656),p=o.n(u),f=o(348),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},v++||(g=r()(f.A,y)),m},m.unuse=function(){v>0&&! --v&&(g(),g=null)};const h=m},462:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(591),r=o.n(n),i=o(740),s=o.n(i),c=o(855),a=o.n(c),l=o(51),d=o.n(l),u=o(656),p=o.n(u),f=o(374),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},v++||(g=r()(f.A,y)),m},m.unuse=function(){v>0&&! --v&&(g(),g=null)};const h=m},165:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(591),r=o.n(n),i=o(740),s=o.n(i),c=o(855),a=o.n(c),l=o(51),d=o.n(l),u=o(656),p=o.n(u),f=o(365),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},v++||(g=r()(f.A,y)),m},m.unuse=function(){v>0&&! --v&&(g(),g=null)};const h=m},997:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(591),r=o.n(n),i=o(740),s=o.n(i),c=o(855),a=o.n(c),l=o(51),d=o.n(l),u=o(656),p=o.n(u),f=o(685),m={};f.A&&f.A.locals&&(m.locals=f.A.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},v++||(g=r()(f.A,y)),m},m.unuse=function(){v>0&&! --v&&(g(),g=null)};const h=m},591:e=>{"use strict";var t=[];function o(e){for(var o=-1,n=0;n<t.length;n++)if(t[n].identifier===e){o=n;break}return o}function n(e,n){for(var i={},s=[],c=0;c<e.length;c++){var a=e[c],l=n.base?a[0]+n.base:a[0],d=i[l]||0,u="".concat(l," ").concat(d);i[l]=d+1;var p=o(u),f={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var m=r(f,n);n.byIndex=c,t.splice(c,0,{identifier:u,updater:m,references:1})}s.push(u)}return s}function r(e,t){var o=t.domAPI(t);o.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;o.update(e=t)}else o.remove()}}e.exports=function(e,r){var i=n(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var c=o(i[s]);t[c].references--}for(var a=n(e,r),l=0;l<i.length;l++){var d=o(i[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=a}}},51:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},855:(e,t,o)=>{"use strict";e.exports=function(e){var t=o.nc;t&&e.setAttribute("nonce",t)}},740:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(o){!function(e,t,o){var n="";o.supports&&(n+="@supports (".concat(o.supports,") {")),o.media&&(n+="@media ".concat(o.media," {"));var r=void 0!==o.layer;r&&(n+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),n+=o.css,r&&(n+="}"),o.media&&(n+="}"),o.supports&&(n+="}");var i=o.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,o)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},656:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},822:(e,t,o)=>{"use strict";o.d(t,{A:()=>a});var n=o(483),r=o(50),i=o(238),s=function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function c(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))};const c="_rootFrame_";function a(e,{observable:t}){const{json:o,getComDef:a,env:l,ref:d,onError:u,logger:p,debug:f,debugLogger:m,_isNestedRender:g,_context:v}=e,y=e.scenesOperate||l.scenesOperate,{_v:h,id:_,slot:b,coms:I={},comsAutoRun:x={},cons:w=[],pinRels:E={},pinProxies:C={},pinValueProxies:k={},type:S}=o;let j=I;"2024-diff"===h&&(j=new Proxy(I,{get(e,t){var o;const n=e[t];if(!n||n._ready)return n;const{def:i}=n;n._ready=!0;const s=a(i),c=n.model,l=c.data;return c.data=l?Object.assign((0,r.y_)(s.data),l):(0,r.y_)(s.data),(null===(o=i.rtType)||void 0===o?void 0:o.match(/^js/gi))||(n.inputs=s.inputs.concat(c.inputAry),n.outputs=s.outputs.concat(c.outputAry)),n}}));const A=l,O={},P={},R={},T={},$={};Object.keys(w).forEach((e=>{const t=w[e],{startPinParentKey:o}=t[0];o&&($[o]=e)}));const F={},M={},N={},D={},B={},L={},K={};function W(e,t,i){if("com"===e){const{com:e,pinHostId:s,val:c,fromCon:a,notifyAll:l,comDef:d,conId:u}=t;m?m("com","output",{id:e.id,pinHostId:s,val:(0,r.eq)(c),fromCon:a,notifyAll:l,comDef:d,sceneId:o.id,conId:u},i):(0,n.$)(e.title,d,s,c)}else if("frame"===e){const{comId:e,frameId:n,pinHostId:s,val:c,sceneId:a,conId:l}=t;m&&m("frame","output",{comId:e,frameId:n,pinHostId:s,val:(0,r.eq)(c),sceneId:a||o.id,conId:l},i)}}function q(e,t){const{com:i,pinHostId:s,val:c,frameKey:a,finishPinParentKey:l,comDef:d,conId:u}=e;u&&(m?m("com","input",{id:i.id,pinHostId:s,val:(0,r.eq)(c),frameKey:a,finishPinParentKey:l,comDef:d,sceneId:o.id,conId:u},t):(0,n.sK)(i.title,d,s,c))}function H(e,t,o,n){var i,s,c;const a=C[e.comId+"-"+e.pinId];let l=e;if(a){const s="mybricks.core-comlib.frame-output"===(null===(i=l.def)||void 0===i?void 0:i.namespace);if(s)l=Object.assign(Object.assign({},e),{type:a.type,frameId:a.frameId,pinId:a.pinId,direction:"inner-input",comId:(e.targetFrameKey||e.frameKey).split("-")[0]});else{if(N[`${a.frameId}-${a.pinId}`]=o,n&&n.finishPinParentKey!==l.startPinParentKey)return;if("frame"===a.type){const e=z(l.comId,t);let n;n={id:(0,r.uR)(10,16),frameId:a.frameId,parent:t,proxyComProps:e};if("mybricks.core-comlib.fn"===l.def.namespace){const{configs:t}=e.data;t&&Object.entries(t).forEach((([e,t])=>{const{frameId:o,comId:r,pinId:i}=a,s=w[(r?`${r}-${o}`:`${o}`)+"-"+e];s&&V({logProps:null,cons:s,val:t,curScope:n})}))}return ee({options:a,value:o,scope:n,comProps:e}),void(s||Q({frameId:a.frameId,scope:n}))}}}if("com"===l.type)n?n.finishPinParentKey===l.startPinParentKey&&U(l,o,t):U(l,o,t);else{if("frame"!==l.type)throw new Error("尚未实现");if(n&&n.finishPinParentKey!==l.startPinParentKey)return;if(l.comId&&(null==a?void 0:a.frameId)!==_){if("inner-input"===l.direction){const e=P[l.comId+"-"+l.frameId+"-"+((null==t?void 0:t.id)?t.id+"-":"")+l.pinId]||P[l.comId+"-"+l.frameId+"-"+((null===(s=null==t?void 0:t.parent)||void 0===s?void 0:s.id)?t.parent.id+"-":"")+l.pinId]||P[l.frameKey+"-"+l.pinId];e&&e(o)}else if("inner-output"===l.direction&&"joint"===l.pinType){const e=w[l.comId+"-"+l.frameId+"-"+l.pinId];e&&V({logProps:null,cons:e,val:o})}}else{const e=null==t?void 0:t.proxyComProps;if(e){const n=e.outputs[l.pinId];if(n)return void n(o,t.parent)}null===(c=T[l.pinId])||void 0===c||c.call(T,o)}}}function V({logProps:e,cons:t,val:o,curScope:n,fromCon:r,notifyAll:a,fromCom:l,isAutoRun:d}){!g&&f&&t.sort(((e,t)=>e.isBreakpoint&&!t.isBreakpoint?-1:!e.isBreakpoint&&t.isBreakpoint?1:0)),t.forEach((t=>s(this,void 0,void 0,(function*(){var s,u;const{comId:p,pinId:m,pinType:y,timerPinInputId:h,frameKey:_}=t,b=j[p];if(r){if(r.finishPinParentKey!==t.startPinParentKey)return}else if(!(0,i.i)(l,t,e))return;if(g||!f||!t.isIgnored){if(!g&&f&&(null===(s=v.debuggerPanel)||void 0===s?void 0:s.hasBreakpoint(t))){let o=!0;yield null===(u=v.debuggerPanel)||void 0===u?void 0:u.wait(t,(()=>{o=!1,e&&(e[1].conId=t.id,e&&W(...e,!0))})),o&&e&&(e[1].conId=t.id,e&&W(...e))}else e&&W(...e);if("timer"===y)G({value:o,curScope:n,inReg:t,notifyAll:a,fromCon:r});else if(a){const e=t.frameKey;if(e===c||d)X({pinId:m,value:o,component:b,curScope:null,comId:p,val:o,timerPinInputId:h,frameKey:e,inReg:t,notifyAll:a,fromCon:r});else{const[i,s]=e.split("-");if(D[e]){const o=D[e],n=o[l.id];n?n[t.id]=t:o[l.id]={[t.id]:t}}else{(D[e]={})[l.id]={[t.id]:t}}if(l.parentComId)X({pinId:m,value:o,component:b,curScope:n,comId:i,val:o,timerPinInputId:h,frameKey:e,inReg:t,notifyAll:a,fromCon:r});else{const n=O[`${i}-${s}`];if(n){const s=Object.entries(n),c=s.length;s.forEach((([n,s])=>{c>1&&"slot"===n||("scope"===(null==s?void 0:s.type)?s.curScope?X({pinId:m,value:o,component:b,curScope:s.curScope,comId:i,val:o,timerPinInputId:h,frameKey:e,inReg:t,notifyAll:a,fromCon:r}):s.pushTodo((n=>{X({pinId:m,value:o,component:b,curScope:n,comId:i,val:o,timerPinInputId:h,frameKey:e,inReg:t,notifyAll:a,fromCon:r})})):X({pinId:m,value:o,component:b,curScope:s.curScope,comId:i,val:o,timerPinInputId:h,frameKey:e,inReg:t,notifyAll:a,fromCon:r}))}))}}}}else X({pinId:m,value:o,component:b,curScope:n,comId:p,val:o,timerPinInputId:h,frameKey:_,inReg:t,notifyAll:a,fromCon:r})}}))))}function G({pinId:e,value:t,curScope:o,inReg:n,notifyAll:r,fromCon:i}){let s=o;const a=e?Object.assign(Object.assign({},n),{pinId:e}):n;if(r){const e=a.frameKey;if(!e)throw new Error("数据异常，请检查toJSON结果.");H(a,e===c?{}:o,t,i)}else{const e=a.frameKey.split("-");if(e.length>=2&&!s){const o=Z(e[0],e[1],null,!1);"scope"===(null==o?void 0:o.type)?o.curScope?H(a,o.curScope,t,i):o.pushTodo((e=>{H(a,e,t,i)})):H(a,s,t,i)}else H(a,s,t,i)}}function X({pinId:e,value:t,component:o,curScope:n,comId:r,val:i,timerPinInputId:s,frameKey:c,inReg:a,notifyAll:l,fromCon:d}){const{isReady:u,isMultipleInput:p,pinId:f,value:m,cb:g}=function({pinId:e,value:t,component:o,curScope:n,comId:r,val:i}){const s=e.indexOf("."),c={pinId:e,value:t,isReady:!0,isMultipleInput:!1,cb:null};if(o&&-1!==s){const t=o.id+""+((null==n?void 0:n.id)?`-${n.id}`:""),{inputs:r}=o,a=e.substring(0,s);c.pinId=a;const l=e.substring(s+1);let d=F[t];d||(d=F[t]={}),d[l]=i;const u=new RegExp(`${a}.`),p=r.filter((e=>!!e.match(u)));Object.keys(d).length===p.length?(c.value=d,c.isMultipleInput=!0,c.cb=()=>{Reflect.deleteProperty(F,t)}):c.isReady=!1}return c}({pinId:e,value:t,component:o,curScope:n,comId:r,val:i});if(u){const e={pinId:p?f:null,value:m,curScope:n,inReg:a,notifyAll:l,fromCon:d};if(s){const t=s+"-"+c+((null==n?void 0:n.id)?`-${n.id}`:""),o=M[t];if(o){const{ready:n,todo:r}=o;if(n){let o=!1;Object.entries(r).forEach((([t,n])=>{t===f?(G(e),o=!0):n()})),o||G(e),null==g||g(),Reflect.deleteProperty(M,t)}else r[f]=()=>{null==g||g(),G(e)}}else M[t]={ready:!1,todo:{[f]:()=>{null==g||g(),G(e)}}}}else null==g||g(),G(e)}}function z(e,o){var n,r,i;const s=j[e];if(!s)return null;const d=e+(s.frameId||c);let m,g=O[d];g||(g=O[d]={});let v=o;for(!v&&s.parentComId&&s.frameId&&(v=null===(r=null===(n=O[`${s.parentComId}-${s.frameId}`])||void 0===n?void 0:n.slot)||void 0===r?void 0:r.curScope);v;){const t=v.id+"-"+e;if(v.frameId===s.frameId){m=v.id;const e=g[t];if(e)return e;{const e=v.parentComId;if(!e)break;if(e===s.paramId||e===s.parentComId)break}}v=v.parent}const h=(m?m+"-":"")+e,_=g[h];if(_)return _;const b=s.def,I=s.model,x=JSON.parse(JSON.stringify(I.data)),k=JSON.parse(JSON.stringify(I.style));k.__model_style__=!0;const S={},A={},P={},R={},T=function(e){return new Proxy({},{ownKeys:e=>s.inputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(t,o)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const n=null==e?void 0:e.inputs;if(n){const e=n[o];"function"==typeof e&&e(t)}S[o]=t;const r=A[o];r&&(r.forEach((({val:e,fromCon:o,fromScope:n})=>{t(e,new Proxy({},{get:(e,t)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;const r=M()[t];if("function"!=typeof r)throw new Error(`outputs.${t} not found`);r(e,n||v,o)}}))})),A[o]=void 0)}})},$=new Proxy({},{get:(t,n)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const r=E[e+"-"+n];if(r){const i={},s={};return r.forEach((e=>{i[e]=t=>{s[e]=t}})),Promise.resolve().then((()=>{U({comId:e,def:b,pinId:n},t,o,s)})),i}U({comId:e,def:b,pinId:n},t,o)}}),F=new Proxy({},{get:(t,o)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const n=C[e+"-"+o];n&&(null==y||y.inputs(Object.assign(Object.assign({},n),{value:t,parentScope:H})))}}),M=function(t){return new Proxy({},{ownKeys:e=>s.outputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(n,r,i){const c=function(n,i,c,d){if("[object Symbol]"===Object.prototype.toString.call(r))return;const u="boolean"==typeof i&&i;if(u){if(s.parentComId){const t=`${s.parentComId}-${s.frameId}`;L[t]?L[t][e]=!0:L[t]={[e]:!0}}if(B[`${s.id}${(null==o?void 0:o.id)?`-${o.id}`:""}`]=n,s.global&&!d)return void(null==y||y.exeGlobalCom({com:s,value:n,pinId:r}))}const p=arguments,f=null==t?void 0:t.outputs;if(f){const e=f[r];"function"==typeof e&&e(n)}let m;i&&"object"==typeof i&&(m=i);const g=a(b);if(!g)return;const v=I.outputEvents;let h;if(v){const t=v[r];if(t&&Array.isArray(t)){const o=t.find((e=>e.active));if(o){const{type:t}=o;switch(t){case"none":h=[];break;case"fx":const i=C[e+"-"+r];if("frame"===(null==i?void 0:i.type)){const e=`${i.frameId}-${i.pinId}`;h=w[e]||[],N[e]=n}else h=[];break;case"defined":break;default:if(h=[],Array.isArray(null==l?void 0:l.events)){const e=l.events.find((e=>{if(e.type===t)return e}));e&&"function"==typeof e.exe&&e.exe({options:o.options})}}}}}h=h||w[e+"-"+r],(null==h?void 0:h.length)?V(p.length>=3&&void 0===d?{logProps:["com",{com:s,pinHostId:r,val:n,fromCon:c,notifyAll:u,comDef:g}],cons:h,val:n,curScope:m,fromCon:c,fromCom:s}:{logProps:["com",{com:s,pinHostId:r,val:n,fromCon:c,notifyAll:u,comDef:g}],cons:h,val:n,curScope:m||o,fromCon:c,notifyAll:u,fromCom:s}):W("com",{com:s,pinHostId:r,val:n,fromCon:c,notifyAll:u,comDef:g})};return c.getConnections=()=>w[e+"-"+r]||[],c}})},D=new Proxy({},{get:(e,t,o)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;P[t]=e;const o=R[t];o&&(o.forEach((t=>{e(t)})),R[t]=void 0)}}),K=new Proxy({},{get:(t,n,r)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const r=w[e+"-"+n];r?V({logProps:["com",{com:s,pinHostId:n,val:t,comDef:b}],cons:r,val:t,curScope:o}):W("com",{com:s,pinHostId:n,val:t,comDef:b})}});const q=null===(i=b.rtType)||void 0===i?void 0:i.match(/^js/gi),H={id:s.id,title:s.title,frameId:s.frameId,parentComId:s.parentComId,data:q?x:t(x),style:q?k:t(k),_inputRegs:S,addInputTodo:(e,t,o,n)=>{let r=A[e];r||(A[e]=r=[]),r.push({val:t,fromCon:o,fromScope:n})},inputs:T(),inputsCallable:$,_inputsCallable:F,outputs:M(),_inputs:D,_outputs:K,clone(e){const t={inputs:T(e),outputs:M(e)};return Object.setPrototypeOf(t,this),t},_notifyBindings:function(e){if(s.global)return void(null==y||y._notifyBindings(e,s));const{bindingsTo:t}=s.model;if(t)for(let o in t){const n=z(o);if(n){const r=t[o];Array.isArray(r)&&r.forEach((t=>{let o=n;const r=t.split(".");r.forEach(((t,n)=>{n!==r.length-1?o=o[t]:o[t]=e}))}))}}},logger:p,onError:f?t=>u({comId:e,error:t,title:s.title}):u};return g[h]=H,H}function J(e,t){let o=N[`${e}${t?`-${t.id}-${t.frameId}`:""}`];return void 0===o&&(null==t?void 0:t.parent)&&(o=J(e,t.parent)),(0,r.o7)(o)}function U(e,t,n,r){var i;const{comId:s,def:l,pinId:d,pinType:m,frameKey:g,finishPinParentKey:v,timerPinInputId:h,targetFrameKey:_}=e;if("ext"===m){const o=O[s]||z(s,n),r=o.style;let i=r.display,c=r.visibility;"show"===d?(i="",c="visible"):"hide"===d?(i="none",c="hidden"):"showOrHide"===d&&(void 0===t?"none"===i?(i="",c="visible"):(i="none",c="hidden"):(i=t?"":"none",c=t?"visible":"hidden")),r.inSmartLayout,r.display=i;const u=a(l);if(!u)return;q({com:o,val:t,pinHostId:d,frameKey:g,finishPinParentKey:v,comDef:u,conId:e.id})}else if("config"===m){const o=z(s,n),r=a(l);if(!r)return;q({com:o,pinHostId:d,val:t,frameKey:g,finishPinParentKey:v,comDef:r,conId:e.id});const{extBinding:i}=e,c=i.split(".");let u=o;c.forEach(((e,o)=>{o!==c.length-1?u=u[e]:u[e]=t}))}else if("timer"===m){const o=z(s,n),r=a(l);if(!r)return;q({com:o,pinHostId:d,val:t,frameKey:g,finishPinParentKey:v,comDef:r,conId:e.id});const i=h+"-"+g+((null==n?void 0:n.id)?`-${n.id}`:""),c=M[i];if(c){const{todo:e}=c;Object.entries(e).forEach((([e,t])=>t())),Reflect.deleteProperty(M,i)}else M[i]={ready:!0,todo:{}}}else if(null===(i=l.rtType)||void 0===i?void 0:i.match(/^js/gi)){const r=j[s];if(r){const i=z(s,n),m=a(l);if(!m)return;if(r.global){const e=null==y?void 0:y.getGlobalComProps(s);e&&(i.data=e.data)}const h=null==n?void 0:n.id,b=(h?h+"-":"")+s;r.inputs.find((e=>e===d))?q({com:r,val:t,pinHostId:d,frameKey:g,finishPinParentKey:v,comDef:m,conId:e.id}):Object.entries(t).forEach((([t,o])=>{q({com:r,val:o,pinHostId:`${d}.${t}`,frameKey:g,finishPinParentKey:v,comDef:m,conId:e.id})})),R[b]||(R[b]=!0,m.runtime({env:A,data:i.data,inputs:i.inputs,outputs:i.outputs,_notifyBindings:i._notifyBindings,_inputsCallable:i._inputsCallable,logger:p,onError:f?e=>u({comId:s,error:e,title:r.title}):u}));const I=i._inputRegs[d];"function"==typeof I?I(t,new Proxy({},{get:(t,r)=>function(t){if("[object Symbol]"!==Object.prototype.toString.call(r)){if(k){const e=k[`${s}-${d}`];if(e){const r=`${e.frameId===o.id?c:_||g}-${e.pinId}`;void 0===(t=J(r,n))&&(t=J(r,null))}}i.outputs[r](t,n,e)}}})):i.addInputTodo(d,t,e,n)}}else{const o=z(s,n);if(!o)return;const i=a(l);if(!i)return;q({com:o,pinHostId:d,val:t,frameKey:g,finishPinParentKey:v,comDef:i,conId:e.id});const c=o._inputRegs[d];if("function"==typeof c){let i;i=r||new Proxy({},{get:(t,r)=>function(t){"[object Symbol]"!==Object.prototype.toString.call(r)&&o.outputs[r](t,n,e)}}),c(t,i)}else o.addInputTodo(d,t,e,n)}if(v){const e=w[$[v]];e&&!E[`${s}-${d}`]&&V({logProps:null,cons:e,val:void 0})}}function Y(e,t){let o;return console.log(),(null==e?void 0:e.comAry)&&e.comAry.find((e=>{if(e.id===t)return o=e,e;if(e.slots)for(let n in e.slots)if(o=Y(e.slots[n],t),o)return o})),o}function Z(e,t,o,n){const r="string"!=typeof t,i=r?t.id:t,s=`${e}-${i}`;let c=O[s];c||(c=O[s]={});let a=o?o.id:"slot",l=c[a];if(n&&!l&&console.log("不应该再走到这儿了: ",{comId:e,slotId:i,scope:o,notifyAll:n}),!l){let n=r?t:K[`${e}-${i}`];if(!n){const t=Y(b,e);if(!(null==t?void 0:t.slots))return null;n=null==t?void 0:t.slots[i]}const d={};let u;if(o){const t=O[e+"-"+i];t&&(u=t.todo)}const p={scope:o,todo:u},f=new Proxy({},{get:(e,t)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(d[t]=e)}}),m=new Proxy({},{get(t,o){const n=function(t,n){if("[object Symbol]"===Object.prototype.toString.call(o))return;let r=n||p.scope;const s=e+"-"+i+"-"+o,c=w[s];N[`${s}${r?`-${r.id}-${r.frameId}`:""}`]=t,c?V({logProps:["frame",{comId:e,frameId:i,pinHostId:o,val:t}],cons:c,val:t,curScope:r}):W("frame",{comId:e,frameId:i,pinHostId:o,val:t})};return n.getConnections=()=>w[e+"-"+i+"-"+o]||[],n}}),g=new Proxy({},{get:(t,n,r)=>function(t){var r;"[object Symbol]"!==Object.prototype.toString.call(n)&&(P[`${e}-${i}-${null==o?void 0:o.id}-${n}`]=t,P[`${e}-${i}-${null===(r=null==o?void 0:o.parent)||void 0===r?void 0:r.id}-${n}`]=t,P[a+"-"+n]=t,P[s+"-"+n]=t)}});let v={};l=c[a]={type:null==n?void 0:n.type,run(t){let o=p.scope;t&&o!==t&&(p.scope=t,o=t);const n=(null==o?void 0:o.id)||"none";if(v[n]||(v[n]=!0,Q({comId:e,frameId:i,scope:o})),Array.isArray(p.todo)&&(p.todo.forEach((e=>{Promise.resolve().then((()=>{e(o)}))})),p.todo=void 0),o&&"slot"!==a){const t=D[`${e}-${i}`];Promise.resolve().then((()=>{t&&Object.entries(t).forEach((([e,t])=>{if(!j[e].parentComId){const n=Object.entries(t).map((([e,t])=>t));n.length&&V({logProps:null,cons:n,val:B[e],curScope:o,notifyAll:!0,fromCom:j[e],isAutoRun:!0})}}))}))}},destroy(){if(o){const e=`${o.parentComId}-${o.frameId}`,t=L[e];t&&Object.keys(t).forEach((e=>{Reflect.deleteProperty(B,`${e}-${o.id}`)}))}Reflect.deleteProperty(c,a)},_inputs:f,_inputRegs:d,inputs:m,outputs:g,get curScope(){return p.scope},setCurScope(e){p.scope=e},get todo(){return p.todo},pushTodo(e){p.todo||(p.todo=[]),p.todo.push(e)},setSlotValue(t,o){const n=o||p.scope;Object.entries(t).forEach((([t,o])=>{N[`${e+"-"+i+"-"+t}${n?`-${n.id}-${n.frameId}`:""}`]=o}))}}}return l}function Q(e){const{comId:t,frameId:o,scope:n}=e,r=x[t?`${t}-${o}`:`${o}`];r&&r.forEach((e=>{const{id:t,def:o}=e,r=j[t];if(r){const e=z(t,n),i=a(o);if(!i)return;i.runtime({env:A,data:e.data,inputs:e.inputs,outputs:e.outputs,_inputsCallable:e._inputsCallable,logger:p,onError:f?e=>u({comId:t,error:e,title:r.title}):u})}}))}function ee({options:e,value:t,scope:n,log:r=!0,comProps:i}){const{frameId:s,comId:a,pinId:l,sceneId:d}=e,u=w[(a?`${a}-${s}`:`${s}`)+"-"+l];N[`${s}-${l}`]=t,u?V({logProps:["frame",{comId:a,frameId:s,pinHostId:l,val:t,sceneId:d}],cons:u,val:t,curScope:n}):(r&&W("frame",{comId:a,frameId:s,pinHostId:l,val:t,sceneId:d}),s!==c&&(o.id===s?T[l](t):null==y||y.open({frameId:s,todo:{pinId:l,value:t},comProps:i,parentScope:n.proxyComProps})))}const te={get({comId:e,slotId:t,slot:o,scope:n,_ioProxy:r}){let i;if(r&&(r.inputs||r.outputs||r._inputs||r._outputs)&&(i=r),t)return o&&(K[`${e}-${t}`]=o),Z(e,o||t,n);{const t=z(e,n);return i?t.clone(i):t}},getComInfo:e=>j[e]};if("function"==typeof d){d({style:null==b?void 0:b.style,run(){Q({frameId:c})},inputs:new Proxy({},{get:(e,t)=>function(e,o=void 0,n=!0){"[object Symbol]"!==Object.prototype.toString.call(t)&&ee({options:{frameId:c,pinId:t,sceneId:o},value:e,scope:void 0,log:n})}}),outputs(e,t){T[e]=t},get:te.get,getComInfo:te.getComInfo})}return te}},238:(e,t,o)=>{"use strict";function n(e,t,o){var n,r;const i=null===(n=null==e?void 0:e.def)||void 0===n?void 0:n.namespace,s=null===(r=null==o?void 0:o[1])||void 0===r?void 0:r.pinHostId;return!(i&&s&&("test.text"===i&&"testOut"===s||"fangzhou.normal-pc.table-blocks"===i&&"rowSelection"===s)&&t.startPinParentKey)}o.d(t,{i:()=>n})},483:(e,t,o)=>{"use strict";o.d(t,{$:()=>s,qr:()=>r,sK:()=>i});let n=!1;function r(){n=!0}function i(e,t,o,r){if(n)return;let i;try{i=JSON.stringify(r)}catch(e){i=r}console.log(`%c [MyBricks] 输入项 %c ${e||t.title||t.namespace} | ${o} -> ${i}`,"color:#FFF;background:#000","","")}function s(e,t,o,r){if(n)return;let i;try{i=JSON.stringify(r)}catch(e){i=r}console.log(`%c [MyBricks] 输出项 %c ${e||t.title||t.namespace} | ${o} -> ${i}`,"color:#FFF;background:#fa6400","","")}},357:(e,t,o)=>{"use strict";o.d(t,{XC:()=>n.X,gF:()=>s,j0:()=>r.j,qG:()=>i});var n=o(260),r=o(340);const i=new WeakMap,s=new WeakMap},340:(e,t,o)=>{"use strict";o.d(t,{j:()=>r});var n=o(357);const r=new class{constructor(){this.reactionStack=[]}regist(e){let t=this.getCurrentReaction();t&&n.XC.registReaction(t,e)}autoRun(e,t){const{reactionStack:o}=this;if(-1===o.indexOf(e))try{return o.push(e),t()}finally{o.pop()}}getCurrentReaction(){const{reactionStack:e}=this;return e[e.length-1]}}},260:(e,t,o)=>{"use strict";o.d(t,{X:()=>s});var n=o(50),r=o(357);function i(e){e()}const s=new class{constructor(){this.taskMap=new WeakMap,this.reactionToTaskMap=new WeakMap}addTask(e){this.taskMap.set(e,new Map)}deleteTask(e){if(!(0,n.Gv)(e))return;const t=r.qG.get(e);r.qG.delete(e),r.gF.delete(t);this.taskMap.get(t);this.taskMap.delete(t)}deleteReaction(e){let t=this.reactionToTaskMap.get(e);t&&(this.reactionToTaskMap.delete(e),t.forEach((t=>{t.forEach((t=>{t.delete(e)}))})))}registReaction(e,{target:t,key:o}){const n=this.taskMap.get(t);if(n){let t=n.get(o);t||(t=new Set,n.set(o,t)),t.has(e)||t.add(e);let r=this.reactionToTaskMap.get(e);r||(r=new Set,this.reactionToTaskMap.set(e,r)),r.has(n)||r.add(n)}}getReactions({target:e,key:t}){const o=this.taskMap.get(e);if(!o)return[];return o.get(t)||[]}runTask(e){const t=this.getReactions(e);t.size&&t.forEach(i)}}},670:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var n=o(29),r=o(50),i=o(357);const s={get:function(e,t){const o=e[t];if(["$$typeof","constructor"].includes(t)||e.__model_style__&&!["display","visibility"].includes(t))return o;if(i.j0.regist({target:e,key:t}),o instanceof FormData)return o;const s=i.gF.get(o);return(0,r.Gv)(o)?s||(0,n.s)(o):s||o},set:function(e,t,o){(0,r.Gv)(o)&&(o=i.qG.get(o)||o);const n=Object.hasOwnProperty.call(e,t),s=e[t];e[t]=o;let c=!1;switch(!0){case!n||Array.isArray(e)&&"length"===t:case o!==s:c=!0}return c&&(i.XC.runTask({target:e,key:t}),i.XC.deleteTask(i.gF.get(s))),!0}}},29:(e,t,o)=>{"use strict";o.d(t,{s:()=>f,y:()=>d});var n=o(12),r=o.n(n),i=o(357),s=o(50),c=o(670);const a="__render-web-createElement__";let l;function d(e){const{pxToRem:t,pxToVw:o}=e;r()[a]||(r()[a]=!0,l=r().createElement,r().createElement=function(...e){let[i,c]=e;if(c){const a=c.style;if(t&&a?Object.keys(a).forEach((e=>{const t=a[e];"string"==typeof t&&-1!==t.indexOf("px")&&(a[e]=(0,s.a8)(t))})):o&&a&&Object.keys(a).forEach((e=>{const t=a[e];"string"==typeof t&&-1!==t.indexOf("px")&&(a[e]=o(t))})),e.length>0&&"function"==typeof i){if(!i.prototype||!(i.prototype instanceof r().Component)&&void 0===i.prototype.isReactComponent){const t=function(e,t=!1){let o=e[u];if(!o){t?(o=(0,n.memo)(e),o.render=p(e.render,!1)):o=p(e);try{e[u]=o}catch(e){}}const r=Object.getOwnPropertyNames(e);return r&&r.forEach((n=>{try{t&&"render"===n||(o[n]=e[n])}catch(e){console.error(e)}})),o}(i);e.splice(0,1,t)}return l(...e)}return"object"==typeof i&&(i.$$typeof,Symbol.for("react.forward_ref")),l(...e)}return l(...e)})}const u="__enhanced__";function p(e,t=!0){function o(t,o){var r;const i=(0,n.useRef)(null),[,s]=(0,n.useState)([]);let c;return(0,n.useMemo)((()=>{i.current||(i.current=new m((()=>s([]))))}),[]),(0,n.useEffect)((()=>()=>{var e;null===(e=i.current)||void 0===e||e.destroy(),i.current=null}),[]),null===(r=i.current)||void 0===r||r.track((()=>{c=e(t,o)})),c}return o.displayName=e.displayName||e.name,t?(0,n.memo)(o):o}function f(e){return(0,s.Gv)(e)?i.qG.has(e)?e:i.gF.get(e)||function(e){const t=c.A,o=new Proxy(e,t);return i.gF.set(e,o),i.qG.set(o,e),i.XC.addTask(e),o}(e):{}}class m{constructor(e){this.update=e}track(e){i.j0.autoRun(this.update,e)}destroy(){i.XC.deleteReaction(this.update)}}},50:(e,t,o)=>{"use strict";function n(e){return e&&"object"==typeof e}function r(e){return"number"==typeof e&&!isNaN(e)}function i(e,t){const o=e.split("."),n=t.split("."),r=o.length,i=n.length,s=Math.min(r,i);let c=0;for(;c<s;c++){let e=parseInt(o[c]),t=parseInt(n[c]);if(e>t)return 1;if(e<t)return-1}if(r>i){for(let e=c;e<r;e++)if(0!=parseInt(o[e]))return 1;return 0}if(r<i){for(let e=c;e<i;e++)if(0!=parseInt(n[e]))return-1;return 0}return 0}function s(e=5,t=8){const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];if(t=t||o.length,e)for(let r=0;r<e;r++)n[r]=o[0|Math.random()*t];else{let e;n[8]=n[13]=n[18]=n[23]="-",n[14]="4";for(let t=0;t<36;t++)n[t]||(e=0|16*Math.random(),n[t]=o[19==t?3&e|8:e])}return n.join("")}function c(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}o.d(t,{A4:()=>h,BS:()=>p,Et:()=>r,Gm:()=>i,Gv:()=>n,RD:()=>c,a8:()=>u,eq:()=>f,iu:()=>g,o7:()=>v,uR:()=>s,y_:()=>y});const a=function(e,t,o,n){return function(r,i){var s,c,a,l,d=parseFloat(i);return!i||d<=t?r:"".concat((s=d/e,c=o,a=Math.pow(10,c+1),l=Math.floor(s*a),10*Math.round(l/10)/a)).concat(n)}},l=a(12,0,5,"rem"),d=(a(3.75,0,5,"vw"),/"[^"]+"|'[^']+'|url\([^)]+\)|(\d*\.?\d+)px/g),u=e=>e.replace(d,l),p=({viewportWidth:e=375,unitPrecision:t=5})=>{const o=a(e/100,0,t,"vw");return e=>e.replace(d,o)};function f(e){return e}let m;function g(){var e;return m||(m=(null===(e=document.getElementById("_mybricks-geo-webview_"))||void 0===e?void 0:e.shadowRoot)||document.head)}function v(e){if(e&&"object"==typeof e)try{return e instanceof FormData?e:JSON.parse(JSON.stringify(e))}catch(t){return e}return e}function y(e,t=[]){const o=Object.prototype.toString.call(e);if(null===e||"object"!=typeof e||o.startsWith("[object HTML"))return e;const n=t.filter((t=>t.original===e))[0];if(n)return n.copy;const r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.keys(e).forEach((o=>{r[o]=h(e[o],t)})),r}function h(e,t=[]){const o=Object.prototype.toString.call(e);if(null===e||"object"!=typeof e||o.startsWith("[object HTML"))return e;const n=t.filter((t=>t.original===e))[0];if(n)return n.copy;const r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.getOwnPropertyNames(e).forEach((o=>{const n=Object.getOwnPropertyDescriptor(e,o);n&&"function"==typeof n.get?Object.defineProperty(r,o,{get:n.get,enumerable:n.enumerable,configurable:n.configurable}):r[o]=h(e[o],t)})),r}},495:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var n=o(12),r=o.n(n),i=o(356);const s=o(443).A.locals;class c extends r().PureComponent{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){var t;return{hasError:!0,error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))}}componentDidCatch(e,t){var o,n,r,s;null===(n=null===(o=this.props.options)||void 0===o?void 0:o.errorHandler)||void 0===n||n.call(o,e,t),i.A.error(e),this.setState({error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(r=null==e?void 0:e.toString)||void 0===r?void 0:r.call(e)),errorInfo:(null==t?void 0:t.stack)||(null==t?void 0:t.message)||(null===(s=null==t?void 0:t.toString)||void 0===s?void 0:s.call(t))})}render(){const{hasError:e,error:t,errorInfo:o}=this.state,{children:n,errorTip:i}=this.props;return e?r().createElement("div",{className:s.error},r().createElement("div",null,i||"渲染错误"),r().createElement("div",null,t||o)):n}}},983:(e,t,o)=>{"use strict";o.d(t,{A:()=>d});var n=o(12),r=o.n(n),i=o(882),s=o(822),c=o(492),a=o(356),l=o(495);function d({json:e,options:t,style:o={},className:d="",root:u=!0,from:p}){const f=(0,i.b2)(),{env:m,onError:g,logger:v,slot:y,getComDef:h}=(0,n.useMemo)((()=>{const{env:n,debug:r}=t,i=e.slot;if(!n.canvas.isValid&&!t._isNestedRender&&r&&"scene"===p&&i&&"module"!==i.type&&"module"!==i.showType&&(o.minHeight=i.style.height,o.flex=1),"module"===(null==i?void 0:i.showType)||"module"===(null==i?void 0:i.type)){const{style:e}=i;o.hasOwnProperty("height")||(e.heightAuto?o.height="fit-content":e.heightFull?o.height="100%":o.height=e.height),o.hasOwnProperty("width")||(e.widthAuto?o.width="fit-content":e.widthFull?o.width="100%":o.width=e.width),i.style.backgroundColor=i.style.backgroundColor||"#ffffff00"}return"module"===e.type&&(i.style.backgroundColor=i.style.backgroundColor||"#ffffff00"),"2024-diff"===f._v&&(e._v=f._v),{env:n,onError:f.onError,logger:f.logger,getComDef:e=>f.getComDef(e),slot:i,_context:f}}),[]),[_,b,I]=(0,n.useMemo)((()=>{var o;try{let o,n=!0;const r=(0,s.A)({json:e,getComDef:h,events:t.events,env:m,ref(e){o=e,"function"==typeof t.ref&&(t.ref(e),n=!1)},onError:g,debug:t.debug,debugLogger:t.debugLogger,logger:v,scenesOperate:t.scenesOperate,_isNestedRender:t._isNestedRender,_context:f},{observable:f.observable});return r.styleMap={},[r,o,n]}catch(e){throw console.error(e),a.A.error(`导出的JSON.script执行异常: ${(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(o=null==e?void 0:e.toString)||void 0===o?void 0:o.call(e))}`),new Error("导出的JSON.script执行异常.")}}),[]);return(0,n.useLayoutEffect)((()=>{if(!t.disableAutoRun){if(I){const{inputs:o}=b,n=e.inputs;o&&Array.isArray(n)&&n.forEach((e=>{const{id:n,mockData:r}=e;let i;if(t.debug&&void 0!==r)try{i=JSON.parse(decodeURIComponent(r))}catch(e){i=r}o[n](i)}))}b.run()}}),[]),r().createElement(l.A,{errorTip:"页面渲染错误",options:t},r().createElement(c.A,Object.assign({env:m,style:o,_env:t._env,slot:y,getComDef:h,context:_,className:d,createPortal:t.createPortal||(()=>{}),onError:g,logger:v,root:u,options:t},"module"===e.type?{onClick(){var e;null===(e=t.outputs)||void 0===e||e.click()}}:{})))}},893:(e,t,o)=>{"use strict";o.d(t,{A:()=>p});var n=o(12),r=o.n(n),i=o(983),s=o(882),c=o(822),a=o(148),l=function(e,t,o,n){return new(o||(o=Promise))((function(r,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function c(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,c)}a((n=n.apply(e,t||[])).next())}))};class d{constructor(e){this.history=[],this.index=-1,"popup"!==e.type&&(this.history[++this.index]={id:e.id,todo:[]})}go(e){this.history=this.history.slice(0,++this.index).concat({id:e,todo:[]})}back(){if(this.index>0)return this.history[--this.index]}forward(){if(this.history.length>this.index+1)return this.history[++this.index]}redirect(e){this.index>-1&&(this.history=this.history.slice(0,this.index).concat({id:e,todo:[]}))}setTodo(e){this.history[this.index].todo=e}}const u=a.A.locals;function p({json:e,options:t}){const o=(0,s.b2)(),[i,a]=(0,n.useState)(0),[p,g]=(0,n.useState)([]),[v,y]=(0,n.useState)([]),{scenesMap:h,scenesOperateInputsTodo:_,themes:b,permissions:I,globalVarMap:x,debugHistory:w}=(0,n.useMemo)((()=>{if(t.sceneId){const o=e.scenes.findIndex((e=>e.id===t.sceneId));if(-1!==o){const t=e.scenes.splice(o,1);e.scenes.unshift(...t),"popup"===t[0].type&&g([t[0].id])}}const o=[];e.scenes.forEach(((e,t)=>{"popup"===e.type?t||g([e.id]):o.push(e)})),y(o);const{modules:n,definedComs:r}=e;return t.env.getDefinedComJSON||(t.env.getDefinedComJSON=e=>r[e].json),t.env.getModuleJSON=e=>{var t;return null===(t=null==n?void 0:n[e])||void 0===t?void 0:t.json},{scenesMap:e.scenes.reduce(((e,o,n)=>{var r;return Object.assign(Object.assign({},e),{[o.id]:{show:0===n,todo:[],json:o,disableAutoRun:!(!t.disableAutoRun&&!n),useEntryAnimation:!1,type:(null===(r=o.slot)||void 0===r?void 0:r.showType)||o.type,main:0===n}})}),{}),scenesOperateInputsTodo:{},themes:e.themes,permissions:e.permissions||[],globalVarMap:{},debugHistory:new d(e.scenes[0])}}),[]);(0,n.useMemo)((()=>{if(t.ref){const e=t.ref;t.ref=o=>n=>(o(n),e.call(t,n))}else t.ref=e=>t=>{e(t)}}),[]);const{fxToJsonMap:E,currentFxFrameIdsMap:C}=(0,n.useMemo)((()=>{const t={},{global:o}=e;if(o){const{fxFrames:e}=o;Array.isArray(e)&&e.forEach((e=>{t[e.id]=e}))}return{fxToJsonMap:t,currentFxFrameIdsMap:{}}}),[]),k=(0,n.useCallback)((n=>{const r=h[n],i=t.env.hasPermission,{env:s}=t;s.themes=b,s.permissions=I,"function"==typeof i&&Object.defineProperty(s,"hasPermission",{get:function(){return e=>{if("string"==typeof e){const t=I.find((t=>t.id===e));return i({permission:t})}return i(e)}}}),s.canvas.open=(e,o,n,r)=>l(this,void 0,void 0,(function*(){var o,i;let s=h[e];if(!s){if("function"!=typeof t.scenesLoader)return void console.error(`缺少场景信息: ${e}`);const n=yield t.scenesLoader({id:e});if(s={disableAutoRun:!1,json:n,show:!1,parentScope:null,todo:[],type:(null===(o=n.slot)||void 0===o?void 0:o.showType)||n.type,useEntryAnimation:!1},h[e]=s,"popup"===n.type||y((e=>[...e,n])),_[e]){const{parentScope:t,todo:o}=_[e];s.parentScope=t,o.forEach((({value:e,pinId:t,parentScope:o})=>{s.todo=s.todo.concat({type:"inputs",todo:{pinId:t,value:e}})}))}}null===(i=t.scenesLoaded)||void 0===i||i.call(t,s.json),n?"none"===n?(h[e].show=!0,a((e=>e+1))):(r||("blank"===n?w.go(e):"redirect"===n&&w.redirect(e)),Object.entries(h).forEach((([o,r])=>{o===e?("blank"===n&&"redirect"!==t.sceneOpenType?r.useEntryAnimation=!0:r.useEntryAnimation=!1,r.show=!0,"popup"===r.type?g((t=>[...t,e])):a((e=>e+1))):(r.show=!1,r._refs=null,"popup"===r.type?g((e=>e.filter((e=>e!==r.json.id)))):a((e=>e+1)))}))):s.show||("blank"===n&&"redirect"!==t.sceneOpenType?s.useEntryAnimation=!0:s.useEntryAnimation=!1,s.show=!0,"popup"===s.type?g((t=>[...t,e])):a((e=>e+1)))})),s.canvas.back=()=>{const e=w.back();if(e){const{id:t,todo:o}=e;s.canvas.open(t,null,"blank","back");h[t].todo=o}},s.canvas.forward=()=>{const e=w.forward();if(e){const{id:t,todo:o}=e;s.canvas.open(t,null,"blank","forward");h[t].todo=o}};const d={open({todo:n,frameId:r,parentScope:i,comProps:s}){var l;const d=h[r];if(d)d.show||(d.show=!0,d.todo=d.todo.concat({type:"inputs",todo:n}),d.parentScope=i,"popup"===d.type?g((e=>[...e,r])):a((e=>e+1)));else{const a=E[r];if(a)if(C[i.id]){const{_refs:e}=C[i.id];C[i.id].parentScope=i;const t=null===(l=null==s?void 0:s.data)||void 0===l?void 0:l.configs;t&&Object.entries(t).forEach((([t,o])=>{e.inputs[t](o,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()}else{C[i.id]={};const{id:r}=a,{env:l}=t,d={open({todo:n,frameId:r,parentScope:i,comProps:s}){var a;const l=E[r];if(l)if(C[i.id]){const{_refs:e}=C[i.id];C[i.id].parentScope=i;const t=null===(a=null==s?void 0:s.data)||void 0===a?void 0:a.configs;t&&Object.entries(t).forEach((([t,o])=>{e.inputs[t](o,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()}else{C[i.id]={};const{env:r}=t,a={open({todo:e,frameId:t,parentScope:o,comProps:n}){var r;const i=C[o.id];if(null==i?void 0:i._refs){C[o.id].parentScope=o;const t=null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.configs;t&&Object.entries(t).forEach((([e,t])=>{i._refs.inputs[e](t,void 0,!1)})),i._refs.inputs[e.pinId](e.value,void 0,!1),i._refs.run()}},inputs({frameId:e,parentScope:t,value:o,pinId:n}){const r=h[e];r?(r.parentScope=t,r._refs?r._refs.inputs[n](o):r.todo=r.todo.concat({type:"inputs",todo:{pinId:n,value:o}})):_[e]?_[e].todo.push({frameId:e,parentScope:t,value:o,pinId:n}):_[e]={parentScope:t,todo:[{value:o,pinId:n}]}},_notifyBindings(e,t){const{bindingsTo:o}=t.model;if(o)for(let t in o)for(let n in h){const r=h[n];if(r.json.coms[t])if(r._refs)m(r._refs,t,o[t],e);else{const n=o[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:n,value:e}})}}},getGlobalComProps(t){var o;return(null===(o=h[e.scenes[0].id]._refs)||void 0===o?void 0:o.get({comId:t}))||{data:{val:x[t]}}},exeGlobalCom({com:e,value:t,pinId:o}){const n=e.id;x[n]=t,Object.keys(h).forEach((e=>{const r=h[e];if(r.show&&r._refs){const e=r._refs.get({comId:n});e&&e.outputs[o](t,!0,null,!0)}}))}};(0,c.A)({json:l,getComDef:e=>o.getComDef(e),events:t.events,env:r,ref(e){var t;C[i.id]._refs=e,C[i.id].parentScope=i;const{inputs:o,outputs:r}=e;l.outputs.forEach((e=>{r(e.id,(t=>{var o;null===(o=C[i.id].parentScope)||void 0===o||o.outputs[e.id](t)}))}));const c=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.configs;c&&Object.entries(c).forEach((([t,o])=>{e.inputs[t](o,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()},onError:o.onError,debug:t.debug,debugLogger:t.debugLogger,logger:o.logger,scenesOperate:a,_context:o},{observable:o.observable})}},inputs({frameId:e,parentScope:t,value:o,pinId:n}){const r=h[e];r?(r.parentScope=t,r._refs?r._refs.inputs[n](o):r.todo=r.todo.concat({type:"inputs",todo:{pinId:n,value:o}})):_[e]?_[e].todo.push({frameId:e,parentScope:t,value:o,pinId:n}):_[e]={parentScope:t,todo:[{value:o,pinId:n}]}},_notifyBindings(e,t){const{bindingsTo:o}=t.model;if(o)for(let t in o)for(let n in h){const r=h[n];if(r.json.coms[t])if(r._refs)m(r._refs,t,o[t],e);else{const n=o[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:n,value:e}})}}},getGlobalComProps(t){var o;return(null===(o=h[e.scenes[0].id]._refs)||void 0===o?void 0:o.get({comId:t}))||{data:{val:x[t]}}},exeGlobalCom({com:e,value:t,pinId:o}){const n=e.id;x[n]=t,Object.keys(h).forEach((e=>{const r=h[e];if(r.show&&r._refs){const e=r._refs.get({comId:n});e&&e.outputs[o](t,!0,null,!0)}}))}};(0,c.A)({json:a,getComDef:e=>o.getComDef(e),events:t.events,env:l,ref(e){var t;C[i.id]._refs=e,C[i.id].parentScope=i;const{inputs:o,outputs:r}=e;a.outputs.forEach((e=>{r(e.id,(t=>{var o;null===(o=C[i.id].parentScope)||void 0===o||o.outputs[e.id](t)}))}));const c=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.configs;c&&Object.entries(c).forEach((([t,o])=>{e.inputs[t](o,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()},onError:o.onError,debug:t.debug,debugLogger:t.debugLogger,logger:o.logger,scenesOperate:d,_context:o},{observable:o.observable})}}},inputs({frameId:e,parentScope:t,value:o,pinId:n}){const r=h[e];r?(r.parentScope=t,r._refs?r._refs.inputs[n](o):r.todo=r.todo.concat({type:"inputs",todo:{pinId:n,value:o}})):_[e]?_[e].todo.push({frameId:e,parentScope:t,value:o,pinId:n}):_[e]={parentScope:t,todo:[{value:o,pinId:n}]}},_notifyBindings(e,t){const{bindingsTo:o}=t.model;if(o)for(let t in o)for(let n in h){const r=h[n];if(r.json.coms[t])if(r._refs)m(r._refs,t,o[t],e);else{const n=o[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:n,value:e}})}}},getGlobalComProps(t){var o;return(null===(o=h[e.scenes[0].id]._refs)||void 0===o?void 0:o.get({comId:t}))||{data:{val:x[t]}}},exeGlobalCom({com:e,value:t,pinId:o}){const n=e.id;x[n]=t,Object.keys(h).forEach((e=>{const r=h[e];if(r.show&&r._refs){const e=r._refs.get({comId:n});e&&e.outputs[o](t,!0,null,!0)}}))}};return s.scenesOperate=d,Object.assign(Object.assign({},t),{env:s,get disableAutoRun(){return r.disableAutoRun},ref:t.ref((e=>{e.canvas=s.canvas,r._refs=e;const o=r.todo,{inputs:i,outputs:c}=e,l=r.disableAutoRun;r.json.outputs.forEach((e=>{c(e.id,(t=>{var o,n,i;"apply"===e.id?null===(o=r.parentScope)||void 0===o||o.outputs[e.id](t):"module"!==r.type&&l?(r.show=!1,r.todo=[],r._refs=null,null===(n=r.parentScope)||void 0===n||n.outputs[e.id](t),r.parentScope=null,"popup"===r.type?g((e=>e.filter((e=>e!==r.json.id)))):a((e=>e+1))):null===(i=r.parentScope)||void 0===i||i.outputs[e.id](t)}))})),o.length?(o.forEach((({type:t,todo:o})=>{if("inputs"===t)Promise.resolve().then((()=>{i[o.pinId](o.value,n)}));else if("globalVar"===t){const{comId:t,value:n,bindings:r}=o;m(e,t,r,n)}})),w.setTodo(o),r.todo=[]):l||(r.disableAutoRun=!0,Promise.resolve().then((()=>{var e,o;const n=[];null===(o=null===(e=r.json.inputs)||void 0===e?void 0:e.forEach)||void 0===o||o.call(e,(e=>{const{id:o,mockData:r}=e;let s;if(t.debug&&void 0!==r)try{s=JSON.parse(decodeURIComponent(r))}catch(e){s=r}n.push({type:"inputs",todo:{pinId:o,value:s}}),i[o](s)})),w.setTodo(n)}))),l&&Promise.resolve().then((()=>{e.run()}))})),_env:{loadCSSLazy(){},currentScenes:{close(){r.show=!1,r.todo=[],r._refs=null,"popup"===r.type?g((e=>e.filter((e=>e!==r.json.id)))):a((e=>e+1))}}},scenesOperate:d})}),[]),S=(0,n.useMemo)((()=>v.length?v.map((e=>{const{id:o}=e,n=h[o];if(n.show){let i=n.useEntryAnimation?u.main:"",s="popup"===n.type?{position:"absolute",top:0,left:0,backgroundColor:"#ffffff00"}:{};if(n.main){const{className:e,style:o}=t;e&&(i+=` ${e}`),o&&(s=Object.assign(s,o))}return n.show&&r().createElement(f,{key:o,json:Object.assign(Object.assign({},e),{scenesMap:h}),options:k(o),className:i,style:s})}return null})):null),[i,v]),j=(0,n.useMemo)((()=>p.length?p.map((e=>{const o=h[e],n=o.json,{id:i}=n;let s="",c={position:t.debug?"fixed":"absolute",top:0,left:0,backgroundColor:"#ffffff00",zIndex:1e3};if(o.main){const{className:e,style:o}=t;e&&(s=e),o&&(c=Object.assign(c,o))}return r().createElement(f,{key:n.id,json:Object.assign(Object.assign({},n),{scenesMap:h}),options:k(i),style:{position:t.debug?"fixed":"absolute",top:0,left:0,backgroundColor:"#ffffff00",zIndex:1e3}})})):null),[p]);return(0,n.useEffect)((()=>{o.setPerformanceRender("end",(new Date).getTime())}),[]),r().createElement(r().Fragment,null,S,j)}function f({json:e,options:t,style:o={},className:n=""}){return r().createElement(i.A,{json:e,options:t,style:o,className:n,from:"scene"})}function m(e,t,o,n){const r=e.get({comId:t});r&&Array.isArray(o)&&o.forEach((e=>{let t=r;const o=e.split(".");o.forEach(((e,r)=>{r!==o.length-1?t=t[e]:t[e]=n}))}))}},356:(e,t,o)=>{"use strict";o.d(t,{A:()=>v});var n=o(12),r=o.n(n),i=o(33),s=o.n(i);const c=o(462).A.locals;let a=!1;var l;!function(e){e.Error="error"}(l||(l={}));const d="__fz-debug-info-container__";let u,p=document.getElementById(d),f=0;const m=({content:e,type:t})=>{const[o,i]=(0,n.useState)([]),s=e=>{const t=`__fz-notification-id-${++f}__`;e=Object.assign({_nid:t},e),i((t=>[...t,e]))},a=e=>{i((t=>t.filter((t=>t._nid!==e))))};return(0,n.useEffect)((()=>{u={add:s,remove:a},e&&u.add({content:e,type:t})}),[]),r().createElement("div",{className:c.container},o.map((e=>r().createElement("div",{key:e._nid,className:c.itemWrap},r().createElement("div",{className:`${c.item} ${c.errorItem}`},r().createElement("svg",{className:c.closeIcon,viewBox:"0 0 1045 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>u.remove(e._nid)},r().createElement("path",{d:"M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z",fill:"#555555"})),e.content)))))},g=["ResizeObserver loop limit exceeded"],v={init:e=>{a=!1!==e,a&&(window.onerror=function(e,t,o,n,r){if("string"!=typeof e||!g.includes(e))return!1})},error:e=>{var t;if(a){const o=(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))||e;if("string"==typeof o&&g.includes(o))return;((e,t)=>{let o={content:"",type:t};if("string"==typeof e)o.content=e;else try{o.content=JSON.stringify(e)}catch(t){console.error("showNotification JSON.stringify Error",t,{message:e})}o.content&&(p?null==u||u.add(o):(p=document.createElement("div"),p.setAttribute("id",d),document.body.appendChild(p),s().render(r().createElement(m,{content:o.content,type:o.type}),p)))})(o,l.Error)}}}},492:(e,t,o)=>{"use strict";o.d(t,{A:()=>u});var n=o(12),r=o.n(n),i=o(50),s=o(165),c=o(495),a=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o};const l=s.A.locals;function d({com:e,index:t,env:o,getComDef:n,context:i,scope:s,inputs:c,outputs:a,_inputs:l,_outputs:u,_env:f,template:m,onError:g,logger:v,createPortal:y,options:h}){const{id:_,elements:b,style:I}=e;if(b){let e;const{handlePxToVw:p}=h;return p?(e={},Object.entries(I).forEach((([t,o])=>{const n=typeof o;"string"===n&&-1!==o.indexOf("px")?e[t]=p(o):e[t]="number"===n?p(`${o}px`):o}))):e=I,r().createElement("div",{key:_,style:e},b.map((e=>d({com:e,index:t,env:o,getComDef:n,context:i,scope:s,inputs:c,outputs:a,_inputs:l,_outputs:u,_env:f,template:m,onError:g,logger:v,createPortal:y,options:h}))))}{const r=p({com:e,env:o,getComDef:n,context:i,scope:s,inputs:c,outputs:a,_inputs:l,_outputs:u,index:t,_env:f,template:m,onError:g,logger:v,createPortal:y,options:h});return null==r?void 0:r.jsx}}function u({scope:e,root:t,slot:o,style:n={},createPortal:i,className:s,params:c,inputs:l,outputs:u,_inputs:f,_outputs:m,wrapper:y,template:h,env:_,_env:b,getComDef:I,context:x,onError:w,logger:E,options:C,onClick:k}){const{style:S,comAry:j,layoutTemplate:A,showType:O}=o;if("smart"===S.layout&&A){const p=(null==c?void 0:c.style)||{},{rowGap:y,layout:j,position:O,justifyContent:P,flexWrap:R,flexDirection:T,display:$,columnGap:F,alignItems:M}=p,N=a(p,["rowGap","layout","position","justifyContent","flexWrap","flexDirection","display","columnGap","alignItems"]),D=Object.assign(N||{},S);return r().createElement("div",{"data-isslot":"1","data-slot-id":o.id,onClick:k,className:`${v(D)}${t&&s?` ${s}`:""}`,style:Object.assign(Object.assign(Object.assign({},g(D,!!N,t,"module"===o.type,C)),n),{display:"flex",flexDirection:"column"})},A.map(((t,o)=>d({com:t,index:o,env:_,getComDef:I,context:x,scope:e,inputs:l,outputs:u,_inputs:f,_outputs:m,_env:b,template:h,onError:w,logger:E,createPortal:i,options:C}))))}const P=[];if(j.forEach(((t,o)=>{const n=p({com:t,env:_,getComDef:I,context:x,scope:e,inputs:l,outputs:u,_inputs:f,_outputs:m,index:o,_env:b,template:h,onError:w,logger:E,createPortal:i,options:C});n&&P.push(n)})),"function"==typeof y)return y(P.map((t=>(t.getJsx=({index:o,id:n})=>p({com:Object.assign(Object.assign({},t.com),{dynamicId:n}),env:_,getComDef:I,context:x,scope:e,inputs:l,outputs:u,_inputs:f,_outputs:m,index:o,_env:b,template:h,onError:w,logger:E,createPortal:i,options:C}),t))));{const e=null==c?void 0:c.style,i=Object.assign(S,e||{});return r().createElement("div",{"data-isslot":"1","data-slot-id":o.id,onClick:k,className:`${v(i)}${t&&s?` ${s}`:""}`,style:Object.assign(Object.assign({},g(i,!!e||"module"===o.type,t,"module"===o.type,C)),n)},P.map((e=>e.jsx)))}}function p({com:e,env:t,getComDef:o,context:n,scope:i,inputs:s,outputs:c,_inputs:a,_outputs:u,index:p,_env:m,template:g,onError:v,logger:y,createPortal:h,options:_}){var b,I;const{id:x,def:w,name:E,child:C,brother:k,dynamicId:S}=e,j=n.getComInfo(x),{hasPermission:A,permissions:O}=t,P=null===(I=null===(b=null==j?void 0:j.model)||void 0===b?void 0:b.permissions)||void 0===I?void 0:I.id;if(P&&"function"==typeof A){const e=A(P);if(!e||"boolean"!=typeof e&&!e.permission){const t=O.find((e=>e.id===P));return"hintLink"===((null==e?void 0:e.type)||(null==t?void 0:t.register.noPrivilege))?{id:x,name:E,jsx:r().createElement("div",{key:x},r().createElement("a",{href:(null==e?void 0:e.hintLinkUrl)||t.hintLink,target:"_blank",style:{textDecoration:"underline"}},(null==e?void 0:e.hintLinkTitle)||t.register.title)),style:{}}:void 0}}if(o(w)){const b=n.get({comId:x,dynamicId:S,scope:i?Object.assign(Object.assign({},i),{id:S?i.id+"-"+S:i.id}):null,_ioProxy:{inputs:s,outputs:c,_inputs:a,_outputs:u}});if(b){const l=x+(i?i.id:"")+p;return{id:x,jsx:r().createElement(f,{key:l,com:e,index:p,getComDef:o,context:n,scope:i,props:b,env:t,_env:m,template:g,onError:v,logger:y,createPortal:h,options:_},null==k?void 0:k.map(((e,r)=>d({com:e,index:r,env:t,getComDef:o,context:n,scope:i,inputs:s,outputs:c,_inputs:a,_outputs:u,_env:m,template:g,onError:v,logger:y,createPortal:h,options:_}))),C?d({com:C,index:p,env:t,getComDef:o,context:n,scope:i,inputs:s,outputs:c,_inputs:a,_outputs:u,_env:m,template:g,onError:v,logger:y,createPortal:h,options:_}):null),name:E,inputs:b.inputsCallable,style:b.style,com:e}}return{id:x,jsx:r().createElement("div",{className:l.error},"未找到组件(",w.namespace,"@",w.version," - ",x,")定义."),name:E,style:{}}}return{id:x,jsx:r().createElement("div",{className:l.error},"未找到组件(",w.namespace,"@",w.version,")定义."),name:E,style:{}}}function f({com:e,index:t,props:o,scope:s,template:a,env:d,createPortal:u,_env:p,getComDef:f,context:g,onError:v,logger:h,children:_,options:b}){const{id:I,def:x,name:w,slots:E={},dynamicId:C}=e,{data:k,title:S,style:j,inputs:A,outputs:O,_inputs:P,_outputs:R,_notifyBindings:T}=o,[,$]=(0,n.useState)(!1);(0,n.useMemo)((()=>{const{handlePxToVw:e,debug:t,disableStyleInjection:o}=b;if(!o&&!g.styleMap[I]){g.styleMap[I]=!0;const{pxToRem:t}=d,o=function({env:e,style:t,def:o}){var n;const r=null===(n=null==e?void 0:e.themes)||void 0===n?void 0:n.comThemes;if(!r)return t.styleAry;let i=t.styleAry;const{themesId:s}=t,{namespace:c}=o;if(s||i)if("_defined"===s);else{const e=r[c];if(Array.isArray(e)){const t=e.find((({id:e})=>e===s));t&&(i=t.styleAry)}}else{const e=r[c];if(Array.isArray(e)){const t=e.find((({isDefault:e})=>e));t&&(i=t.styleAry)}}return i}({env:d,def:x,style:j});if(Array.isArray(o)){const n=(0,i.iu)(),r=document.createElement("style");let s="";r.id=I,o.forEach((({css:o,selector:n,global:r})=>{":root"===n&&(n="> *:first-child"),Array.isArray(n)?n.forEach((n=>{s+=y({id:I,css:o,selector:n,global:r,configPxToRem:t,handlePxToVw:e})})):s+=y({id:I,css:o,selector:n,global:r,configPxToRem:t,handlePxToVw:e})})),r.innerHTML=s,n?n.appendChild(r):document.head.appendChild(r)}Reflect.deleteProperty(j,"styleAry"),Reflect.deleteProperty(j,"themesId")}}),[]);const F=f(x),M=new Proxy(E,{get(e,t){const o=E[t];if(!o)return;let n;s&&(n={id:s.id+"-"+s.frameId+(C?"-"+C:""),frameId:t,parentComId:I,parent:s});const i=g.get({comId:I,slotId:t,slot:o,scope:n});return{render(e){const c=null==e?void 0:e.scope;return c&&(n={id:c.id+"-"+c.frameId,frameId:t,parentComId:I,parent:c}),o?r().createElement(m,{key:null==e?void 0:e.key,props:i,currentScope:n,slotId:t,slot:o,params:e,style:j,onError:v,createPortal:u,parentComId:I,logger:h,env:d,_env:p,scope:s,getComDef:f,context:g,options:b}):r().createElement("div",{className:l.error},`组件(namespace=${x.namespace}）的插槽(id=${t})`," 未找到.")},get size(){var e,o;return!!(null===(o=null===(e=E[t])||void 0===e?void 0:e.comAry)||void 0===o?void 0:o.length)},_inputs:i._inputs,inputs:i.inputs,outputs:i.outputs}}}),N=(0,n.useMemo)((()=>{if(o.frameId&&o.parentComId){let e=(null==s?void 0:s.parentScope)||s;const t=g.get({comId:o.parentComId,slotId:o.frameId,scope:(null==e?void 0:e.parent)?e:null});if(t)return{get _inputs(){return new Proxy({},{get:(e,o)=>t._inputRegs[o]})}}}}),[]),D=function({style:e,id:t}){const o=[t,l.com];1!==e.flex||e._new||o.push(l.flex);e.heightAuto&&o.push(l.comHeightAuto);return o.join(" ")}({style:j,id:I}),B=function({style:e}){const t={},{width:o,height:n,maxWidth:r,flexX:s,minWidth:c,minHeight:a,rotation:l}=e;o||s?(0,i.Et)(o)?t.width=o+"px":o&&(t.width=o):t.width="100%";(0,i.Et)(n)?t.height=n+"px":n&&(t.height=n);r&&(t.maxWidth=r);c&&(t.minWidth=c);a&&(t.minHeight=a);(0,i.Et)(l)&&(t.transform=`rotate(${l}deg)`,t.transformOrigin="center center");return t}({style:j}),L=function({style:e}){const{margin:t,marginTop:o,marginLeft:n,marginRight:r,marginBottom:i,paddingTop:s,paddingLeft:c,paddingRight:a,paddingBottom:l}=e;if(t)return{margin:t};return{marginTop:o,marginLeft:n,marginRight:r,marginBottom:i,paddingTop:s,paddingLeft:c,paddingRight:a,paddingBottom:l}}({style:j}),K={zIndex:j.zIndex||1};if(["fixed","absolute"].includes(j.position)){const{top:e,left:t,right:o,bottom:n}=j;(e||(0,i.Et)(e))&&(K.top=(0,i.Et)(e)?e+"px":e),(n||(0,i.Et)(n))&&(K.bottom=(0,i.Et)(n)?n+"px":n),(t||(0,i.Et)(t))&&(K.left=(0,i.Et)(t)?t+"px":t),(o||(0,i.Et)(o))&&(K.right=(0,i.Et)(o)?o+"px":o),"fixed"===j.position?K.zIndex=1e3:"absolute"===j.position&&(K.zIndex=1)}const W=F.runtime;let q=r().createElement(W,{id:C||I,env:d,_env:p,data:k,name:w,title:S,style:j,inputs:A,outputs:O,_inputs:P,_outputs:R,_notifyBindings:T,slots:M,createPortal:u,parentSlot:N,onError:v,logger:h,_onError_:e=>{throw new Error(e)}});return(0,n.useLayoutEffect)((()=>{$(!0)}),[]),"function"==typeof a&&(q=a({id:I,jsx:q,name:w,scope:s,index:t})),q=q?r().createElement("div",{id:I,key:I,"data-title":S,"data-namespace":x.namespace,style:Object.assign(Object.assign(Object.assign(Object.assign({display:j.display,visibility:j.visibility,position:j.position,flex:j.flex,flexDirection:j.flexDirection,flexShrink:j.flexShrink},K),B),L),j.ext||{}),className:D},r().createElement(c.A,{errorTip:`组件 (namespace = ${x.namespace}@${x.version}）渲染错误`,options:b},q,_)):null,q}function m({slotId:e,parentComId:t,props:o,currentScope:s,slot:c,params:a,scope:l,env:d,createPortal:p,_env:f,style:m,getComDef:g,context:v,onError:y,logger:h,options:_}){const b=(0,n.useRef)(null),{curScope:I,curProps:x,isRuntime:w}=(0,n.useMemo)((()=>{const n=!d.edit;let r=s,l=o,u=!1;if(r||"scope"===(null==c?void 0:c.type)&&(r={id:(0,i.uR)(10,16),frameId:e,parentComId:t},u=!0),a){const o=a.inputValues;if("object"==typeof o&&(u||(r=Object.assign(Object.assign({},r),{id:r.id+"-"+(0,i.uR)(10,16),parentScope:r})),l=v.get({comId:t,slotId:e,scope:r}),n)){l.setSlotValue(o);for(let e in o)l.inputs[e](o[e],r)}}return l.run(r),{curScope:r,curProps:l,isRuntime:n}}),[]);(0,n.useEffect)((()=>{if(w){const e=null==a?void 0:a.inputValues;if(e)if(b.current){if("object"==typeof e&&JSON.stringify(b.current)!==JSON.stringify(e)){b.current=e,x.setSlotValue(e);for(let t in e)x.inputs[t](e[t],I);x.run()}}else b.current=e}}),[null==a?void 0:a.inputValues]),(0,n.useEffect)((()=>()=>{x.destroy()}),[]);return(0,n.useMemo)((()=>r().createElement(u,{scope:I,env:d,createPortal:p,_env:f,slot:c,params:a,wrapper:null==a?void 0:a.wrap,template:null==a?void 0:a.itemWrap,getComDef:g,context:v,inputs:null==a?void 0:a.inputs,outputs:null==a?void 0:a.outputs,_inputs:null==a?void 0:a._inputs,_outputs:null==a?void 0:a._outputs,onError:y,logger:h,options:_})),[])}function g(e,t,o,n,r){const{handlePxToVw:i}=r,{paddingLeft:s,paddingTop:c,paddingRight:l,paddingBottom:d,background:u,backgroundColor:p,backgroundImage:f,backgroundPosition:m,backgroundRepeat:g,backgroundSize:v,position:y,rowGap:h,columnGap:_,borderBottomColor:b,borderBottomLeftRadius:I,borderBottomRightRadius:x,borderBottomStyle:w,borderBottomWidth:E,borderLeftColor:C,borderLeftStyle:k,borderLeftWidth:S,borderRightColor:j,borderRightStyle:A,borderRightWidth:O,borderTopColor:P,borderTopLeftRadius:R,borderTopRightRadius:T,borderTopStyle:$,borderTopWidth:F,boxShadow:M,top:N,left:D,marginLeft:B,marginTop:L,marginRight:K,marginBottom:W,overflowX:q,overflowY:H}=e,V=a(e,["paddingLeft","paddingTop","paddingRight","paddingBottom","background","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","position","rowGap","columnGap","borderBottomColor","borderBottomLeftRadius","borderBottomRightRadius","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopLeftRadius","borderTopRightRadius","borderTopStyle","borderTopWidth","boxShadow","top","left","marginLeft","marginTop","marginRight","marginBottom","overflowX","overflowY"]);let G={rowGap:h,columnGap:_,paddingLeft:s||0,paddingTop:c||0,paddingRight:l||0,paddingBottom:d||0,backgroundColor:p||(o?"#ffffff":void 0),backgroundImage:f,backgroundPosition:m,backgroundRepeat:g,backgroundSize:v,borderBottomColor:b,borderBottomLeftRadius:I,borderBottomRightRadius:x,borderBottomStyle:w,borderBottomWidth:E,borderLeftColor:C,borderLeftStyle:k,borderLeftWidth:S,borderRightColor:j,borderRightStyle:A,borderRightWidth:O,borderTopColor:P,borderTopLeftRadius:R,borderTopRightRadius:T,borderTopStyle:$,borderTopWidth:F,boxShadow:M,overflowX:q,overflowY:H};if(u){if("object"==typeof u){const{background:e,backgroundImage:t,backgroundColor:o,backgroundRepeat:n,backgroundSize:r}=u;G.backgroundRepeat=n,G.backgroundSize=r,e?G.background=e:(G.backgroundImage=t,G.backgroundColor=o)}else G.background=u}return n&&(e.heightAuto?G.height="fit-content":e.heightFull?G.height="100%":G.height=e.height,e.widthAuto?G.width="fit-content":e.widthFull?G.width="100%":G.width=e.width),t&&(G=Object.assign(G,V)),i&&Object.entries(G).forEach((([e,t])=>{const o=typeof t;"string"===o&&-1!==t.indexOf("px")?G[e]=i(t):G[e]="number"===o?i(`${t}px`):t})),G}function v(e){var t,o;const n=[l.slot,"slot"],r=e;if(r){"flex-column"==(null===(t=r.layout)||void 0===t?void 0:t.toLowerCase())?n.push(l.lyFlexColumn):"flex-row"==(null===(o=r.layout)||void 0===o?void 0:o.toLowerCase())&&n.push(l.lyFlexRow);const e=r.justifyContent;e&&("FLEX-START"===e.toUpperCase()?n.push(l.justifyContentFlexStart):"CENTER"===e.toUpperCase()?n.push(l.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?n.push(l.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?n.push(l.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&n.push(l.justifyContentFlexSpaceBetween));const i=r.alignItems;i&&("FLEX-START"===i.toUpperCase()?n.push(l.alignItemsFlexStart):"CENTER"===i.toUpperCase()?n.push(l.alignItemsFlexCenter):"FLEX-END"===i.toUpperCase()&&n.push(l.alignItemsFlexFlexEnd))}return n.join(" ")}function y({id:e,css:t,selector:o,global:n,configPxToRem:r,handlePxToVw:s}){return`\n    ${n?"":`#${e} `}${o.replace(/\{id\}/g,`${e}`)} {\n      ${Object.keys(t).map((e=>{let o=t[e];return r&&"string"==typeof o&&-1!==o.indexOf("px")?o=(0,i.a8)(o):s&&"string"==typeof o&&-1!==o.indexOf("px")&&(o=s(o)),`${(0,i.RD)(e)}: ${o};`})).join("\n")}\n    }\n  `}},882:(e,t,o)=>{"use strict";o.d(t,{XX:()=>C,b2:()=>E});var n=o(12),r=o.n(n),i=o(983),s=o(330),c=o(893),a=o(999),l=o(29),d=o(165),u=o(148),p=o(443),f=o(462),m=o(483),g=o(356),v=o(822),y=o(50),h=o(537),_=o.n(h);o(208);function b(e,t){e.use({target:t})}console.log(`%c ${s.UU} %c@${s.rE}`,"color:#FFF;background:#fa6400","","");class I{constructor(e,t){this.options=e,this.performance={render:{start:window.MYBRICKS_PC_FMP_START||(new Date).getTime(),end:null,time:null},callConnectorTimes:[]},this.onCompleteCallBacks=[],this.comDefs={},this.onError=e=>{console.error(e),g.A.error(e)},this.observable=l.s,this._v=t._v;const{env:o,debug:n,observable:r,onError:i,plugins:s=[]}=e;let c;this.mode=n?"development":"production";const m=null==e?void 0:e.pxToVw;m&&(c=(0,y.BS)(m),e.handlePxToVw=c);const v=null==o?void 0:o.pxToRem;if(v){const{enableAdaptive:e=!1,landscapeWidth:t=1440}=v,o=document.documentElement;if(e){const e=()=>{o.style.fontSize=o.clientWidth/(t/12)+"px"};e(),window.addEventListener("resize",e)}else o.style.fontSize="12px"}r?this.observable=r:(0,l.y)({pxToRem:o.pxToRem,pxToVw:c});const h=(0,y.iu)();b(d.A,h),b(u.A,h),b(p.A,h),b(f.A,h);const{onCompleteCallBacks:_}=this;if(o.runtime||(o.runtime={onComplete(e){_.push(e)}}),o.i18n||(o.i18n=e=>e),o.renderModule){const t=o.renderModule;o.renderModule=(n,r)=>t(n,Object.assign(Object.assign(Object.assign({},e),r),{env:o,_isNestedRender:!0,_context:this}))}else o.renderModule=(t,n)=>C(t,Object.assign(Object.assign(Object.assign({},e),n),{env:o,_isNestedRender:!0,_context:this}));if(o.renderCom){const t=o.renderCom;o.renderCom=(o,n)=>t(o,Object.assign(Object.assign(Object.assign({},e),n),{_isNestedRender:!0,_context:this}))}else o.renderCom=(t,o)=>C(t,Object.assign(Object.assign(Object.assign({},e),o),{_isNestedRender:!0,_context:this}));const I=document.body;o.canvas||(o.canvas={get type(){return I.clientWidth<=414?"mobile":"pc"}}),"canvasElement"in o||(o.canvasElement=I);window.RENDER_WEB_PERFORMANCE={getPerformance:this.getPerformance.bind(this)},this.initOther(),this.initComdefs();[new a.A].concat(s).forEach((e=>{e.apply(this)}))}initOther(){const{env:e}=this.options;e.silent&&(0,m.qr)(),g.A.init(e.showErrorNotification),this.logger={info:console.info,trace:console.trace,warn:console.warn,error:e=>{console.error(e),g.A.error(e)}}}initComdefs(){const e=(t,o)=>{t.forEach((t=>{t.comAray?e(t.comAray,o):o[`${t.namespace}-${t.version}`]=t}))},{comDefs:t}=this.options,{comDefs:o}=this;t&&Object.assign(o,t);let n=[...window.__comlibs_edit_||[],...window.__comlibs_rt_||[]];n.push(_()),n.forEach((t=>{const n=t.comAray;n&&Array.isArray(n)&&e(n,o)}))}getComDef(e){const{comDefs:t}=this,o=t[e.namespace+"-"+e.version]||t[e.namespace];if(!o){const o=[];for(let n in t)n.startsWith(e.namespace+"-")&&o.push(t[n]);if(o&&o.length>0){o.sort(((e,t)=>(0,y.Gm)(e.version,t.version)));const t=o[0];return console.warn(`【Mybricks】组件${e.namespace+"@"+e.version}未找到，使用${t.namespace}@${t.version}代替.`),t}return console.error(`组件${e.namespace+"@"+e.version}未找到，请确定是否存在该组件以及对应的版本号.`),null}return o}getPerformance(){return this.performance}setPerformanceRender(e,t){const o=this.performance.render;o[e]=t,"end"===e&&(o.time=t-o.start)}setPerformanceCallConnectorTimes(e){this.performance.callConnectorTimes.push(e)}}const x=(0,n.createContext)({});function w({children:e,value:t}){return(0,n.useEffect)((()=>()=>{t.onCompleteCallBacks.forEach((e=>{e()}))}),[]),r().createElement(x.Provider,{value:t},e)}function E(){return(0,n.useContext)(x)}function C(e,t){var o;let n=e;if(t.env.edit||null===(o=t.env.runtime)||void 0===o||o.debug,n){let e=null;if("scenes"in n?((t._isNestedRender||t.debug)&&(t.env=(0,y.A4)(t.env)),e=r().createElement(c.A,{json:n,options:t})):n.slot&&(t.env.edit&&n.type,e=r().createElement(i.A,{json:n,options:t,root:"module"!==n.type})),!e){const e=t._isNestedRender?t._context:new I(t,n);return(0,v.A)({json:n,getComDef:t=>e.getComDef(t),events:t.events,env:t.env,ref(e){if("function"==typeof t.ref)t.ref(e);else{const{inputs:o}=e,r=n.inputs;o&&Array.isArray(r)&&r.forEach((e=>{const{id:n,mockData:r}=e;let i;if(t.debug&&void 0!==r)try{i=JSON.parse(decodeURIComponent(r))}catch(e){i=r}o[n](i)})),e.run()}},onError:e.onError,debug:t.debug,debugLogger:t.debugLogger,logger:e.logger,scenesOperate:t.scenesOperate,_isNestedRender:t._isNestedRender,_context:e},{observable:e.observable}),null}return t._isNestedRender?e:r().createElement(w,{value:new I(t,n)},e)}return null}},999:(e,t,o)=>{"use strict";o.d(t,{A:()=>p});var n=o(12),r=o.n(n),i=o(33),s=o.n(i),c=o(50),a=o(997);const l=a.A.locals,d=r().createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10635",width:"12",height:"12"},r().createElement("path",{d:"M219.428571 73.142857v877.714286H73.142857V73.142857zM365.714286 73.142857l585.142857 438.857143-577.828572 438.857143L365.714286 599.771429","p-id":"10636",fill:"#707070"}));function u({resume:e}){return r().createElement("div",{className:l.debugger},r().createElement("div",{className:l.titlebar},r().createElement("div",null,"已在交互视图中暂停"),r().createElement("div",{className:l.resume,onClick:e},d)))}class p{constructor(){}apply(e){const{options:t,mode:o}=e,{env:n,debug:r,onError:i}=t;if("development"===o&&"function"==typeof r){const o=new f(n),{log:s,onResume:l}=r({resume:()=>{o.next()},ignoreAll:e=>{o.setIgnoreWait(e),e&&o.next(!0)}});o.setResume(l),e.debuggerPanel=o,t.debugLogger=s,e.onError=i,a.A.use({target:(0,c.iu)()})}}}class f{constructor(e){this.env=e,this.isReact18=!!s().createRoot,this.resume=()=>{},this._pending=!1,this._ignoreWait=!1,this._waitCount=0,this._waitBreakpointIds=[],this._waitIdToResolvesMap={}}setResume(e){this.resume=e}open(){if(this.dom)this.dom.style.visibility="visible";else{const e=document.createElement("div"),t=this.env.canvasElement;if(this.canvas=t,this.dom=e,e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="100000",e.style.visibility="visible",t.appendChild(e),this.isReact18){const t=s().createRoot(e);t.render(r().createElement(u,{resume:this.resume})),this.root=t}else s().render(r().createElement(u,{resume:this.resume}),e)}}close(){this.dom&&(this.dom.style.visibility="hidden")}destroy(){this.dom&&requestAnimationFrame((()=>{this.isReact18?this.root.unmount():s().unmountComponentAtNode(this.dom),this.root=null,this.canvas.removeChild(this.dom),this.canvas=null,this.dom=null}))}hasBreakpoint(e){return!this._ignoreWait&&(this._pending||e.isBreakpoint)}wait(e,t){return new Promise((o=>{if(this._ignoreWait)o();else{const n=this._waitBreakpointIds.length>0;if(n||t(),this.open(),this._pending=!0,e.isBreakpoint){if(n){const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(t)}const r=this._waitCount+++e.id;this._waitBreakpointIds.unshift(r),this._waitIdToResolvesMap[r]=[o]}else{const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(o)}}}))}next(e=!1){if(e)for(;this._waitBreakpointIds.length;)this.next();else{const e=this._waitBreakpointIds.pop(),t=this._waitIdToResolvesMap[e];t&&t.forEach((e=>e())),this._waitBreakpointIds.length||(this._pending=!1,this.close())}}setIgnoreWait(e){this._ignoreWait=e}}},208:(e,t,o)=>{"use strict";o(17),o(485)},485:(e,t,o)=>{"use strict"},543:(e,t,o)=>{"use strict";o(894),o(829),o(7)},7:(e,t,o)=>{"use strict";o(543)},844:(e,t,o)=>{"use strict";o(543)},829:(e,t,o)=>{"use strict";o(894)},894:(e,t,o)=>{"use strict";o(543)},17:(e,t,o)=>{"use strict";o(844)},12:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__12__},33:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__33__},330:e=>{"use strict";e.exports=JSON.parse('{"UU":"@mybricks/render-web","rE":"1.3.0"}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(o.exports,o,o.exports,__webpack_require__),o.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{render:()=>e.XX});var e=__webpack_require__(882)})(),__webpack_exports__})()));