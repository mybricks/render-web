!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports._mybricks_render_web=t(require("react")):e._mybricks_render_web=t(e.React)}(this,(__WEBPACK_EXTERNAL_MODULE_react__=>(()=>{"use strict";var __webpack_modules__={"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/less-loader/dist/cjs.js!./src/RenderSlot.less":
/*!**************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/less-loader/dist/cjs.js!./src/RenderSlot.less ***!
  \**************************************************************************************************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(/*! ../node_modules/css-loader/dist/runtime/noSourceMaps.js */"./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=n.n(r),s=n(/*! ../node_modules/css-loader/dist/runtime/api.js */"./node_modules/css-loader/dist/runtime/api.js"),a=n.n(s)()(o());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.slot-a8d25 {\n  width: 100%;\n  height: 100% !important;\n  position: relative !important;\n}\n.lyFlexColumn-d9936 {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-a9454 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-ea522 {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-e8a52 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-fce2e {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-d55ab {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-ef3f2 {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-c031a {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-d8d4a {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-a42bd {\n  align-items: flex-end;\n}\n.debugFocus-cb6bb {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-b7979 {\n  flex-shrink: 0;\n  z-index: 1;\n}\n.flex-f44ac {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-f44ac > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-f44ac > * {\n  height: 100%;\n}\n.error-d28ed {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-cde46 {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-cde46 .tt-f3bc4 {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-cde46 .info-f2201 {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),a.locals={slot:"slot-a8d25",lyFlexColumn:"lyFlexColumn-d9936",lyFlexRow:"lyFlexRow-a9454",justifyContentFlexStart:"justifyContentFlexStart-ea522",justifyContentFlexCenter:"justifyContentFlexCenter-e8a52",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-fce2e",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-d55ab",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-ef3f2",alignItemsFlexStart:"alignItemsFlexStart-c031a",alignItemsFlexCenter:"alignItemsFlexCenter-d8d4a",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-a42bd",debugFocus:"debugFocus-cb6bb",com:"com-b7979",flex:"flex-f44ac",error:"error-d28ed",errorRT:"errorRT-cde46",tt:"tt-f3bc4",info:"info-f2201"};const i=a},"./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&a[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":
/*!**************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/noSourceMaps.js ***!
  \**************************************************************/e=>{e.exports=function(e){return e[1]}},"./src/RenderSlot.less":
/*!*****************************!*\
  !*** ./src/RenderSlot.less ***!
  \*****************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r=n(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),o=n.n(r),s=n(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */"./node_modules/style-loader/dist/runtime/styleDomAPI.js"),a=n.n(s),i=n(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */"./node_modules/style-loader/dist/runtime/insertBySelector.js"),c=n.n(i),l=n(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),u=n.n(l),d=n(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */"./node_modules/style-loader/dist/runtime/insertStyleElement.js"),p=n.n(d),f=n(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */"./node_modules/style-loader/dist/runtime/styleTagTransform.js"),m=n.n(f),b=n(/*! !!../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../node_modules/less-loader/dist/cjs.js!./RenderSlot.less */"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!./node_modules/less-loader/dist/cjs.js!./src/RenderSlot.less"),_={};_.styleTagTransform=m(),_.setAttributes=u(),_.insert=c().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=p();o()(b.default,_);const y=b.default&&b.default.locals?b.default.locals:void 0},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},a=[],i=0;i<e.length;i++){var c=e[i],l=r.base?c[0]+r.base:c[0],u=s[l]||0,d="".concat(l," ").concat(u);s[l]=u+1;var p=n(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var m=o(f,r);r.byIndex=i,t.splice(i,0,{identifier:d,updater:m,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var s=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var i=n(s[a]);t[i].references--}for(var c=r(e,o),l=0;l<s.length;l++){var u=n(s[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=c}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},"../_comlibs/comlib-core/src/connector/runtime.ts":
/*!********************************************************!*\
  !*** ../_comlibs/comlib-core/src/connector/runtime.ts ***!
  \********************************************************/(e,t,n)=>{function r({env:e,data:t,outputs:n,onError:r},o={}){if(t.connector)try{e.callConnector(t.connector,o).then((e=>{n.then(e)})).catch((e=>{n.catch(e)}))}catch(e){console.error(e),n.catch(`执行错误 ${e.message||e}`)}else n.catch("没有选择接口")}function o({env:e,data:t,inputs:n,outputs:o,onError:s}){e.runtime&&(t.immediate?r({env:e,data:t,outputs:o}):n.call((n=>{r({env:e,data:t,outputs:o,onError:s},n)})))}n.r(t),n.d(t,{default:()=>o})},"../_comlibs/comlib-core/src/fn/Fn.tsx":
/*!*********************************************!*\
  !*** ../_comlibs/comlib-core/src/fn/Fn.tsx ***!
  \*********************************************/(e,t,n)=>{function r({inputs:e,outputs:t}){}n.r(t),n.d(t,{default:()=>r})},"../_comlibs/comlib-core/src/runtime.ts":
/*!**********************************************!*\
  !*** ../_comlibs/comlib-core/src/runtime.ts ***!
  \**********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>p,getCom:()=>f});var r=n(/*! ./fn/com.json */"../_comlibs/comlib-core/src/fn/com.json"),o=n(/*! ./fn/Fn */"../_comlibs/comlib-core/src/fn/Fn.tsx"),s=n(/*! ./var/com.json */"../_comlibs/comlib-core/src/var/com.json"),a=n(/*! ./var/Var */"../_comlibs/comlib-core/src/var/Var.tsx"),i=n(/*! ./type-change/com.json */"../_comlibs/comlib-core/src/type-change/com.json"),c=n(/*! ./type-change/rt */"../_comlibs/comlib-core/src/type-change/rt.tsx"),l=n(/*! ./connector/com.json */"../_comlibs/comlib-core/src/connector/com.json"),u=n(/*! ./connector/runtime */"../_comlibs/comlib-core/src/connector/runtime.ts");const d={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[m({comDef:r,rt:o.default}),m({comDef:s,rt:a.default}),m({comDef:i,rt:c.default}),m({comDef:l,rt:u.default})]},p=d;function f(e){return d.comAray.find((t=>t.namespace===e))}function m({comDef:e,rt:t,data:n}){return Object.assign(e,{runtime:t,data:n})}},"../_comlibs/comlib-core/src/type-change/rt.tsx":
/*!******************************************************!*\
  !*** ../_comlibs/comlib-core/src/type-change/rt.tsx ***!
  \******************************************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function __WEBPACK_DEFAULT_EXPORT__({data,outputs,inputs,onError}){inputs.from(((val,relOutpus)=>{var _a;const script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){let fn,returnVal,isOk;try{eval(`fn = ${script}`),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError(`数据转换错误:${e.message}`,e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__})},"../_comlibs/comlib-core/src/var/Var.tsx":
/*!***********************************************!*\
  !*** ../_comlibs/comlib-core/src/var/Var.tsx ***!
  \***********************************************/(e,t,n)=>{function r({data:e,outputs:t,inputs:n}){n.get(((t,n)=>{const r=o(e.val);n.return(r)})),n.set((n=>{e.val=n,t.changed(o(n))}))}function o(e){if(e&&"object"==typeof e)try{return JSON.parse(JSON.stringify(e))}catch(t){return e}return e}n.r(t),n.d(t,{default:()=>r})},"./src/Main.tsx":
/*!**********************!*\
  !*** ./src/Main.tsx ***!
  \**********************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(/*! react */"react"),o=n.n(r),s=n(/*! ./RenderSlot */"./src/RenderSlot.tsx"),a=n(/*! ./observable */"./src/observable/index.ts"),i=n(/*! @mybricks/comlib-core */"../_comlibs/comlib-core/src/runtime.ts"),c=n(/*! ./executor */"./src/executor.ts"),l=n(/*! ./utils */"./src/utils.ts");function u({json:e,opts:t}){const n=(0,r.useMemo)((()=>{var e;const n=null===(e=window.__rxui__)||void 0===e?void 0:e.CurrentNodeInfo;if(n&&"current"in n||(0,a.hijackReactcreateElement)(),t.comDefs)return t.comDefs;const r=window.__comlibs_rt_;if(!r||!Array.isArray(r))throw new Error('组件库为空，请检查是否通过<script src="组件库地址"><\/script>加载了组件库运行时.');r.push(i.default);const o={},s=e=>{e.forEach((e=>{e.comAray?s(e.comAray):o[`${e.namespace}-${e.version}`]=e}))};return r.forEach((e=>{const t=e.comAray;t&&Array.isArray(t)&&s(t)})),o}),[]),u=(0,r.useCallback)((e=>{const t=n[e.namespace+"-"+e.version];if(!t){const t=[];for(let r in n)r.startsWith(e.namespace+"-")&&t.push(n[r]);if(t){t.sort(((e,t)=>(0,l.compareVersion)(e.version,t.version)));const n=t[0];return console.warn(`【Mybricks】组件${e.namespace+"@"+e.version}未找到，使用${n.namespace}@${n.version}代替.`),n}throw console.log(n),new Error(`组件${e.namespace+"@"+e.version}未找到，请确定是否存在该组件以及对应的版本号.`)}return t}),[]),d=Object.assign({runtime:{},i18n:e=>e},t.env),{slot:p}=e,[f,m]=(0,r.useMemo)((()=>{try{let n;return[(0,c.default)({json:e,getComDef:u,env:d,ref(e){n=e,t.ref&&t.ref(e)}},{observable:t.observable||a.observable}),n]}catch(e){throw console.error(e),new Error("导出的JSON.script执行异常.")}}),[]);return(0,r.useLayoutEffect)((()=>{m.run()}),[]),o().createElement(s.default,{env:d,slot:p,getComDef:u,getContext:f.get})}},"./src/RenderSlot.tsx":
/*!****************************!*\
  !*** ./src/RenderSlot.tsx ***!
  \****************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(/*! react */"react"),o=n.n(r),s=n(/*! ./utils */"./src/utils.ts"),a=n(/*! ./RenderSlot.less */"./src/RenderSlot.less");function i({scopeId:e,slot:t,wrapper:n,env:r,getComDef:u,getContext:d}){const{style:p,comAry:f}=t,m=[];return f.forEach(((t,n)=>{const{id:c,def:l,slots:p={}}=t,f=u(l),b=e?{id:e}:void 0;let _;if(f){const{data:t,style:n,inputs:y,inputsCallable:g,outputs:h,_inputs:x,_outputs:v}=d(c,b),w=new Proxy(p,{get(t,n){const s=d(c,n),f=`组件(namespace=${l.namespace}）的插槽(id=${n})`;if(!s)throw new Error(`${f} 获取context失败.`);return{render(t){const c=p[n];if(c){let n,a;if(s.run(),t){n=t.key?`${e?e+"/":""}${t.key}`:e;const r=n?{id:n}:void 0,o=t.inputValues;if("object"==typeof o)for(let e in o)s.inputs[e](o[e],r);"function"==typeof t.wrap&&(a=t.wrap)}return o().createElement(i,{scopeId:n,env:r,slot:c,wrapper:a,getComDef:u,getContext:d})}return o().createElement("div",{className:a.default.error},f," 未找到.")},inputs:s.inputs,outputs:s.outputs}}}),k=function({style:e}){const t=[a.default.com];1===e.flex&&t.push(a.default.flex);return t.join(" ")}({style:n}),j=function({style:e}){const t={},{width:n,height:r}=e;n?(0,s.isNumber)(n)?t.width=n+"px":n&&(t.width=n):t.width="100%";(0,s.isNumber)(r)?t.height=r+"px":r&&(t.height=r);return t}({style:n}),E=function({style:e}){const t={},{width:n,marginTop:r,marginLeft:o,marginRight:a,marginBottom:i}=e;(0,s.isNumber)(r)&&(t.marginTop=r+"px");(0,s.isNumber)(o)&&("number"==typeof n||o<0?t.marginLeft=o+"px":t.paddingLeft=o+"px");(0,s.isNumber)(a)&&("number"==typeof n||a<0?t.marginRight=a+"px":t.paddingRight=a+"px");(0,s.isNumber)(i)&&(t.marginBottom=i+"px");return t}({style:n}),C={};_=o().createElement("div",{key:c,style:Object.assign(Object.assign(Object.assign(Object.assign({display:n.display,overflow:"hidden",position:n.position||"relative"},C),j),E),n.ext||{}),className:k},o().createElement(f.runtime,{env:r,data:t,style:n,inputs:y,outputs:h,_inputs:x,_outputs:v,slots:w})),m.push({id:c,jsx:_,inputs:g})}else _=o().createElement("div",{className:a.default.error},"组件 (namespace = ",l.namespace,"）未找到."),m.push({id:c,jsx:_})})),n?n(m):o().createElement("div",{className:l(p),style:c(p)},m.map((e=>e.jsx)))}function c(e){const t={paddingLeft:e.paddingLeft||0,paddingTop:e.paddingTop||0,paddingRight:e.paddingRight||0,paddingBottom:e.paddingBottom||0};if(e.background){const{background:n,backgroundImage:r,backgroundColor:o,backgroundRepeat:s,backgroundSize:a}=e.background;t.backgroundRepeat=s,t.backgroundSize=a,n?t.background=n:(t.backgroundImage=r,t.backgroundColor=o)}return t}function l(e){var t,n;const r=[a.default.slot],o=e;if(o){"flex-column"==(null===(t=o.layout)||void 0===t?void 0:t.toLowerCase())?r.push(a.default.lyFlexColumn):"flex-row"==(null===(n=o.layout)||void 0===n?void 0:n.toLowerCase())&&r.push(a.default.lyFlexRow);const e=o.justifyContent;e&&("FLEX-START"===e.toUpperCase()?r.push(a.default.justifyContentFlexStart):"CENTER"===e.toUpperCase()?r.push(a.default.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?r.push(a.default.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?r.push(a.default.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&r.push(a.default.justifyContentFlexSpaceBetween));const s=o.alignItems;s&&("FLEX-START"===s.toUpperCase()?r.push(a.default.alignItemsFlexStart):"CENTER"===s.toUpperCase()?r.push(a.default.alignItemsFlexCenter):"FLEX-END"===s.toUpperCase()&&r.push(a.default.alignItemsFlexFlexEnd))}return r.join(" ")}},"./src/executor.ts":
/*!*************************!*\
  !*** ./src/executor.ts ***!
  \*************************/(e,t,n)=>{function r(e,{observable:t}){const{json:n,getComDef:r,env:o,ref:s}=e,a=n.coms,i=n.comsAutoRun,c=n.cons,l=n.pinRels,u=o,d={},p={},f={};function m(e,t,n){let r;try{r=JSON.stringify(n)}catch(e){r=n}console.log(`%c[Mybricks] 输入项 %c ${e.title||e.namespace} | ${t} > ${r}\n`,"color:#FFF;background:#000","","")}function b(e,t,n){let r;try{r=JSON.stringify(n)}catch(e){r=n}console.log(`%c[Mybricks] 输出项 %c ${e.title||e.namespace} | ${t} > ${r}\n`,"color:#FFF;background:#fa6400","","")}const _={};function y(n,o){let s=(null==o?void 0:o.id)||"";for(;;){const e=d[(""!==s?s+"-":s)+n];if(e)return e;if(""===s)break;s=s.substring(0,s.lastIndexOf("/"))}const i=(o?o.id+"-":"")+n,u=a[n],f=u.def,m=u.model;let y=e?JSON.parse(JSON.stringify(m)):m;const h=t(y),x={},v={},w={},k={},j=new Proxy({},{ownKeys:e=>u.inputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(e,t)=>function(e){x[t]=e;const n=v[t];n&&(n.forEach((t=>{e(t,new Proxy({},{get:(e,t)=>function(e){T[t](e)}}))})),v[t]=void 0)}}),E=new Proxy({},{get:(e,t)=>function(e){const r=l[n+"-"+t];if(r){const s={},a={};return r.forEach((e=>{s[e]=t=>{a[e]=t}})),Promise.resolve().then((()=>{g({id:n,def:f,pinId:t},e,o,a)})),s}g({id:n,def:f,pinId:t},e,o)}}),C=(e,t,n,r)=>{e&&e.forEach((e=>{var s;if("com"===e.type)r?r.finishPinParentKey===e.startPinParentKey&&g(e,t,n||o):g(e,t,n||o);else{if("frame"!==e.type)throw new Error("尚未实现");if(e.comId){if("inner-input"===e.direction){const n=p[e.comId+"-"+e.frameId+"-"+e.pinId];n&&n(t)}else if("inner-output"===e.direction&&"joint"===e.pinType){const n=c[e.comId+"-"+e.frameId+"-"+e.pinId];C(n,t)}}else null===(s=_[e.pinId])||void 0===s||s.call(_,t)}}))},T=new Proxy({},{ownKeys:e=>u.outputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(e,t,o)=>function(e,o,s){b(r(f),t,e);const a=c[n+"-"+t];C(a,e,o,s)}}),F=new Proxy({},{get:(e,t,n)=>function(e){w[t]=e;const n=k[t];n&&(n.forEach((t=>{e(t)})),k[t]=void 0)}}),S=new Proxy({},{get:(e,t,r)=>function(e){const r=c[n+"-"+t];r&&(b(f,t,e),r.forEach((t=>{if("com"!==t.type)throw new Error("尚未实现");g(t,e,o)})))}});return d[i]={data:h.data,style:h.style,_inputRegs:x,addInputTodo:(e,t)=>{let n=v[e];n||(v[e]=n=[]),n.push(t)},inputs:j,inputsCallable:E,outputs:T,_inputs:F,_outputs:S}}function g(e,t,n,o){var s;const{id:i,def:c,pinId:l,pinType:p}=e;if("ext"===p){const e=d[i];"show"===l?e.style.display="":"hide"===l&&(e.style.display="none")}else if(null===(s=c.rtType)||void 0===s?void 0:s.match(/^js/gi)){if(a[i]){const e=y(i,n),o=r(c);m(o,l,t);const s=(n?n.id+"-":"")+i;f[s]||(f[s]=!0,o.runtime({env:u,data:e.data,inputs:e.inputs,outputs:e.outputs})),e._inputRegs[l](t,new Proxy({},{get:(t,n)=>function(t){e.outputs[n](t)}}))}}else{const s=y(i,n);m(r(c),l,t);const a=s._inputRegs[l];if("function"==typeof a){let r;r=o||new Proxy({},{get:(t,r)=>function(t){s.outputs[r](t,n,e)}}),a(t,r)}else s.addInputTodo(l,t)}}function h(e){const{comId:t,frameId:n}=e,o=i[t?`${t}-${n}`:`${n}`];o&&o.forEach((e=>{const{id:t,def:n}=e;if(a[t]){const e=y(t),s=r(n);o=`${s.namespace} 开始执行`,console.log(`%c[Mybricks]%c ${o}\n`,"color:#FFF;background:#fa6400","",""),s.runtime({env:u,data:e.data,inputs:e.inputs,outputs:e.outputs})}var o}))}return"function"==typeof s&&s({run(){h({frameId:"_rootFrame_"})},inputs:new Proxy({},{get:(e,t)=>function(e){!function(e,t,n){const{frameId:r,comId:o,pinId:s}=e,a=c[(o?`${o}-${r}`:`${r}`)+"-"+s];a&&a.forEach((e=>{if("com"!==e.type)throw new Error("尚未实现");g(e,t,n)}))}({frameId:"_rootFrame_",pinId:t},e)}}),outputs(e,t){_[e]=t}}),{get(e,t,n){let r,o;for(let e=0;e<arguments.length;e++)e>0&&"string"==typeof arguments[e]&&(r=arguments[e]),"object"==typeof arguments[e]&&(o=arguments[e]);return r?function(e,t){const n=e+"-"+t;let r=d[n];if(!r){const o=new Proxy({},{get:(n,r)=>function(n,o){const s=c[e+"-"+t+"-"+r];s&&s.forEach((e=>{"com"===e.type&&g(e,n,o)}))}}),s=new Proxy({},{get:(e,t,r)=>function(e){p[n+"-"+t]=e}});let a;r=d[n]={run(){a||(a=!0,h({comId:e,frameId:t}))},inputs:o,outputs:s}}return r}(e,r):y(e,o)}}}n.r(t),n.d(t,{default:()=>r})},"./src/observable/global/index.ts":
/*!****************************************!*\
  !*** ./src/observable/global/index.ts ***!
  \****************************************/(e,t,n)=>{n.r(t),n.d(t,{globalReactionStack:()=>o.globalReactionStack,globalTaskEmitter:()=>r.globalTaskEmitter,proxyToRaw:()=>s,rawToProxy:()=>a});var r=n(/*! ./taskEmitter */"./src/observable/global/taskEmitter.ts"),o=n(/*! ./reactionStack */"./src/observable/global/reactionStack.ts");const s=new WeakMap,a=new WeakMap},"./src/observable/global/reactionStack.ts":
/*!************************************************!*\
  !*** ./src/observable/global/reactionStack.ts ***!
  \************************************************/(e,t,n)=>{n.r(t),n.d(t,{globalReactionStack:()=>o});var r=n(/*! . */"./src/observable/global/index.ts");const o=new class{constructor(){this.reactionStack=[]}regist(e){let t=this.getCurrentReaction();t&&r.globalTaskEmitter.registReaction(t,e)}autoRun(e,t){const{reactionStack:n}=this;if(-1===n.indexOf(e))try{return n.push(e),t()}finally{n.pop()}}getCurrentReaction(){const{reactionStack:e}=this;return e[e.length-1]}}},"./src/observable/global/taskEmitter.ts":
/*!**********************************************!*\
  !*** ./src/observable/global/taskEmitter.ts ***!
  \**********************************************/(e,t,n)=>{n.r(t),n.d(t,{globalTaskEmitter:()=>a});var r=n(/*! ../../utils */"./src/utils.ts"),o=n(/*! . */"./src/observable/global/index.ts");function s(e){e()}const a=new class{constructor(){this.taskMap=new WeakMap,this.reactionToTaskMap=new WeakMap}addTask(e){this.taskMap.set(e,new Map)}deleteTask(e){var t;if(!(0,r.isObject)(e))return;const n=o.proxyToRaw.get(e);o.proxyToRaw.delete(e),o.rawToProxy.delete(n);const s=this.taskMap.get(n);this.taskMap.delete(n);for(let e of s.keys()){this.deleteTask(o.rawToProxy.get(n[e]));const r=s.get(e);null===(t=null==r?void 0:r.forEach)||void 0===t||t.call(r,(e=>{this.deleteReaction(e)}))}}deleteReaction(e){let t=this.reactionToTaskMap.get(e);t&&(this.reactionToTaskMap.delete(e),t.forEach((t=>{t.forEach((t=>{t.delete(e)}))})))}registReaction(e,{target:t,key:n}){const r=this.taskMap.get(t);if(r){let t=r.get(n);t||(t=new Set,r.set(n,t)),t.has(e)||t.add(e);let o=this.reactionToTaskMap.get(e);o||(o=new Set,this.reactionToTaskMap.set(e,o)),o.has(r)||o.add(r)}}getReactions({target:e,key:t}){const n=this.taskMap.get(e);if(!n)return[];return n.get(t)||[]}runTask(e){const t=this.getReactions(e);t.size&&t.forEach(s)}}},"./src/observable/handles.ts":
/*!***********************************!*\
  !*** ./src/observable/handles.ts ***!
  \***********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var r=n(/*! ./ */"./src/observable/index.ts"),o=n(/*! ../utils */"./src/utils.ts"),s=n(/*! ./global */"./src/observable/global/index.ts");const a={get:function(e,t){const n=e[t];if(["$$typeof","constructor"].includes(t))return n;s.globalReactionStack.regist({target:e,key:t});const a=s.rawToProxy.get(n);return(0,o.isObject)(n)?a||(0,r.observable)(n):a||n},set:function(e,t,n){(0,o.isObject)(n)&&(n=s.proxyToRaw.get(n)||n);const r=Object.hasOwnProperty.call(e,t),a=e[t];e[t]=n;let i=!1;switch(!0){case!r||Array.isArray(e)&&"length"===t:case n!==a:i=!0}return i&&(s.globalTaskEmitter.runTask({target:e,key:t}),s.globalTaskEmitter.deleteTask(s.rawToProxy.get(a))),!0}}},"./src/observable/index.ts":
/*!*********************************!*\
  !*** ./src/observable/index.ts ***!
  \*********************************/(e,t,n)=>{n.r(t),n.d(t,{hijackReactcreateElement:()=>l,observable:()=>u});var r=n(/*! react */"react"),o=n.n(r),s=n(/*! ./global */"./src/observable/global/index.ts"),a=n(/*! ../utils */"./src/utils.ts"),i=n(/*! ./handles */"./src/observable/handles.ts");let c;function l(){c||(c=o().createElement,o().createElement=function(){let[e,...t]=arguments;if("function"!=typeof e||!e.prototype||e.prototype instanceof o().Component||e.prototype.isReactComponent)return c(e,...t);if(!e.__rxui__){function n(t){var n;const o=(0,r.useRef)(null),[,s]=(0,r.useState)([]),a=(0,r.useCallback)((()=>{s([])}),[]);let i;return(0,r.useMemo)((()=>{o.current||(o.current=new d(a))}),[]),(0,r.useEffect)((()=>()=>{var e;null===(e=o.current)||void 0===e||e.destroy(),o.current=null}),[]),null===(n=o.current)||void 0===n||n.track((()=>{i=e(t)})),i}e.__rxui__=n}return c(e.__rxui__,...t)})}function u(e){return(0,a.isObject)(e)?s.proxyToRaw.has(e)?e:s.rawToProxy.get(e)||function(e){const t=i.default,n=new Proxy(e,t);return s.rawToProxy.set(e,n),s.proxyToRaw.set(n,e),s.globalTaskEmitter.addTask(e),n}(e):{}}class d{constructor(e){this.update=e}track(e){s.globalReactionStack.autoRun(this.update,e)}destroy(){s.globalTaskEmitter.deleteReaction(this.update)}}},"./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/(e,t,n)=>{function r(e){return e&&"object"==typeof e}function o(e){return"number"==typeof e&&!isNaN(e)}function s(e,t){const n=e.split("."),r=t.split("."),o=n.length,s=r.length,a=Math.min(o,s);let i=0;for(;i<a;i++){let e=parseInt(n[i]),t=parseInt(r[i]);if(e>t)return 1;if(e<t)return-1}if(o>s){for(let e=i;e<o;e++)if(0!=parseInt(n[e]))return 1;return 0}if(o<s){for(let e=i;e<s;e++)if(0!=parseInt(r[e]))return-1;return 0}return 0}n.r(t),n.d(t,{compareVersion:()=>s,isNumber:()=>o,isObject:()=>r})},react:
/*!**************************************************************************************!*\
  !*** external {"commonjs":"react","commonjs2":"react","amd":"react","root":"React"} ***!
  \**************************************************************************************/e=>{e.exports=__WEBPACK_EXTERNAL_MODULE_react__},"../_comlibs/comlib-core/src/connector/com.json":
/*!******************************************************!*\
  !*** ../_comlibs/comlib-core/src/connector/com.json ***!
  \******************************************************/e=>{e.exports=JSON.parse('{"title":"连接器","namespace":"mybricks.core-comlib.connector","author":"MyBricks","author_name":"MyBricks","version":"1.0.0","description":"连接器","runtime":"./runtime.ts","editors":"./editors.tsx","icon":"./icon.svg","rtType":"js-autorun","inputs":[{"id":"call","rels":["then","catch"],"title":"调用","schema":{"type":"object"}}],"outputs":[{"id":"then","title":"结果","schema":{"type":"unknown"}},{"id":"catch","title":"发生错误","schema":{"type":"string"}}]}')},"../_comlibs/comlib-core/src/fn/com.json":
/*!***********************************************!*\
  !*** ../_comlibs/comlib-core/src/fn/com.json ***!
  \***********************************************/e=>{e.exports=JSON.parse('{"title":"Fn计算","namespace":"mybricks.core-comlib.fn","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"Fn计算","icon":"./icon.png","runtime":"./Fn.tsx","rtType":"js","visibility":false}')},"../_comlibs/comlib-core/src/type-change/com.json":
/*!********************************************************!*\
  !*** ../_comlibs/comlib-core/src/type-change/com.json ***!
  \********************************************************/e=>{e.exports=JSON.parse('{"title":"类型转换","namespace":"mybricks.core-comlib.type-change","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"类型转换","icon":"./icon.png","runtime":"./rt.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"from","title":"从","schema":{"type":"follow"},"rels":["to"]}],"outputs":[{"id":"to","title":"到","schema":{"type":"follow"},"conMax":1,"editable":true}]}')},"../_comlibs/comlib-core/src/var/com.json":
/*!************************************************!*\
  !*** ../_comlibs/comlib-core/src/var/com.json ***!
  \************************************************/e=>{e.exports=JSON.parse('{"visibility":false,"title":"变量","namespace":"mybricks.core-comlib.var","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"变量","icon":"./icon.png","runtime":"./Var.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"get","title":"读取","schema":{"type":"any"},"rels":["return"]},{"id":"set","title":"赋值","schema":{"type":"follow"}}],"outputs":[{"id":"return","title":"完成","schema":{"type":"unknown"}},{"id":"changed","title":"当值发生变化","schema":{"type":"unknown"}}]}')},"./package.json":
/*!**********************!*\
  !*** ./package.json ***!
  \**********************/e=>{e.exports=JSON.parse('{"name":"@mybricks/render-web","version":"1.0.17","description":"Render for web projects","main":"index.min.js","scripts":{"build":"webpack --config ./scripts/webpack.build.js","dev":"webpack --config ./scripts/webpack.dev.js"},"repository":{"type":"git","url":"https://github.com/mybricks/rxui.git"},"publishConfig":{"access":"public","registry":"https://registry.npmjs.org"},"author":"CheMingjun","license":"ISC","dependencies":{},"devDependencies":{"@babel/core":"^7.18.9","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.18.9","@babel/preset-react":"^7.18.6","@mybricks/rxui":"^1.0.86","@types/node":"^18.0.6","@types/react":"^18.0.15","@types/react-dom":"^18.0.6","@typescript-eslint/parser":"^5.41.0","babel-loader":"^8.2.5","commitizen":"^4.2.5","core-js":"^3.23.5","css-loader":"^6.7.1","cz-conventional-changelog":"^3.2.0","eslint":"^8.26.0","file-loader":"^6.2.0","html-webpack-plugin":"^5.5.0","image-webpack-loader":"^8.1.0","less":"^4.1.3","less-loader":"^11.0.0","raw-loader":"^4.0.1","rimraf":"^3.0.2","style-loader":"^3.3.1","ts-loader":"^9.3.1","typescript":"^4.2.3","webpack":"^5.73.0","webpack-bundle-analyzer":"^4.5.0","webpack-cli":"^4.10.0","webpack-dev-server":"^4.9.3","webpack-merge":"^5.8.0","webpackbar":"^5.0.2"}}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__={};return(()=>{
/*!***********************!*\
  !*** ./src/index.tsx ***!
  \***********************/
__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{render:()=>o});var e=__webpack_require__(/*! react */"react"),t=__webpack_require__.n(e),n=__webpack_require__(/*! ./Main */"./src/Main.tsx"),r=__webpack_require__(/*! ../package.json */"./package.json");function o(e,r={}){return t().createElement(n.default,{json:e,opts:r})}console.log(`%c ${r.name} %c@${r.version}`,"color:#FFF;background:#fa6400","","")})(),__webpack_exports__})()));
//# sourceMappingURL=index.min.js.map